<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=fpjTOVmNbO4Lz34iLyptLROjXfSpIU_1TsQlCJ7q4WlXEixY9aqhie8CVYCrTb1E);.lst-kix_list_2-6>li:before{content:"\0025cf   "}.lst-kix_list_2-7>li:before{content:"o  "}ul.lst-kix_list_1-0{list-style-type:none}.lst-kix_list_2-4>li:before{content:"o  "}.lst-kix_list_2-5>li:before{content:"\0025aa   "}.lst-kix_list_2-8>li:before{content:"\0025aa   "}.lst-kix_list_3-0>li:before{content:"-  "}.lst-kix_list_3-1>li:before{content:"o  "}.lst-kix_list_3-2>li:before{content:"\0025aa   "}ul.lst-kix_list_3-7{list-style-type:none}ul.lst-kix_list_3-8{list-style-type:none}ul.lst-kix_list_1-3{list-style-type:none}ul.lst-kix_list_3-1{list-style-type:none}.lst-kix_list_3-5>li:before{content:"\0025aa   "}ul.lst-kix_list_1-4{list-style-type:none}ul.lst-kix_list_3-2{list-style-type:none}ul.lst-kix_list_1-1{list-style-type:none}.lst-kix_list_3-4>li:before{content:"o  "}ul.lst-kix_list_1-2{list-style-type:none}ul.lst-kix_list_3-0{list-style-type:none}ul.lst-kix_list_1-7{list-style-type:none}.lst-kix_list_3-3>li:before{content:"\0025cf   "}ul.lst-kix_list_3-5{list-style-type:none}ul.lst-kix_list_1-8{list-style-type:none}ul.lst-kix_list_3-6{list-style-type:none}ul.lst-kix_list_1-5{list-style-type:none}ul.lst-kix_list_3-3{list-style-type:none}ul.lst-kix_list_1-6{list-style-type:none}ul.lst-kix_list_3-4{list-style-type:none}.lst-kix_list_3-8>li:before{content:"\0025aa   "}.lst-kix_list_3-6>li:before{content:"\0025cf   "}.lst-kix_list_3-7>li:before{content:"o  "}ul.lst-kix_list_2-8{list-style-type:none}ul.lst-kix_list_2-2{list-style-type:none}.lst-kix_list_1-0>li:before{content:"\0025cf   "}ul.lst-kix_list_2-3{list-style-type:none}ul.lst-kix_list_2-0{list-style-type:none}ul.lst-kix_list_2-1{list-style-type:none}ul.lst-kix_list_2-6{list-style-type:none}.lst-kix_list_1-1>li:before{content:"o  "}.lst-kix_list_1-2>li:before{content:"\0025aa   "}ul.lst-kix_list_2-7{list-style-type:none}ul.lst-kix_list_2-4{list-style-type:none}ul.lst-kix_list_2-5{list-style-type:none}.lst-kix_list_1-3>li:before{content:"\0025aa   "}.lst-kix_list_1-4>li:before{content:"\0025aa   "}.lst-kix_list_1-7>li:before{content:"\0025aa   "}.lst-kix_list_1-5>li:before{content:"\0025aa   "}.lst-kix_list_1-6>li:before{content:"\0025aa   "}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}.lst-kix_list_2-0>li:before{content:"\0025cf   "}.lst-kix_list_2-1>li:before{content:"o  "}.lst-kix_list_1-8>li:before{content:"\0025aa   "}.lst-kix_list_2-2>li:before{content:"\0025aa   "}.lst-kix_list_2-3>li:before{content:"\0025cf   "}ol{margin:0;padding:0}table td,table th{padding:0}.c41{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:488.8pt;border-top-color:#000000;border-bottom-style:solid}.c24{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:515.8pt;border-top-color:#000000;border-bottom-style:solid}.c30{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:177.2pt;border-top-color:#000000;border-bottom-style:solid}.c29{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:175.8pt;border-top-color:#000000;border-bottom-style:solid}.c13{margin-left:56.7pt;padding-top:0pt;text-indent:-28.4pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left;margin-right:34.4pt}.c6{margin-left:54pt;padding-top:0pt;padding-left:0pt;padding-bottom:8pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left;margin-right:34.4pt}.c36{padding-top:2pt;padding-bottom:0pt;line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left;margin-right:34.4pt}.c4{padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left;margin-right:34.4pt;height:11pt}.c9{margin-left:72pt;padding-top:0pt;padding-left:0pt;padding-bottom:8pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c3{margin-left:36pt;padding-top:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c38{color:#2f5496;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:13pt;font-family:"Calibri";font-style:normal}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9.5pt;font-family:"Consolas";font-style:normal}.c40{padding-top:12pt;padding-bottom:0pt;line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c39{padding-top:2pt;padding-bottom:0pt;line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c12{padding-top:0pt;padding-bottom:0pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left;height:11pt}.c33{color:#455463;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Calibri";font-style:normal}.c43{color:#2f5496;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Calibri";font-style:normal}.c14{margin-left:36pt;padding-top:0pt;padding-bottom:0pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c5{padding-top:0pt;padding-bottom:8pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left;height:11pt}.c21{padding-top:0pt;padding-bottom:6pt;line-height:1.0;orphans:2;widows:2;text-align:left;margin-right:34.4pt}.c27{padding-top:12pt;padding-bottom:0pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left;margin-right:34.4pt}.c25{padding-top:0pt;padding-bottom:6pt;line-height:1.0;orphans:2;widows:2;text-align:left;margin-right:-28.1pt}.c19{padding-top:12pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left;margin-right:34.4pt}.c10{padding-top:12pt;padding-bottom:8pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left;margin-right:34.4pt}.c2{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Calibri";font-style:normal}.c37{padding-top:6pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left;margin-right:-49.4pt}.c20{padding-top:6pt;padding-bottom:6pt;line-height:1.0;orphans:2;widows:2;text-align:left;margin-right:34.4pt}.c45{padding-top:0pt;padding-bottom:8pt;line-height:1.0;orphans:2;widows:2;text-align:left;margin-right:34.4pt}.c22{margin-left:36pt;padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c42{padding-top:12pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left;margin-right:34.3pt}.c15{padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left;margin-right:34.4pt}.c35{padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c16{padding-top:0pt;padding-bottom:8pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c23{padding-top:0pt;padding-bottom:0pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c7{font-size:9.5pt;font-family:"Consolas";color:#0000ff;font-weight:400}.c32{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#0000ff;text-decoration:underline}.c1{font-size:9.5pt;font-family:"Consolas";color:#000000;font-weight:400}.c18{border-spacing:0;border-collapse:collapse;margin-right:auto}.c47{background-color:#ffffff;max-width:516.3pt;padding:72pt 23.7pt 72pt 72pt}.c44{margin-left:54pt;padding-left:0pt;margin-right:34.4pt}.c28{margin-left:78pt;text-indent:-21.2pt}.c26{margin-left:85pt;text-indent:-28.3pt}.c31{margin-left:72pt;padding-left:0pt}.c11{color:inherit;text-decoration:inherit}.c46{padding:0;margin:0}.c8{height:0pt}.c34{margin-left:36pt}.c17{margin-left:28.4pt}.c48{background-color:#e7e6e6}.title{padding-top:24pt;color:#000000;font-weight:700;font-size:36pt;padding-bottom:6pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:18pt;color:#666666;font-size:24pt;padding-bottom:4pt;font-family:"Georgia";line-height:1.0791666666666666;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Calibri"}p{margin:0;color:#000000;font-size:11pt;font-family:"Calibri"}h1{padding-top:12pt;color:#2f5496;font-size:16pt;padding-bottom:0pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:2pt;color:#2f5496;font-size:13pt;padding-bottom:0pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:14pt;color:#000000;font-weight:700;font-size:14pt;padding-bottom:4pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:12pt;color:#000000;font-weight:700;font-size:12pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:11pt;color:#000000;font-weight:700;font-size:11pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:10pt;color:#000000;font-weight:700;font-size:10pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}</style></head><body class="c47 doc-content"><h1 class="c40"><span class="c43">Audio</span></h1><p class="c16"><span class="c2">Unity makes it easy to play sound in a game. The complexity comes when playing multiple sounds together or one in preference to the other. In this tech tip, we explore P3SAAudio, the sound manager in P3SampleApp.</span></p><p class="c23"><span>The source code of P3SAAudio is available at </span><span class="c32">file:///C:/P3/P3_SDK_V0.8\P3SampleApp\Assets\Scripts\GUI\Audio\P3SAAudio.cs</span><span class="c2">&nbsp;</span></p><p class="c23"><span class="c2">The numerous comments give a good description of the fields and methods.</span></p><p class="c12"><span class="c2"></span></p><p class="c23"><span class="c2">P3SAAudio implements the Multimorphic.P3App.GUI.IAudio interface. This lets the P3 SDK control sounds by calling P3SAAudio through known IAudio methods. This forwarding is initialized in P3SAAudio.Start() with the statement:</span></p><p class="c14"><span class="c1">Audio.audioInterface = </span><span class="c7">this</span><span class="c1">;</span></p><p class="c12"><span class="c2"></span></p><h2 class="c39"><span class="c38">Unity Audio</span></h2><p class="c16"><span>The Unity 5.6.7 manual contains a </span><span class="c32"><a class="c11" href="https://www.google.com/url?q=https://docs.unity3d.com/560/Documentation/Manual/Audio.html&amp;sa=D&amp;source=editors&amp;ust=1694828634648654&amp;usg=AOvVaw0usKIsAjnWUjDrYdD7CmTv">section on audio</a></span><span class="c2">. Here is a terse summary:</span></p><p class="c16"><span class="c2">Unity simulates sounds coming from multiple locations in 3D space. An AudioSource is a component playing a sound at the location of the parent GameObject. An AudioListener is a component that acts like a microphone at the location of the parent GameObject, typically the main camera. Technically, the AudioSource sends the sound signal to an AudioMixerGroup. The AudioMixerGroup applies some effects and sends the output signal to another AudioMixerGroup or the AudioMixer. An AudioMixer mixes audio from one or more AudioMixerGroups. The AudioMixer can send its signal to another mixer or to a listener. The output of the listener is what the user hears through the speakers.</span></p><p class="c16"><span>Selecting the menu Edit-&gt;Project Settings-&gt;Audio in Unity brings up the Audio Manager to edit some project-wide audio settings. See the </span><span class="c32"><a class="c11" href="https://www.google.com/url?q=https://docs.unity3d.com/560/Documentation/Manual/class-AudioManager.html&amp;sa=D&amp;source=editors&amp;ust=1694828634649564&amp;usg=AOvVaw04BR0fNRTQCd0CKvzzREpR">Unity manual</a></span><span class="c2">&nbsp;for the description of those settings.</span></p><h2 class="c39"><span class="c38">Main Mixer</span></h2><p class="c16"><span class="c2">The MainMixer is an asset which is present in all scenes. In the Project window, expand Assets &gt; Resources &gt; Sound and click on Mixer. In the Assets window, double-click on MainMixer. This opens the Audio Mixer window.</span></p><p class="c16"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 212.53px;"><img alt="" src="images/MainMixer.png" style="width: 624.00px; height: 212.53px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c16"><span class="c2">In the Groups panel on the left, you can see the master AudioMixerGroup takes input from 3 AudioMixerGroups (Playlist, Effects, Voice) and the Voice AudioMixerGroup takes input from 4 AudioMixerGroups (Necessary, ShotFeedback, Instruction and Chatter).</span></p><p class="c16"><span class="c2">P3SAAudio documents the audio mixer groups like this:</span></p><ul class="c46 lst-kix_list_2-0 start"><li class="c3 li-bullet-0"><span class="c2">Master is for master volume. &nbsp;All audio mixers lead to this mixer group.</span></li><li class="c3 li-bullet-0"><span class="c2">Playlists is for music playlists.</span></li><li class="c3 li-bullet-0"><span class="c2">Effects is for sound effects.</span></li><li class="c3 li-bullet-0"><span class="c2">Voice is for the various voice mixer groups.</span></li></ul><ul class="c46 lst-kix_list_2-1 start"><li class="c23 c31 li-bullet-0"><span class="c2">Necessary is used for voice callouts that must not be missed (e.g. &quot;ball saved&quot;).</span></li><li class="c23 c31 li-bullet-0"><span class="c2">ShotFeeback is used for voice callouts that indicate a successful shot by the player (e.g. &quot;Great shot&quot; or &quot;Jackpot&quot;).</span></li><li class="c23 c31 li-bullet-0"><span class="c2">Instruction is used for voice callouts that tell the player what to do (e.g. &quot;Shoot the scoop&quot; or &quot;One more for multiball&quot;).</span></li><li class="c9 li-bullet-0"><span class="c2">Chatter is used for voice callouts that are low priority and intended to add character to the game (e.g. &quot;Great day for pinball&quot; or in-game character conversations).</span></li></ul><p class="c14"><span class="c2">Necessary overrides ShotFeeback, Instruction and Chatter.</span></p><p class="c14"><span class="c2">ShotFeedback overrides Instruction and Chatter</span></p><p class="c16 c34"><span class="c2">Instruction overrides Chatter.</span></p><h2 class="c39"><span class="c38">P3SAAudio</span></h2><p class="c16"><span class="c2">When P3SASetup starts, it creates P3SAAudio by instantiating Resources/Prefabs/P3SAAudio.prefab</span></p><p class="c16"><span class="c2">The P3SAAudio prefab contains a P3SAAudio script, an AudioListener and three Playlists. The AudioMixerGroups are passed as arguments to the P3SAAudio script in the Inspector.</span></p><p class="c16"><span class="c2">Every time a scene finishes loading, P3SAAudio moves its location to the location of the Main Camera in the scene. It also disables the AudioListener on the Main Camera because P3SAAudio already has an AudioListener component and there can only be one active AudioListener in the scene.</span></p><p class="c16"><span class="c2">P3SAAudio handles the following events:</span></p><p class="c22"><span class="c0">Evt_SetSoundtrackVolume</span></p><p class="c22"><span class="c0">Evt_SetBassGain</span></p><p class="c22"><span class="c0">Evt_ChangePlaylist</span></p><p class="c22"><span class="c0">Evt_RequestPlaylist</span></p><p class="c22"><span class="c0">Evt_RemovePlaylistRequests</span></p><p class="c22"><span class="c0">// Evt_PlaySound</span></p><p class="c22"><span class="c0">Evt_AbortSound</span></p><p class="c22"><span class="c0">Evt_AbortSoundsOnMixerGroup</span></p><p class="c22"><span class="c0">Evt_InterruptiveAbortSoundsOnMixerGroup</span></p><p class="c5"><span class="c2"></span></p><p class="c16"><span class="c2">Evt_SetSoundtrackVolume and Evt_SetBassGain are sent by P3SASettingsMode</span></p><p class="c16"><span class="c2">Evt_ChangePlaylist is never sent in P3SampleApp.</span></p><p class="c16"><span class="c2">Evt_RequestPlaylist, Evt_RemovePlaylistRequests, Evt_PlaySound, Evt_AbortSound, Evt_AbortSoundsOnMixerGroup, Evt_InterruptiveAbortSoundsOnMixerGroup are sent by P3SAGameMode audio methods:</span></p><a id="t.3f2ae15690de4a0067e4a6a8e3a8ec48d7a7f9fa"></a><a id="t.0"></a><table class="c18"><tr class="c8"><td class="c24" colspan="1" rowspan="1"><p class="c37"><span class="c7">protected</span><span class="c1">&nbsp;</span><span class="c7">void</span><span class="c1">&nbsp;RequestPlaylist(</span><span class="c7">string</span><span class="c1">&nbsp;playlistName, </span><span class="c7">bool</span><span class="c1">&nbsp;allowCurrentClipToEndBeforeChange=</span><span class="c7">false</span><span class="c0">)</span></p><p class="c35"><span class="c7">protected</span><span class="c1">&nbsp;</span><span class="c7">void</span><span class="c0">&nbsp;RemovePlaylistRequests()</span></p><p class="c35"><span class="c7">protected</span><span class="c1">&nbsp;</span><span class="c7">void</span><span class="c1">&nbsp;RemovePlaylistRequests(</span><span class="c7">string</span><span class="c0">&nbsp;playlistName)</span></p><p class="c35"><span class="c7">protected</span><span class="c1">&nbsp;</span><span class="c7">void</span><span class="c1">&nbsp;PlaySound(</span><span class="c7">string</span><span class="c0">&nbsp;soundName) &nbsp;// this one is broken</span></p><p class="c35"><span class="c7">protected</span><span class="c1">&nbsp;</span><span class="c7">void</span><span class="c1">&nbsp;AbortSound(</span><span class="c7">string</span><span class="c0">&nbsp;soundName)</span></p><p class="c25"><span class="c7">protected</span><span class="c1">&nbsp;</span><span class="c7">void</span><span class="c1">&nbsp;AbortSoundsOnMixerGroup(</span><span class="c7">string</span><span class="c1">&nbsp;mixerGroupName, </span><span class="c7">bool</span><span class="c1">&nbsp;interruptiveAbort=</span><span class="c7">false</span><span class="c0">)</span></p></td></tr></table><p class="c10"><span class="c2">P3SAGameMode.PlaySound() is broken since the Evt_PlaySound event handler is commented out in P3SAAudio. That&rsquo;s ok since none of these P3SAGameMode methods are used in P3SampleApp. Instead the code prefers to make direct calls to P3SAAudio.Instance.&lt;methodName&gt;(&hellip;)</span></p><h2 class="c39"><span class="c38">Volume</span></h2><p class="c16"><span class="c2">P3SAAudio reacts to changes in the master volume by setting the volume on the Master AudioMixerGroup. The VolumeControl component in the SDK sets the master volume through the IAudio interface method SetMasterVolumeLevel().</span></p><p class="c16"><span class="c2">P3SAAudio reacts to changes in the soundtrack volume by setting the volume on the Playlist AudioMixerGroup. P3SASettingsMode sets the soundtrack volume by sending the Evt_SetSoundtrackVolume event.</span></p><p class="c16"><span class="c2">P3SAAudio reacts to changes in the bass gain by setting the MasterBassGain parameter on the Master AudioMixerGoup. P3SASettingsMode in P3SampleApp sets the bass gain by sending the Evt_SetBassGain event.</span></p><h2 class="c36"><span class="c38">Playlist</span></h2><p class="c10"><span class="c2">A playlist is used for background music for a scene or a mode. A Playlist is a component that defines a named list of AudioClips that will all play one after the other. You must define the Playlist as a component in the root of the P3SAAudio prefab. No other parent will work. </span></p><p class="c27"><span class="c2">You can show P3SAAudio in the Inspector by clicking on Assets/Resources/Prefabs in the Project window and then click on P3SAAudio in the Asset window.</span></p><p class="c10"><span class="c2">P3SAAudio comes with 3 empty playlists named Attract, Home and IntroVideo. A real game would have one or more AudioClips in each playlist.</span></p><p class="c27"><span class="c2">In the inspector, you specify the size of the playlist and that many Elements will appear. To assign an AudioClip to an Element: </span></p><ul class="c46 lst-kix_list_3-0 start"><li class="c23 c44 li-bullet-0"><span class="c2">drag a sound file from the Assets and drop it on the Element</span></li><li class="c6 li-bullet-0"><span class="c2">or click on the round icon to the right of the Element, that will open the Select AudioClip window.</span></li></ul><p class="c10"><span class="c2">When the P3SASceneController starts, it plays the playlist with the same name as the scene. </span></p><a id="t.a2476f49a297f412ef9c9f26ed85da197bc94033"></a><a id="t.1"></a><table class="c18"><tr class="c8"><td class="c24" colspan="1" rowspan="1"><p class="c20"><span class="c1">P3SAAudio.Instance.ChangePlaylistByName(sceneName);</span></p></td></tr></table><p class="c4"><span class="c2"></span></p><p class="c15"><span class="c2">That starts the scene playlist indeed, but the watchdog has a bug, when its 2.5 second interval expires, it tries to update the playlist, doesn&rsquo;t find anything applicable and it stops the scene playlist.</span></p><p class="c4"><span class="c2"></span></p><p class="c15"><span class="c2">The PlaylistRequest feature is not used in P3SampleApp, but this is how it would work to play a playlist in a Mode. The requesting mode sends the Evt_RequestPlaylist event with a PlaylistRequest event data to add a playlist request. The PlaylistRequests are sorted and the mode with the highest priority has its playlist played. Do not forget to send Evt_RemovePlaylistRequests when the mode stops: if the currently playing playlist request belongs to the requesting mode, it will stop the playlist and switch to the playlist from the remaining mode with the highest priority.</span></p><p class="c4"><span class="c2"></span></p><p class="c15"><span class="c2">The default playlist from the scene controller is changed by name, it is not a PlaylistRequest. Makes sense since there is no requesting mode. If the default playlist is overridden by a PlaylistRequest, the only way to go back to the scene playlist is to call ChangePlaylistByName(sceneName), make an explicit PlaylistRequest for it, or wait for the game to eventually reload the scene.</span></p><p class="c4"><span class="c2"></span></p><p class="c15"><span class="c2">When a Playlist is aborted by another Playlist, it remembers the current AudioClip and the time position within the clip. If the Playlist is resumed later, it will start where it left off.</span></p><p class="c4"><span class="c2"></span></p><p class="c15"><span class="c2">P3SAAudio plays the playlist on the MixerAudioGroup named Playlists. P3SAAudio creates two identical AudioSources and stores them in the playlistSources variable. Every time a new Playlist starts playing, P3SAAudio switches to the other AudioSource in playlistSources. Maybe this is to give time for the first AudioSource to fade out the signal when it was stopped.</span></p><p class="c4"><span class="c2"></span></p><p class="c15"><span class="c2">There is no coroutine to monitor the Playlist. P3SAAudio checks the progress of the currently playing playlist in the Update() method. If the AudioSource is not busy, it triggers the next clip in the playlist.</span></p><p class="c42"><span class="c2">Here is a list of GUI components that call P3SAAudio.Instance.ChangePlaylistByName(). This has no effect in P3SampleApp because those Playlists don&rsquo;t exist in P3SAAudio.</span></p><p class="c4"><span class="c2"></span></p><a id="t.ee5a8e570c814b19e4bb8e4d4f7753ecf0d2a7f7"></a><a id="t.2"></a><table class="c18"><tr class="c8"><td class="c29 c48" colspan="1" rowspan="1"><p class="c15"><span class="c2">Component</span></p></td><td class="c30 c48" colspan="1" rowspan="1"><p class="c15"><span class="c2">Playlist</span></p></td></tr><tr class="c8"><td class="c29" colspan="1" rowspan="1"><p class="c15"><span class="c2">Bonus</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c15"><span class="c2">Bonus_Total</span></p></td></tr><tr class="c8"><td class="c29" colspan="1" rowspan="1"><p class="c15"><span class="c2">Bonus</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c15"><span class="c2">Bonus_Start</span></p></td></tr><tr class="c8"><td class="c29" colspan="1" rowspan="1"><p class="c15"><span class="c2">IntroVideoSceneController</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c15"><span class="c2">IntroAnimAudio</span></p></td></tr><tr class="c8"><td class="c29" colspan="1" rowspan="1"><p class="c15"><span class="c2">P3SASceneController</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c15"><span class="c2">BG_Mode_Introduction</span></p></td></tr><tr class="c8"><td class="c29" colspan="1" rowspan="1"><p class="c15"><span class="c2">P3SASceneController</span></p></td><td class="c30" colspan="1" rowspan="1"><p class="c15"><span class="c2">HighScoreEntry</span></p></td></tr></table><p class="c4"><span class="c0"></span></p><h2 class="c36"><span class="c38">AudioClipGroup</span></h2><p class="c10"><span class="c2">VariableAudioClip is a component that specifies a clip name with an optional range of pitch and volume to give a little variance to the clip every time it is played.</span></p><p class="c10"><span class="c2">AudioClipGroup is a component that collects VariableAudioClip components from siblings and children to create an ordered list of clips. The weight of the VariableAudioClip is the number of times it appears in the list. The list can be kept sequential or shuffled in random order. An AudioClipGroup represents a set of alternative audio clips, only one clip will be played at a time. When the audio group is played, this plays the current VariableAudioClip and it moves the index to the next clip to prepare for the next time it is called. When the list is exhausted, the list is recreated and the index resets to the front of the list.</span></p><p class="c10"><span class="c2">For example, if you have 3 variants for a sound effect, you can create an AudioClipGroup anywhere in the scene hierarchy and give it 3 VariableAudioClip children. The app can play the audio group to play one of the clips. The next time the app plays the audio group, this can play the same clip or a different one. How frequently one clip will play depends on its weight compared to the other clips&rsquo; weight.</span></p><p class="c10"><span class="c2">AudioClipGroup takes as parameter which AudioMixerGroup to use to play the sound. This is what determines whether the clip is processed as a sound effect or a voice prompt.</span></p><p class="c10"><span class="c2">FollowUpAudioClipGroup is a component that can be added as a sibling of a VariableAudioClip to specify another AudioClipGroup that should be played after the first VariableAudioClip has finished playing (with a possible delay in between). If a FollowUpAudioClipGroup is a sibling of an AudioClipGroup, it becomes the default FollowUpAudioClipGroup for any VariableAudioClip children that don&rsquo;t have their own FollowUpAudioClipGroup.</span></p><p class="c10"><span class="c2">AudioClipLimiter is a component that can be added to a scene to limit how many clips can play simultaneously underneath it in the scene hierarchy. The feature is never used in P3SampleApp.</span></p><p class="c10"><span>In P3SampleApp, the Home scene has these AudioClipGroups under the path Audio:</span></p><p class="c15"><span class="c2">Audio</span></p><p class="c15 c17"><span class="c2">GroupTest (AudioClipGroup)</span></p><p class="c15 c26"><span class="c2">GameObject (VariableAudioClip) for clip FX_AA_Hits_sm01 with some pitch range and FollowUpAudioClipGroup FollowupTest</span></p><p class="c15 c28"><span class="c2">GameObject (1) (VariableAudioClip) for clip FX_AA_Hits_sm03 with some pitch range</span></p><p class="c15 c28"><span class="c2">GameObject (2) (VariableAudioClip) for clip SoftMalletCymbalRoll</span></p><p class="c13"><span class="c2">FollowupTest (AudioClipGroup) with sibling VariableAudioClip for clip FX_BallEjectToPlayer_</span></p><p class="c4"><span class="c2"></span></p><p class="c15"><span class="c2">There are also multiple AudioClipGroups under TwitchEasterEggs in the Home scene.</span></p><p class="c4"><span class="c2"></span></p><p class="c45"><span class="c2">MovingTarget is the mode that implements the rotating cube target in P3SampleApp. When the mode detects a collision with the ball, it bumps the cube, changes its color and plays the GroupTest audio group.</span></p><a id="t.bd01d7436f77d8c08f10a157cd8195fa5558fc61"></a><a id="t.3"></a><table class="c18"><tr class="c8"><td class="c41" colspan="1" rowspan="1"><p class="c20"><span class="c0">P3SAAudio.Instance.PlaySound(&quot;GroupTest&quot;);</span></p></td></tr></table><p class="c19"><span class="c2">You will hear SoftMalletCymbalRoll more frequently because it has a weight of 5 compared to 1 for the other two clips. When FX_AA_Hits_sm01 plays, it is followed by FX_BallEjectToPlayer_ three seconds later.</span></p><p class="c4"><span class="c2"></span></p><p class="c21"><span class="c2">It is also possible to play an AudioClip by name without creating an AudioClipGroup. In this case, the sound will have no pitch or volume variations. For example, this loads and caches the sound resource StartGame_PlayerOne.wav</span></p><a id="t.f1c56f193946c220c90a362f13e6a098d147b4a8"></a><a id="t.4"></a><table class="c18"><tr class="c8"><td class="c41" colspan="1" rowspan="1"><p class="c20"><span class="c1">P3SAAudio.Instance.PlaySound3D(&quot;StartGame_PlayerOne&quot;, gameObject.transform);</span></p></td></tr></table><p class="c4"><span class="c2"></span></p><p class="c15"><span class="c2">To play a sound, P3SAAudio creates a SoundChain. This class is an implementation detail that is not exposed by the API. The chain holds the initial AudioClip or AudioSoundGroup and all the transitive FollowUps, plus a dedicated AudioSource to emit the sound. A new coroutine is started to play the chain, yielding for the duration of each clip. Before moving on to the next clip, the coroutine checks whether it was aborted and needs to stop, if not, it plays the next clip. If the chain&rsquo;s mixer group overrides other mixer groups, those mixer groups are stopped before playing the next clip.</span></p></body></html>
