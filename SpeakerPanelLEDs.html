<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=fpjTOVmNbO4Lz34iLyptLROjXfSpIU_1TsQlCJ7q4WkfnUSgpG7o6Yx3LgtCQhIzcgkv6_KOpC-vO9QMy-VQCA);ol{margin:0;padding:0}table td,table th{padding:0}.c31{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:467.5pt;border-top-color:#000000;border-bottom-style:solid}.c42{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:467.6pt;border-top-color:#000000;border-bottom-style:solid}.c15{padding-top:2pt;padding-bottom:0pt;line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c9{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Calibri";font-style:normal}.c18{color:#2f5496;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:13pt;font-family:"Calibri";font-style:normal}.c3{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:8pt;font-family:"Consolas";font-style:normal}.c36{padding-top:12pt;padding-bottom:0pt;line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c1{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:7pt;font-family:"Consolas";font-style:normal}.c6{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:8pt;font-family:"Consolas";font-style:normal}.c49{padding-top:6pt;padding-bottom:6pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c17{padding-top:0pt;padding-bottom:0pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c4{padding-top:0pt;padding-bottom:8pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c47{padding-top:12pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c29{padding-top:6pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c19{padding-top:12pt;padding-bottom:8pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c22{padding-top:0pt;padding-bottom:6pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c0{padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c43{padding-top:6pt;padding-bottom:8pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c53{color:#000000;font-weight:700;font-size:11pt;font-family:"Calibri"}.c21{font-size:7pt;font-family:"Consolas";color:#a31515;font-weight:400}.c34{font-size:8pt;font-family:"Consolas";color:#a31515;font-weight:400}.c14{font-size:8pt;font-family:"Consolas";color:#0000ff;font-weight:700}.c12{font-size:8pt;font-family:"Consolas";color:#000000;font-weight:400}.c26{font-size:8pt;font-family:"Consolas";color:#2b91af;font-weight:400}.c40{font-size:7pt;font-family:"Consolas";color:#2b91af;font-weight:400}.c52{font-size:7pt;font-family:"Consolas";color:#800000;font-weight:700}.c39{font-size:8pt;font-family:"Consolas";color:#2b91af;font-weight:700}.c7{font-size:8pt;font-family:"Consolas";color:#a31515;font-weight:700}.c48{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#0563c1;text-decoration:underline}.c8{font-size:7pt;font-family:"Consolas";color:#0000ff;font-weight:400}.c27{font-size:7pt;font-family:"Consolas";color:#008000;font-weight:700}.c46{color:#2f5496;font-weight:400;font-size:16pt;font-family:"Calibri"}.c33{font-size:7pt;font-family:"Consolas";color:#800000;font-weight:400}.c23{font-size:7pt;font-family:"Consolas";color:#0000ff;font-weight:700}.c10{font-size:8pt;font-family:"Consolas";color:#000000;font-weight:700}.c13{font-size:7pt;font-family:"Consolas";color:#000000;font-weight:700}.c32{font-size:8pt;font-family:"Consolas";color:#008000;font-weight:700}.c51{font-size:7pt;font-family:"Consolas";color:#a31515;font-weight:700}.c44{color:#000000;font-weight:400;font-size:8pt;font-family:"Calibri"}.c20{font-size:7pt;font-family:"Consolas";color:#008000;font-weight:400}.c45{color:#000000;font-weight:400;font-size:9.5pt;font-family:"Consolas"}.c16{border-spacing:0;border-collapse:collapse;margin-right:auto}.c2{font-size:7pt;font-family:"Consolas";color:#000000;font-weight:400}.c37{color:#000000;font-weight:700;font-size:8pt;font-family:"Calibri"}.c11{font-size:8pt;font-family:"Consolas";color:#0000ff;font-weight:400}.c50{font-size:8pt;font-family:"Consolas";color:#800000;font-weight:700}.c30{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c38{font-size:8pt;font-family:"Consolas";font-weight:400}.c25{text-decoration:none;vertical-align:baseline;font-style:normal}.c41{margin-left:72pt}.c5{height:11pt}.c35{margin-left:36pt}.c24{height:0pt}.c28{margin-right:-13.9pt}.c54{height:13pt}.title{padding-top:24pt;color:#000000;font-weight:700;font-size:36pt;padding-bottom:6pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:18pt;color:#666666;font-size:24pt;padding-bottom:4pt;font-family:"Georgia";line-height:1.0791666666666666;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Calibri"}p{margin:0;color:#000000;font-size:11pt;font-family:"Calibri"}h1{padding-top:12pt;color:#2f5496;font-size:16pt;padding-bottom:0pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:2pt;color:#2f5496;font-size:13pt;padding-bottom:0pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:14pt;color:#000000;font-weight:700;font-size:14pt;padding-bottom:4pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:12pt;color:#000000;font-weight:700;font-size:12pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:11pt;color:#000000;font-weight:700;font-size:11pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:10pt;color:#000000;font-weight:700;font-size:10pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}</style></head><body class="c30 doc-content"><h1 class="c36"><span class="c25 c46">Speaker Panel LEDs</span></h1><p class="c4"><span class="c9">This tech tip presents a collection of light shows designed for the speaker panel LEDs.</span></p><p class="c4"><span>Programming LEDs is well documented in the SDK guide here </span><span class="c48">file:///C:/P3/P3_SDK_V0.8/P3SampleApp/Documentation/html/_physical_features.html#LEDs</span></p><p class="c4"><span class="c9">The RGB speaker kit is an option when you buy the base machine. It includes an LED strip around both speakers. Each strip is composed of 61 LEDs slightly recessed in a larger circle than the speaker grill. The light reflects on the speaker cone. To see the actual LEDs, you have to lean to the side. This arrangement is great for ambient light shows without obnoxious in-your-face lights. </span></p><p class="c4"><span class="c9">See the Appendix below for the collected source code.</span></p><h2 class="c15"><span class="c18">LED Simulator</span></h2><p class="c4"><span>The LED simulator is documented in the SDK Guide here: </span><span class="c48">file:///C:/P3/P3_SDK_V0.8/P3SampleApp/Documentation/html/_physical_features.html#LEDSimulations</span></p><p class="c4"><span class="c9">The SDK Guide describes how to add the LED simulator to your application. Luckily, the LED Simulator is already included in P3SampleApp.</span></p><p class="c4"><span class="c9">By default, the LED simulator only displays the playfield LEDs. To show the speaker panel LEDs, you need to configure an option in the LED Simulator Manager script. You must do this in all scenes. For P3SampleApp, that means both the Attract and Home scenes.</span></p><p class="c4"><span class="c9">In the Project window of Unity, expand Assets and select Scenes. Double-click on the Attract scene to load it in the Hierarchy window. Select LEDSimulator in the Hierarchy window. In the Inspector window, scroll to the LED Simulator Manager script and enable &quot;Simulate Speaker LEDs&quot;:</span></p><p class="c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 505.00px; height: 134.00px;"><img alt="" src="images/LEDSimulationManagerScript.jpg" style="width: 505.00px; height: 134.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c4"><span class="c9">The Cabinet and Backbox LEDs were an experimental feature on a prototype machine. They are not available on production machines. You can enable the toggles if you are curious, but there is no point in programming those LEDs in your application.</span></p><p class="c4"><span class="c9">Save the Attract scene. Repeat the operation for the Home scene.</span></p><p class="c4"><span class="c9">Select the Bootstrap scene and start the application. Select Display #8 in the Game window to see a simulated view of the LEDs.</span></p><p class="c4"><span class="c9">For example, this is the view when the CCR module is selected in .\Configuration\AppConfig.json</span></p><p class="c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 440.00px; height: 664.00px;"><img alt="" src="images/LEDSimulator.jpg" style="width: 440.00px; height: 664.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c4"><span class="c9">Unity 5.6.7 has an annoying feature that sometimes makes the cursor disappear over the Game window. Without a cursor, it is difficult to hit the play button to stop the application. My solution is to move the cursor to the left of the Game window. That makes the cursor reappear. Don&rsquo;t go directly to the Play button now, because the cursor will disappear again. Instead, move straight up to the Unity ribbon and click the ribbon background (for example, just to the left of the Pivot button). The problem is now repaired and you can easily move to the Play button with the cursor visible.</span></p><h2 class="c15"><span class="c18">Speaker Panel LED Names</span></h2><p class="c4"><span class="c9">The speaker LEDs are part of the base machine definition. They do not appear in the module definition file. The LED names are:</span></p><p class="c17 c35"><span class="c9">speakerLeft0 .. speakerLeft60</span></p><p class="c4 c35"><span class="c9">speakerRight0 .. speakerRight60</span></p><p class="c4"><span class="c9">You can access an individual LED definition like this p3.LEDs[&quot;speakerLeft0&quot;]</span></p><h2 class="c15"><span class="c18">Solid Light Show</span></h2><p class="c4"><span class="c9">The simplest light show is a permanent solid color. On the physical machine, this looks surprisingly good.</span></p><a id="t.6713e1acf1c3411783341f3dd0ba1c31be2df212"></a><a id="t.0"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c6">for (int i = 0; i &lt; 61; i++)</span></p><p class="c0"><span class="c6">{</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; string ledName = &quot;speakerLeft&quot; + i;</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; LEDScript script = new LEDScript(p3.LEDs[ledName], this.Priority);</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; script.AddCommand(Multimorphic.P3.Colors.Color.red, 0, 10);</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; p3.LEDController.AddScript(script, 0);</span></p><p class="c22"><span class="c6">}</span></p></td></tr></table><p class="c17 c5"><span class="c6"></span></p><p class="c4"><span class="c9">This light show sets the color red with zero fade time and 10 second duration. In the call to AddScript(), the runtime is 0 which means the script ends when all commands have executed.</span></p><p class="c4"><span class="c9">When the runtime is -1, the script is run repeatedly until the script is removed.</span></p><p class="c4"><span class="c9">AddScript() can take a third optional argument for the delay before the script becomes active. During the delay, the LED color is controlled by the lower priority scripts.</span></p><p class="c4"><span class="c9">The loop above works, but there is no way to remove the scripts. It is better to collect all the scripts in a List and treat the list as the light show.</span></p><a id="t.14d38965eb74dde79cc56996e1ba85b13c9e87cc"></a><a id="t.1"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c6">List&lt;LEDScript&gt; ledScripts = new List&lt;LEDScript&gt;();</span></p><p class="c0"><span class="c6">for (int i = 0; i &lt; 61; i++)</span></p><p class="c0"><span class="c6">{</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; string ledName = &quot;speakerLeft&quot; + i;</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; LEDScript script = new LEDScript(p3.LEDs[ledName], this.Priority);</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; script.AddCommand(Multimorphic.P3.Colors.Color.red, 0, 10);</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; ledScripts.Add(script);</span></p><p class="c0"><span class="c6">}</span></p><p class="c0 c5"><span class="c6"></span></p><p class="c0"><span class="c11">foreach</span><span class="c12">&nbsp;(LEDScript ledScript </span><span class="c11">in</span><span class="c12">&nbsp;</span><span class="c38">ledScripts</span><span class="c6">)</span></p><p class="c0"><span class="c6">{</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; P3.LEDController.AddScript(ledScript, -1);</span></p><p class="c0"><span class="c6">}</span></p><p class="c0 c5"><span class="c6"></span></p><p class="c0"><span class="c6">// later</span></p><p class="c0"><span class="c11">foreach</span><span class="c12">&nbsp;(LEDScript ledScript </span><span class="c11">in</span><span class="c12">&nbsp;</span><span class="c38">ledScripts</span><span class="c6">)</span></p><p class="c0"><span class="c6">{</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; p3.LEDController.RemoveScript(ledScript);</span></p><p class="c22"><span class="c12">}</span></p></td></tr></table><p class="c17 c5"><span class="c6"></span></p><h2 class="c15"><span class="c18">LEDShowControllerMode</span></h2><p class="c4"><span class="c9">Let&rsquo;s play this simple light show in Attract mode of P3SampleApp.</span></p><p class="c4"><span class="c9">P3SAAttractMode displays light shows with the help of the LEDShowControllerMode. This class is in the file Assets\Scripts\Modes\Mechs\LightShows.cs</span></p><p class="c4"><span class="c9">The purpose of LEDShowControllerMode is to maintain a static list of light shows. When the mode starts, it picks one light show to run at random. When the allocated time is over, another light show is picked at random and played. This continues until the mode is stopped. In our case, that would be when Attract mode is stopped.</span></p><p class="c4"><span class="c9">In P3SampleApp, there is only one light show in the list, so Attract mode plays the RGBFadeMode light show forever.</span></p><p class="c4"><span class="c9">We will remove RGBFadeMode from the list and add our light show instead. Before we can do that, we need to convert the solid light show to a Mode.</span></p><p class="c4"><span class="c9">We might as well subclass the LEDShow class found at the top of LightShows.cs. This will give us the code to add the LEDScripts when the mode starts and remove the LEDScripts when the mode stops.</span></p><p class="c4"><span class="c9">Add this class after LEDShowControllerMode. Lines in bold are lines that changed.</span></p><a id="t.382650db1964b2e28521ef5245f1a4ae160b9c6b"></a><a id="t.2"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c10">&nbsp; &nbsp; </span><span class="c14">public</span><span class="c10">&nbsp;</span><span class="c14">class</span><span class="c10">&nbsp;</span><span class="c39">SolidLightShowMode</span><span class="c3">&nbsp;: LEDShow</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">public</span><span class="c10">&nbsp;SolidLightShowMode(P3Controller controller, </span><span class="c14">int</span><span class="c3">&nbsp;priority)</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c14">base</span><span class="c3">(controller, priority)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">for</span><span class="c10">&nbsp;(</span><span class="c14">int</span><span class="c3">&nbsp;i = 0; i &lt; 61; i++)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">string</span><span class="c10">&nbsp;ledName = </span><span class="c7">&quot;speakerLeft&quot;</span><span class="c3">&nbsp;+ i;</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript script = </span><span class="c14">new</span><span class="c10">&nbsp;LEDScript(p3.LEDs[ledName], </span><span class="c14">this</span><span class="c3">.Priority);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; script.AddCommand(Multimorphic.P3.Colors.Color.red, 0, 10);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.Add(script);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c22"><span class="c10">&nbsp; &nbsp; }</span></p></td></tr></table><p class="c0 c5"><span class="c3"></span></p><p class="c4"><span class="c9">Change the member variables and the constructor of LEDShowControllerMode like this:</span></p><a id="t.7f82d8c6fe28c86d9a31f40e1ef766c805700e62"></a><a id="t.3"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c12">&nbsp; &nbsp; </span><span class="c11">public</span><span class="c12">&nbsp;</span><span class="c11">class</span><span class="c12">&nbsp;</span><span class="c26">LEDShowControllerMode</span><span class="c6">&nbsp;: P3Mode</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; List&lt;ShowData&gt; shows;</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">int</span><span class="c6">&nbsp;showIndex;</span></p><p class="c0 c5"><span class="c6"></span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">public</span><span class="c12">&nbsp;LEDShowControllerMode (P3Controller controller, </span><span class="c11">int</span><span class="c6">&nbsp;priority)</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c11">base</span><span class="c6">(controller, priority)</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow solidLightShowMode = </span><span class="c14">new</span><span class="c3">&nbsp;SolidLightShowMode(controller, priority);</span></p><p class="c0 c5"><span class="c6"></span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows = </span><span class="c11">new</span><span class="c6">&nbsp;List&lt;ShowData&gt;();</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c14">new</span><span class="c3">&nbsp;ShowData(solidLightShowMode, 5));</span></p><p class="c22"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Play the application in Unity and select Display #8 in the Game window. When the Attract scene is fully loaded (this takes a while), the left speaker LEDs are red.</span></p><p class="c4"><span class="c9">In a real application, the light show would take advantage of all the available LEDs. In this TechTip, we are more interested in experimenting with the speaker panel only.</span></p><h2 class="c15"><span class="c18">Copy LEDScript</span></h2><p class="c4"><span class="c9">All the LEDscripts are identical in SolidLightShowMode. We can replace the loop with an operator to copy the LEDScript as many times as necessary. </span></p><p class="c4"><span class="c9">We can now create the left speaker light show in 3 lines and the right speaker light show in only 1 line. Notice the LED name used in the source LEDScript is irrelevant, but the LED must exist.</span></p><p class="c4"><span class="c9">Edit LightShows.cs, add these two methods to the LEDShow class:</span></p><a id="t.fb112f68c827021e932ba9e78834597fc4b3e78b"></a><a id="t.4"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c32">// Copy a LEDScript, i.e. create a new LEDScript with the same LEDCommands but for another LED</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c32">// The LEDCommands can be shared because they are immutable data objects.</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; p</span><span class="c14">rotected </span><span class="c10">LEDScript Clone(LEDScript ledScript, </span><span class="c14">string</span><span class="c3">&nbsp;newLedName)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript newScript = </span><span class="c14">new</span><span class="c3">&nbsp;LEDScript(p3.LEDs[newLedName], ledScript.priority);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScript.script.AddRange(ledScript.script);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScript.autoRemove = ledScript.autoRemove;</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScript.scriptName = ledScript.scriptName;</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScript.synchronizerIndex = ledScript.synchronizerIndex;</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">return</span><span class="c3">&nbsp;newScript;</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c32">// Copy the same LEDScript to a range of LEDs</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; p</span><span class="c14">rotected </span><span class="c10">List&lt;LEDScript&gt; Copy(LEDScript script, </span><span class="c14">int</span><span class="c10">&nbsp;start, </span><span class="c14">int</span><span class="c10">&nbsp;count, </span><span class="c14">string</span><span class="c3">&nbsp;ledPrefix)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; lightShow = </span><span class="c14">new</span><span class="c3">&nbsp;List&lt;LEDScript&gt;();</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">int</span><span class="c3">&nbsp;end = start + count;</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">for</span><span class="c10">&nbsp;(</span><span class="c14">int</span><span class="c3">&nbsp;i = start; i &lt; end; i++)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">string</span><span class="c3">&nbsp;ledName = ledPrefix + i;</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lightShow.Add(Clone(script, ledName));</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">return</span><span class="c3">&nbsp;lightShow;</span></p><p class="c22"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p></td></tr></table><p class="c0 c5"><span class="c45 c25"></span></p><p class="c4"><span class="c9">Edit the SolidLightShowMode class like this:</span></p><a id="t.dd803f1d3188bd45ff59e6560989e70fadc388ce"></a><a id="t.5"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c12">&nbsp; &nbsp; </span><span class="c11">public</span><span class="c12">&nbsp;</span><span class="c11">class</span><span class="c12">&nbsp;</span><span class="c26">SolidLightShowMode</span><span class="c6">&nbsp;: LEDShow</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">public</span><span class="c12">&nbsp;SolidLightShowMode(P3Controller controller, </span><span class="c11">int</span><span class="c6">&nbsp;priority)</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c11">base</span><span class="c6">(controller, priority)</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript ledScript = </span><span class="c14">new</span><span class="c10">&nbsp;LEDScript(p3.LEDs[</span><span class="c7">&quot;speakerLeft0&quot;</span><span class="c10">], </span><span class="c14">this</span><span class="c3">.Priority);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.red, 0, 10);</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(Copy(ledScript, 0, 61, </span><span class="c7">&quot;speakerLeft&quot;</span><span class="c3">));</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(Copy(ledScript, 0, 61, </span><span class="c7">&quot;speakerRight&quot;</span><span class="c3">));</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c22"><span class="c6">&nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Play the application in Unity and select Display #8 in the Game window. When the Attract scene is fully loaded, all speaker LEDs are red.</span></p><h2 class="c15"><span class="c18">Copy Light Show</span></h2><p class="c4"><span class="c9">The light shows for the left and right speakers are identical. It would be better if we copied the whole left light show to create the right light show.</span></p><p class="c4"><span class="c9">Edit LightShows.cs, add this line at the top of the file:</span></p><a id="t.5d75cf3b41d08e8068526f072c1251ec513ecd79"></a><a id="t.6"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c49"><span class="c14">using</span><span class="c10">&nbsp;System.Text.RegularExpressions;</span></p></td></tr></table><p class="c19"><span class="c9">Add this method to the LEDShow class:</span></p><a id="t.24e1fa266136f2b98d157e1a0dbbaa433a57c80e"></a><a id="t.7"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c32 c25">// Copy the LEDScripts in the lightShow renaming the LEDs with the new prefix.</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c32">// newPrefix is the prefix of the LED names in the new light show.</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">protected</span><span class="c10">&nbsp;List&lt;LEDScript&gt; Copy(List&lt;LEDScript&gt; lightShow, </span><span class="c14">string</span><span class="c3">&nbsp;newPrefix)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; newScripts = </span><span class="c14">new</span><span class="c3">&nbsp;List&lt;LEDScript&gt;();</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">foreach</span><span class="c10">&nbsp;(LEDScript ledScript </span><span class="c14">in</span><span class="c3">&nbsp;lightShow)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Match match = Regex.Match(ledScript.led.Name, </span><span class="c50">@&quot;(\d+)$&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">if</span><span class="c3">&nbsp;(match.Success)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">string</span><span class="c3">&nbsp;newLedName = newPrefix + match.Value;</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript newScript = Clone(ledScript, newLedName);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScripts.Add(newScript);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">return</span><span class="c3">&nbsp;newScripts;</span></p><p class="c22"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Edit the SolidLightShowMode class like this:</span></p><a id="t.1129ceaabae2fca5ef74294559c86a1284487963"></a><a id="t.8"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c12">&nbsp; &nbsp; </span><span class="c11">public</span><span class="c12">&nbsp;</span><span class="c11">class</span><span class="c12">&nbsp;</span><span class="c26">SolidLightShowMode</span><span class="c6">&nbsp;: LEDShow</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">public</span><span class="c12">&nbsp;SolidLightShowMode(P3Controller controller, </span><span class="c11">int</span><span class="c6">&nbsp;priority)</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c11">base</span><span class="c6">(controller, priority)</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript ledScript = </span><span class="c11">new</span><span class="c12">&nbsp;LEDScript(p3.LEDs[</span><span class="c34">&quot;speakerLeft0&quot;</span><span class="c12">], </span><span class="c11">this</span><span class="c6">.Priority);</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.red, 0, 10);</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; leftShow = Copy(ledScript, 0, 61, </span><span class="c7">&quot;speakerLeft&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; rightShow = Copy(leftShow, </span><span class="c7">&quot;speakerRight&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(leftShow);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(rightShow); </span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c22"><span class="c6">&nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Play the application in Unity and we get the same result: all speaker LEDs are red. </span></p><h2 class="c15"><span class="c18">Fade Light Show</span></h2><p class="c4"><span class="c9">We can make the light show more dynamic by fading gradually from one color to the next. This is the same concept as RGBFadeMode in LightShows.cs</span></p><p class="c4"><span class="c9">Let&rsquo;s reimplement RGBFadeMode just for the speaker panel.</span></p><p class="c4"><span class="c9">Edit LightShows.cs and change the LEDShowControllerMode constructor like this:</span></p><a id="t.a584b51d71d8c242803555c71d59cc824e8e762a"></a><a id="t.9"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">public</span><span class="c12">&nbsp;LEDShowControllerMode (P3Controller controller, </span><span class="c11">int</span><span class="c6">&nbsp;priority)</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c11">base</span><span class="c6">(controller, priority)</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow fadeLightShowMode = </span><span class="c14">new</span><span class="c3">&nbsp;FadeLightShowMode(controller, priority);</span></p><p class="c0 c5"><span class="c6"></span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows = </span><span class="c11">new</span><span class="c6">&nbsp;List&lt;ShowData&gt;();</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c14">new</span><span class="c3">&nbsp;ShowData(fadeLightShowMode, 20));</span></p><p class="c22"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Add this class below SolidLightShowMode:</span></p><a id="t.1eedf93b797f01b5dd04b1d5b0104947ae57d350"></a><a id="t.10"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c10">&nbsp; &nbsp; </span><span class="c14">public</span><span class="c10">&nbsp;</span><span class="c14">class</span><span class="c10">&nbsp;</span><span class="c39">FadeLightShowMode</span><span class="c3">&nbsp;: LEDShow</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">public</span><span class="c10">&nbsp;FadeLightShowMode(P3Controller controller, </span><span class="c14">int</span><span class="c3">&nbsp;priority)</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c14">base</span><span class="c3">(controller, priority)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript ledScript = </span><span class="c14">new</span><span class="c10">&nbsp;LEDScript(p3.LEDs[</span><span class="c7">&quot;speakerLeft0&quot;</span><span class="c10">], </span><span class="c14">this</span><span class="c3">.Priority);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.red, 1, 1.25);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.green, 1, 1.25);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.blue, 1, 1.25);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.yellow, 1, 1.25);</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; leftShow = Copy(ledScript, 0, 61, </span><span class="c7">&quot;speakerLeft&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; rightShow = Copy(leftShow, </span><span class="c7">&quot;speakerRight&quot;</span><span class="c3">);</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(leftShow);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(rightShow);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c22"><span class="c10">&nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Play the application in Unity and select Display #8 in the Game window. The speaker panel LEDs change color gradually.</span></p><h2 class="c15"><span class="c18">Flash</span></h2><p class="c19"><span class="c9">A flashing pattern is just a variant of FadeLightShowMode with short fading time and bright colors. With the LEDs hidden behind the speaker grill, this is not as impressive as regular flasher lights. It gives more of a blinking effect.</span></p><p class="c4"><span class="c9">Edit LightShows.cs and change the LEDShowControllerMode constructor like this:</span></p><a id="t.6d44ec241a7f582836e90006e12c5317aae12f9c"></a><a id="t.11"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">public</span><span class="c12">&nbsp;LEDShowControllerMode (P3Controller controller, </span><span class="c11">int</span><span class="c6">&nbsp;priority)</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c11">base</span><span class="c6">(controller, priority)</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow flashLightShowMode = </span><span class="c14">new</span><span class="c3">&nbsp;FlashLightShowMode(controller, priority);</span></p><p class="c0 c5"><span class="c6"></span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows = </span><span class="c11">new</span><span class="c6">&nbsp;List&lt;ShowData&gt;();</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c14">new</span><span class="c3">&nbsp;ShowData(flashLightShowMode, 6));</span></p><p class="c22"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Add this class below FadeLightShowMode:</span></p><a id="t.752094d1c2a586b78c10961fabd603e39c242522"></a><a id="t.12"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c10">&nbsp; &nbsp; </span><span class="c14">public</span><span class="c10">&nbsp;</span><span class="c14">class</span><span class="c10">&nbsp;</span><span class="c39">FlashLightShowMode</span><span class="c3">&nbsp;: LEDShow</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">public</span><span class="c10">&nbsp;FlashLightShowMode(P3Controller controller, </span><span class="c14">int</span><span class="c3">&nbsp;priority)</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c14">base</span><span class="c3">(controller, priority)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript ledScript = </span><span class="c14">new</span><span class="c10">&nbsp;LEDScript(p3.LEDs[</span><span class="c7">&quot;speakerLeft0&quot;</span><span class="c10">], </span><span class="c14">this</span><span class="c3">.Priority);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.white, 0, 0.2);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.barelywhite, 0.05, 0.2);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.white, 0, 0.2);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.barelywhite, 0.05, 0.2);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.white, 0, 0.2);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.barelywhite, 0.05, 2);</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; leftShow = Copy(ledScript, 0, 61, </span><span class="c7">&quot;speakerLeft&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; rightShow = Copy(leftShow, </span><span class="c7">&quot;speakerRight&quot;</span><span class="c3">);</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(leftShow);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(rightShow);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c22"><span class="c10">&nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Play the application in Unity and select Display #8 in the Game window. The speaker panel LEDs flash white 3 times, pause for short period and the cycle repeats.</span></p><h2 class="c15"><span class="c18">Origin</span></h2><p class="c19"><span class="c9">Let&rsquo;s create a light show using 4 solid colors like the Simon toy. On the physical machine, this looks surprisingly bad! Bear with me because it exposes a very important issue.</span></p><p class="c4"><span class="c9">Edit LightShows.cs and change the LEDShowControllerMode constructor like this:</span></p><a id="t.d6b6e96da4358552c17564d63c1dea3b809791e5"></a><a id="t.13"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">public</span><span class="c12">&nbsp;LEDShowControllerMode (P3Controller controller, </span><span class="c11">int</span><span class="c6">&nbsp;priority)</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c11">base</span><span class="c6">(controller, priority)</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow quadrantsLightShowMode = </span><span class="c14">new</span><span class="c3">&nbsp;QuadrantsLightShowMode(controller, priority);</span></p><p class="c0 c5"><span class="c6"></span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows = </span><span class="c11">new</span><span class="c6">&nbsp;List&lt;ShowData&gt;();</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c14">new</span><span class="c3">&nbsp;ShowData(quadrantsLightShowMode, 5));</span></p><p class="c22"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Add this class below FlashLightShowMode:</span></p><a id="t.00aff8fd2c536c4667d2579b46d47106d3ba2e5f"></a><a id="t.14"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c10">&nbsp; &nbsp; </span><span class="c14">public</span><span class="c10">&nbsp;</span><span class="c14">class</span><span class="c10">&nbsp;</span><span class="c39">QuadrantsLightShowMode</span><span class="c3">&nbsp;: LEDShow</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">public</span><span class="c10">&nbsp;QuadrantsLightShowMode(P3Controller controller, </span><span class="c14">int</span><span class="c3">&nbsp;priority)</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c14">base</span><span class="c3">(controller, priority)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript redScript = </span><span class="c14">new</span><span class="c10">&nbsp;LEDScript(p3.LEDs[</span><span class="c7">&quot;speakerLeft0&quot;</span><span class="c10">], </span><span class="c14">this</span><span class="c3">.Priority);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; redScript.AddCommand(Multimorphic.P3.Colors.Color.red, 0, 10);</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript greenScript = </span><span class="c14">new</span><span class="c10">&nbsp;LEDScript(p3.LEDs[</span><span class="c7">&quot;speakerLeft0&quot;</span><span class="c10">], </span><span class="c14">this</span><span class="c3">.Priority);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; greenScript.AddCommand(Multimorphic.P3.Colors.Color.green, 0, 10);</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript blueScript = </span><span class="c14">new</span><span class="c10">&nbsp;LEDScript(p3.LEDs[</span><span class="c7">&quot;speakerLeft0&quot;</span><span class="c10">], </span><span class="c14">this</span><span class="c3">.Priority);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; blueScript.AddCommand(Multimorphic.P3.Colors.Color.blue, 0, 10);</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript yellowScript = </span><span class="c14">new</span><span class="c10">&nbsp;LEDScript(p3.LEDs[</span><span class="c7">&quot;speakerLeft0&quot;</span><span class="c10">], </span><span class="c14">this</span><span class="c3">.Priority);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yellowScript.AddCommand(Multimorphic.P3.Colors.Color.yellow, 0, 10);</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; leftShow = new List&lt;LEDScript&gt;();</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Copy(redScript, 0, 15, </span><span class="c7">&quot;speakerLeft&quot;</span><span class="c3">));</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Copy(greenScript, 15, 15, </span><span class="c7">&quot;speakerLeft&quot;</span><span class="c3">));</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Copy(blueScript, 30, 15, </span><span class="c7">&quot;speakerLeft&quot;</span><span class="c3">));</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Copy(yellowScript, 45, 16, </span><span class="c7">&quot;speakerLeft&quot;</span><span class="c3">));</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; rightShow = Copy(leftShow, </span><span class="c7">&quot;speakerRight&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(leftShow);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(rightShow); </span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c22"><span class="c10">&nbsp; &nbsp; }</span></p></td></tr></table><p class="c0 c5"><span class="c45 c25"></span></p><p class="c0"><span class="c9">Play the application in Unity and select Display #8 in the Game window. This is what you get:</span></p><p class="c0 c5"><span class="c25 c45"></span></p><p class="c4 c41"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 297.04px; height: 114.02px;"><img alt="" src="images/SpeakerLEDSimonBad.png" style="width: 297.04px; height: 114.02px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c4"><span class="c9">The strip origins are not aligned. This is not a bug in the LED simulator. The physical machine has the same layout. Here is a diagram of the LED numbers for the left and right speakers:</span></p><p class="c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 537.07px; height: 238.03px;"><img alt="" src="images/SpeakerLEDOrigin.png" style="width: 537.07px; height: 238.03px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c4"><span class="c9">Fun fact: There is a 1 LED gap at the origin for the electrical connection. Because of the recess, this is not apparent from the player&rsquo;s perspective. When programming, you can safely ignore that little gap. It makes no difference.</span></p><h2 class="c15"><span class="c18">Rotate</span></h2><p class="c4"><span class="c9">To align the left and right speaker light shows, we could update the indices when calling Copy. The two light shows would no longer be identical. </span></p><p class="c4"><span class="c9">We will try a more general approach and create a rotation operator for light shows.</span></p><p class="c4"><span class="c9">Edit LightShows.cs and add this method to the LEDShow class:</span></p><a id="t.0d183830090dfb765960236170226773f648818e"></a><a id="t.15"></a><table class="c16"><tr class="c24"><td class="c42" colspan="1" rowspan="1"><p class="c29 c28"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c27">// Rotate a light show by having each LEDScript be reassigned count LEDs further down the LED string.</span></p><p class="c0 c28"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c27">// This is particularly useful to align the left speaker movement against the right speaker movement.</span></p><p class="c0 c28"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c27">// count is the offset to add to the LED number, range is from -60 to + 60</span></p><p class="c0 c28"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; p</span><span class="c23">rotected void</span><span class="c13">&nbsp;Rotate(List&lt;LEDScript&gt; lightShow, </span><span class="c23">int</span><span class="c13 c25">&nbsp;count)</span></p><p class="c0 c28"><span class="c13 c25">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0 c28"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23">foreach</span><span class="c13">&nbsp;(LEDScript ledScript </span><span class="c23">in</span><span class="c13 c25">&nbsp;lightShow)</span></p><p class="c0 c28"><span class="c13 c25">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0 c28"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Match match = Regex.Match(ledScript.led.Name, </span><span class="c52">@&quot;^(.*?)(\d+)$&quot;</span><span class="c13 c25">);</span></p><p class="c0 c28"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23">if</span><span class="c13 c25">&nbsp;(match.Success)</span></p><p class="c0 c28"><span class="c13 c25">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0 c28"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23">string</span><span class="c13 c25">&nbsp;namePrefix = match.Groups[1].Value;</span></p><p class="c0 c28"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23">int</span><span class="c13">&nbsp;ledNumber = </span><span class="c23">int</span><span class="c13 c25">.Parse(match.Groups[2].Value);</span></p><p class="c0 c28"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23">string</span><span class="c13 c25">&nbsp;newLedName = namePrefix + ((ledNumber + count + 61) % 61);</span></p><p class="c0 c28"><span class="c13 c25">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.led = p3.LEDs[newLedName];</span></p><p class="c0 c28"><span class="c13 c25">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c28"><span class="c13 c25">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c22 c28"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Change QuadrantsLightShowMode like this:</span></p><a id="t.7e1357e975fa73835528e70cbc43413698866ddf"></a><a id="t.16"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c12">&nbsp; &nbsp; </span><span class="c11">public</span><span class="c12">&nbsp;</span><span class="c11">class</span><span class="c12">&nbsp;</span><span class="c26">QuadrantsLightShowMode</span><span class="c6">&nbsp;: LEDShow</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">public</span><span class="c12">&nbsp;QuadrantsLightShowMode(P3Controller controller, </span><span class="c11">int</span><span class="c6">&nbsp;priority)</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c11">base</span><span class="c6">(controller, priority)</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript redScript = </span><span class="c11">new</span><span class="c12">&nbsp;LEDScript(p3.LEDs[</span><span class="c34">&quot;speakerLeft0&quot;</span><span class="c12">], </span><span class="c11">this</span><span class="c6">.Priority);</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; redScript.AddCommand(Multimorphic.P3.Colors.Color.red, 0, 10);</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript greenScript = </span><span class="c11">new</span><span class="c12">&nbsp;LEDScript(p3.LEDs[</span><span class="c34">&quot;speakerLeft0&quot;</span><span class="c12">], </span><span class="c11">this</span><span class="c6">.Priority);</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; greenScript.AddCommand(Multimorphic.P3.Colors.Color.green, 0, 10);</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript blueScript = </span><span class="c11">new</span><span class="c12">&nbsp;LEDScript(p3.LEDs[</span><span class="c34">&quot;speakerLeft0&quot;</span><span class="c12">], </span><span class="c11">this</span><span class="c6">.Priority);</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; blueScript.AddCommand(Multimorphic.P3.Colors.Color.blue, 0, 10);</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript yellowScript = </span><span class="c11">new</span><span class="c12">&nbsp;LEDScript(p3.LEDs[</span><span class="c34">&quot;speakerLeft0&quot;</span><span class="c12">], </span><span class="c11">this</span><span class="c6">.Priority);</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yellowScript.AddCommand(Multimorphic.P3.Colors.Color.yellow, 0, 10);</span></p><p class="c0 c5"><span class="c6"></span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; leftShow = </span><span class="c11">new</span><span class="c6">&nbsp;List&lt;LEDScript&gt;();</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Copy(redScript, 0, 15, </span><span class="c34">&quot;speakerLeft&quot;</span><span class="c6">));</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Copy(greenScript, 15, 15, </span><span class="c34">&quot;speakerLeft&quot;</span><span class="c6">));</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Copy(blueScript, 30, 15, </span><span class="c34">&quot;speakerLeft&quot;</span><span class="c6">));</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Copy(yellowScript, 45, 16, </span><span class="c34">&quot;speakerLeft&quot;</span><span class="c6">));</span></p><p class="c0 c5"><span class="c6"></span></p><p class="c0 c5"><span class="c6"></span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; rightShow = Copy(leftShow, </span><span class="c34">&quot;speakerRight&quot;</span><span class="c6">);</span></p><p class="c0 c5"><span class="c6"></span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(leftShow, -10);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(rightShow, 10);</span></p><p class="c0 c5"><span class="c6"></span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(leftShow);</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(rightShow);</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c22"><span class="c12">&nbsp; &nbsp; }</span></p></td></tr></table><p class="c47"><span class="c9">Play the application in Unity and select Display #8 in the Game window. This is what you get:</span></p><h2 class="c15 c54"><span class="c18"></span></h2><p class="c4 c41"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 307.04px; height: 115.02px;"><img alt="" src="images/SpeakerLEDSimon.png" style="width: 307.04px; height: 115.02px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h2 class="c15"><span class="c18">Spin</span></h2><p class="c4"><span class="c9">Let&rsquo;s create a light show that spins. The underlying concept is to start the LEDscript of the next LED slightly after the previous one. </span></p><p class="c4"><span class="c9">Edit LightShows.cs, add this line at the top of the file:</span></p><a id="t.8505cd88e12dad2a736452136815d831f765e7b4"></a><a id="t.17"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c49"><span class="c14">using</span><span class="c10">&nbsp;System.Linq;</span></p></td></tr></table><p class="c19"><span class="c9">Add this method to the LEDShow class:</span></p><a id="t.97aaf38e1591207b742a2d8345ef9d7d47e26065"></a><a id="t.18"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c32">// Spin a pattern of colors, if there are less than 61 colors, the color pattern repeats.</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c32">// priority is the priority assigned to every LEDScript created.</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c32">// fade is the fade time used for every LEDScript command.</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c32">// period is how long it takes to make one rotation.</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c32">// ledPrefix is the name of the LEDs before the LED number</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">protected</span><span class="c10">&nbsp;List&lt;LEDScript&gt; Spin(</span><span class="c14">int</span><span class="c10">&nbsp;priority, List&lt;</span><span class="c14">ushort</span><span class="c10">[]&gt; colors, </span><span class="c14">double</span><span class="c10">&nbsp;fade, </span><span class="c14">double</span><span class="c10">&nbsp;period, </span><span class="c14">string</span><span class="c3">&nbsp;ledPrefix)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; newScripts = </span><span class="c14">new</span><span class="c3">&nbsp;List&lt;LEDScript&gt;();</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">double</span><span class="c3">&nbsp;timeSlice = period / 61.0;</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">int</span><span class="c3">&nbsp;index = -1;</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">for</span><span class="c10">&nbsp;(</span><span class="c14">int</span><span class="c3">&nbsp;i = 0; i &lt; 61; i++)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; index = (index + 1) % colors.Count;</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">string</span><span class="c3">&nbsp;ledName = ledPrefix + i;</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript newScript = </span><span class="c14">new</span><span class="c3">&nbsp;LEDScript(p3.LEDs[ledName], priority);</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">for</span><span class="c10">&nbsp;(</span><span class="c14">int</span><span class="c3">&nbsp;c = index; c &lt; colors.Count; c++)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScript.AddCommand(colors[c], fade, timeSlice);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">for</span><span class="c10">&nbsp;(</span><span class="c14">int</span><span class="c3">&nbsp;c = 0; c &lt; index; c++)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScript.AddCommand(colors[c], fade, timeSlice);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScripts.Add(newScript);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">return</span><span class="c3">&nbsp;newScripts;</span></p><p class="c22"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Change the LEDShowControllerMode constructor like this:</span></p><a id="t.24bd57c61dcef2dafcd3d4ee9687e98e98c4d442"></a><a id="t.19"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">public</span><span class="c12">&nbsp;LEDShowControllerMode (P3Controller controller, </span><span class="c11">int</span><span class="c6">&nbsp;priority)</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c11">base</span><span class="c6">(controller, priority)</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow spinLightShowMode = </span><span class="c14">new</span><span class="c3">&nbsp;SpinLightShowMode(controller, priority);</span></p><p class="c0 c5"><span class="c6"></span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows = </span><span class="c11">new</span><span class="c6">&nbsp;List&lt;ShowData&gt;();</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c14">new</span><span class="c3">&nbsp;ShowData(spinLightShowMode, 20));</span></p><p class="c22"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Add this class below QuadrantsLightShowMode:</span></p><a id="t.1d26577db17364f4caaa33554c7a8661e0716466"></a><a id="t.20"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c10">&nbsp; &nbsp; </span><span class="c14">public</span><span class="c10">&nbsp;</span><span class="c14">class</span><span class="c10">&nbsp;</span><span class="c39">SpinLightShowMode</span><span class="c3">&nbsp;: LEDShow</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">public</span><span class="c10">&nbsp;SpinLightShowMode(P3Controller controller, </span><span class="c14">int</span><span class="c3">&nbsp;priority)</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c14">base</span><span class="c3">(controller, priority)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;</span><span class="c14">ushort</span><span class="c10">[]&gt; colors = </span><span class="c14">new</span><span class="c10">&nbsp;List&lt;</span><span class="c14">ushort</span><span class="c3">[]&gt;();</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; colors.AddRange(Enumerable.Repeat(Multimorphic.P3.Colors.Color.red, 10));</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; colors.AddRange(Enumerable.Repeat(Multimorphic.P3.Colors.Color.green, 10));</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; colors.AddRange(Enumerable.Repeat(Multimorphic.P3.Colors.Color.blue, 10));</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; leftShow = Spin(</span><span class="c14">this</span><span class="c10">.Priority, colors, 0.2, 8.0, </span><span class="c7">&quot;speakerLeft&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; rightShow = Copy(leftShow, </span><span class="c7">&quot;speakerRight&quot;</span><span class="c3">);</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(leftShow, -10);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(rightShow, 10);</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(leftShow);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(rightShow);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c22"><span class="c10">&nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Play the application in Unity and select Display #8 in the Game window. The two speaker LED strips spin in the same direction.</span></p><h2 class="c15"><span class="c18">Flip</span></h2><p class="c4"><span class="c9">To make the right speaker LED strip spin in the other direction, we can make a mirror image of the light show across a symmetry line.</span></p><p class="c4"><span class="c9">Edit LightShows.cs, add this method to the LEDShow class:</span></p><a id="t.e3767542947211e2c94b04bcff80aa68e9b5ae83"></a><a id="t.21"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c32">// Reassign every LEDScript in the lightShow such that its new LED number</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c32">// is the mirror image from the dividing line traversing at the pivot.</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c32">// pivot is the LED number where the symmetry line divides the Speaker Panel in half.</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c32">// This reverses many light patterns.</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">protected</span><span class="c10">&nbsp;</span><span class="c14">void</span><span class="c10">&nbsp;Flip(List&lt;LEDScript&gt; lightShow, </span><span class="c14">int</span><span class="c3">&nbsp;pivot)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">foreach</span><span class="c10">&nbsp;(LEDScript ledScript </span><span class="c14">in</span><span class="c3">&nbsp;lightShow)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Match match = Regex.Match(ledScript.led.Name, </span><span class="c50">@&quot;^(.*?)(\d+)$&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">if</span><span class="c3">&nbsp;(match.Success)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">string</span><span class="c3">&nbsp;namePrefix = match.Groups[1].Value;</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">int</span><span class="c10">&nbsp;ledNumber = </span><span class="c14">int</span><span class="c3">.Parse(match.Groups[2].Value);</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">int</span><span class="c3">&nbsp;distance = ledNumber - pivot;</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">string</span><span class="c3">&nbsp;newLedName = namePrefix + ((pivot - distance + 61) % 61);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.led = p3.LEDs[newLedName];</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c22"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Edit SpinLightShowMode like this:</span></p><a id="t.c8fad71a134761b234bb487d35f9fd37eb5d5a30"></a><a id="t.22"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c12">&nbsp; &nbsp; </span><span class="c11">public</span><span class="c12">&nbsp;</span><span class="c11">class</span><span class="c12">&nbsp;</span><span class="c26">SpinLightShowMode</span><span class="c6">&nbsp;: LEDShow</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">public</span><span class="c12">&nbsp;SpinLightShowMode(P3Controller controller, </span><span class="c11">int</span><span class="c6">&nbsp;priority)</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c11">base</span><span class="c6">(controller, priority)</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;</span><span class="c11">ushort</span><span class="c12">[]&gt; colors = </span><span class="c11">new</span><span class="c12">&nbsp;List&lt;</span><span class="c11">ushort</span><span class="c6">[]&gt;();</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; colors.AddRange(Enumerable.Repeat(Multimorphic.P3.Colors.Color.red, 10));</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; colors.AddRange(Enumerable.Repeat(Multimorphic.P3.Colors.Color.green, 10));</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; colors.AddRange(Enumerable.Repeat(Multimorphic.P3.Colors.Color.blue, 10));</span></p><p class="c0 c5"><span class="c6"></span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; leftShow = Spin(</span><span class="c11">this</span><span class="c12">.Priority, colors, 0.2, 8.0, </span><span class="c34">&quot;speakerLeft&quot;</span><span class="c6">);</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; rightShow = Copy(leftShow, </span><span class="c34">&quot;speakerRight&quot;</span><span class="c6">);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Flip(rightShow, 0);</span></p><p class="c0 c5"><span class="c6"></span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(leftShow, -10);</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(rightShow, 10);</span></p><p class="c0 c5"><span class="c6"></span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(leftShow);</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(rightShow);</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c22"><span class="c6">&nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Play the application in Unity and select Display #8 in the Game window. The two speaker LED strips spin opposite directions.</span></p><h2 class="c15"><span class="c18">Radar</span></h2><p class="c4"><span class="c9">You can get a radar sweep effect by spinning white together with black.</span></p><p class="c19"><span class="c9">Edit LightShows.cs, change the LEDShowControllerMode constructor like this:</span></p><a id="t.c201712eedd7a7b42fff9b3f6b61b9db86d34c77"></a><a id="t.23"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">public</span><span class="c12">&nbsp;LEDShowControllerMode (P3Controller controller, </span><span class="c11">int</span><span class="c6">&nbsp;priority)</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c11">base</span><span class="c6">(controller, priority)</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow radarLightShowMode = </span><span class="c14">new</span><span class="c3">&nbsp;RadarLightShowMode(controller, priority);</span></p><p class="c0 c5"><span class="c6"></span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows = </span><span class="c11">new</span><span class="c6">&nbsp;List&lt;ShowData&gt;();</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c14">new</span><span class="c3">&nbsp;ShowData(radarLightShowMode, 20));</span></p><p class="c22"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Add this class below SpinLightShowMode:</span></p><a id="t.65334e2e5a5a6599808f989162e6c7d79751fe4b"></a><a id="t.24"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c10">&nbsp; &nbsp; </span><span class="c14">public</span><span class="c10">&nbsp;</span><span class="c14">class</span><span class="c10">&nbsp;</span><span class="c39">RadarLightShowMode</span><span class="c3">&nbsp;: LEDShow</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">public</span><span class="c10">&nbsp;RadarLightShowMode(P3Controller controller, </span><span class="c14">int</span><span class="c3">&nbsp;priority)</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c14">base</span><span class="c3">(controller, priority)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;</span><span class="c14">ushort</span><span class="c10">[]&gt; colors = </span><span class="c14">new</span><span class="c10">&nbsp;List&lt;</span><span class="c14">ushort</span><span class="c3">[]&gt;();</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; colors.AddRange(Enumerable.Repeat(Multimorphic.P3.Colors.Color.white, 5));</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; colors.AddRange(Enumerable.Repeat(Multimorphic.P3.Colors.Color.barelywhite, 56));</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; leftShow = Spin(</span><span class="c14">this</span><span class="c10">.Priority, colors, 0.1, 6.0, </span><span class="c7">&quot;speakerLeft&quot;</span><span class="c3">);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Flip(leftShow, 0);</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; rightShow = Copy(leftShow, </span><span class="c7">&quot;speakerRight&quot;</span><span class="c3">);</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(leftShow, -10);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(rightShow, 10);</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(leftShow);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(rightShow);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c22"><span class="c3">&nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Play the application in Unity and select Display #8 in the Game window. The two speaker LED strips spin like a radar.</span></p><h2 class="c15"><span class="c18">SpinBarrier</span></h2><p class="c19"><span class="c9">You can get an interesting fan effect if you let multiple arcs grow within their own fixed sector. </span></p><p class="c4"><span class="c9">Edit LightShows.cs, add this method to the LEDShow class:</span></p><a id="t.d74ffb3a6c821417515a12825883e4b5a90c5b39"></a><a id="t.25"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c27">// Grow a pattern of colors from the start LED inclusive to the end LED exclusive</span></p><p class="c0"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c27">// priority is the priority assigned to every LEDScript created.</span></p><p class="c0"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c27">// fade is the fade time used for every LEDScript command.</span></p><p class="c0"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c27">// period is how long it takes to make one full rotation.</span></p><p class="c0"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c27">// step is 1 to increase the led numbers from start to end, or -1 to decrease from start to end.</span></p><p class="c0"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c27">// ledPrefix is the name of the LEDs before the LED number</span></p><p class="c0"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23">protected</span><span class="c13">&nbsp;List&lt;LEDScript&gt; Grow(</span><span class="c23">int</span><span class="c13">&nbsp;priority, List&lt;</span><span class="c23">ushort</span><span class="c13">[]&gt; colors, </span><span class="c23">double</span><span class="c13">&nbsp;fade, </span><span class="c23">double</span><span class="c13">&nbsp;period, </span><span class="c23">int</span><span class="c13">&nbsp;start, </span><span class="c23">int</span><span class="c13">&nbsp;end, </span><span class="c23">int</span><span class="c13">&nbsp;step, </span><span class="c23">string</span><span class="c13 c25">&nbsp;ledPrefix)</span></p><p class="c0"><span class="c13 c25">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23">if</span><span class="c13 c25">&nbsp;(colors.Count &lt; 2)</span></p><p class="c0"><span class="c13 c25">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23">throw</span><span class="c13">&nbsp;</span><span class="c23">new</span><span class="c13">&nbsp;Exception(</span><span class="c51">&quot;Grow requires at least 2 colors&quot;</span><span class="c13 c25">);</span></p><p class="c0"><span class="c13 c25">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c13 c25"></span></p><p class="c0"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; newScripts = </span><span class="c23">new</span><span class="c13 c25">&nbsp;List&lt;LEDScript&gt;();</span></p><p class="c0"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23">double</span><span class="c13 c25">&nbsp;timeSlice = period / 61.0;</span></p><p class="c0"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23">int</span><span class="c13 c25">&nbsp;ledCount = Math.Abs(end - start);</span></p><p class="c0"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23">double</span><span class="c13 c25">&nbsp;segmentPeriod = timeSlice * ledCount;</span></p><p class="c0 c5"><span class="c13 c25"></span></p><p class="c0"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23">for</span><span class="c13">&nbsp;(</span><span class="c23">int</span><span class="c13 c25">&nbsp;i = 0; i &lt; ledCount; i++)</span></p><p class="c0"><span class="c13 c25">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23">string</span><span class="c13 c25">&nbsp;ledName = ledPrefix + ((61 + start + i * step) % 61);</span></p><p class="c0"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript newScript = </span><span class="c23">new</span><span class="c13 c25">&nbsp;LEDScript(p3.LEDs[ledName], priority);</span></p><p class="c0 c5"><span class="c13 c25"></span></p><p class="c0"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23">double</span><span class="c13 c25">&nbsp;duration0 = i * timeSlice;</span></p><p class="c0"><span class="c13 c25">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScript.AddCommand(colors[0], fade, duration0);</span></p><p class="c0"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23">for</span><span class="c13">&nbsp;(</span><span class="c23">int</span><span class="c13 c25">&nbsp;c = 1; c &lt; colors.Count - 1; c++)</span></p><p class="c0"><span class="c13 c25">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c13 c25">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScript.AddCommand(colors[c], fade, segmentPeriod);</span></p><p class="c0"><span class="c13 c25">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c13 c25">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScript.AddCommand(colors[colors.Count - 1], fade, segmentPeriod - duration0);</span></p><p class="c0 c5"><span class="c13 c25"></span></p><p class="c0"><span class="c13 c25">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScripts.Add(newScript);</span></p><p class="c0"><span class="c13 c25">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c13 c25"></span></p><p class="c0"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23">return</span><span class="c13 c25">&nbsp;newScripts;</span></p><p class="c22"><span class="c13 c25">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Change the LEDShowControllerMode constructor like this:</span></p><a id="t.b1c2d85774c1bca9f7154ea9b9659b450be5a29e"></a><a id="t.26"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">public</span><span class="c12">&nbsp;LEDShowControllerMode (P3Controller controller, </span><span class="c11">int</span><span class="c6">&nbsp;priority)</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c11">base</span><span class="c6">(controller, priority)</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow spinBarrierLightShowMode = </span><span class="c14">new</span><span class="c3">&nbsp;SpinBarrierLightShowMode(controller, priority);</span></p><p class="c0 c5"><span class="c6"></span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows = </span><span class="c11">new</span><span class="c6">&nbsp;List&lt;ShowData&gt;();</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c14">new</span><span class="c3">&nbsp;ShowData(spinBarrierLightShowMode, 20));</span></p><p class="c22"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Add this class below RadarLightShowMode. The LEDScript for speakerLeft60 is a copy of the LEDScript for speakerLeft0. This makes the 3 sectors the same size with equal timings.</span></p><a id="t.177c99aa71154fee1742f017901c6f822f17f2c3"></a><a id="t.27"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c10">&nbsp; &nbsp; </span><span class="c14">public</span><span class="c10">&nbsp;</span><span class="c14">class</span><span class="c10">&nbsp;</span><span class="c39">SpinBarrierLightShowMode</span><span class="c3">&nbsp;: LEDShow</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">public</span><span class="c10">&nbsp;SpinBarrierLightShowMode(P3Controller controller, </span><span class="c14">int</span><span class="c3">&nbsp;priority)</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c14">base</span><span class="c3">(controller, priority)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;</span><span class="c14">ushort</span><span class="c10">[]&gt; colors = </span><span class="c14">new</span><span class="c10">&nbsp;List&lt;</span><span class="c14">ushort</span><span class="c3">[]&gt;() {</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Multimorphic.P3.Colors.Color.red,</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Multimorphic.P3.Colors.Color.green,</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Multimorphic.P3.Colors.Color.blue,</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Multimorphic.P3.Colors.Color.orange,</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Multimorphic.P3.Colors.Color.purple</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; leftShow = </span><span class="c14">new</span><span class="c3">&nbsp;List&lt;LEDScript&gt;();</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Grow(priority, colors, 0.1, 8.0, 0, 20, 1, </span><span class="c7">&quot;speakerLeft&quot;</span><span class="c3">));</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Grow(priority, colors, 0.1, 8.0, 20, 40, 1, </span><span class="c7">&quot;speakerLeft&quot;</span><span class="c3">));</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Grow(priority, colors, 0.1, 8.0, 40, 60, 1, </span><span class="c7">&quot;speakerLeft&quot;</span><span class="c3">));</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.Add(Clone(leftShow[0], </span><span class="c7">&quot;speakerLeft60&quot;</span><span class="c3">));</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; rightShow = Copy(leftShow, </span><span class="c7">&quot;speakerRight&quot;</span><span class="c3">);</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(leftShow, -10);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(rightShow, 10);</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(leftShow);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(rightShow);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c22"><span class="c3">&nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Play the application in Unity and select Display #8 in the Game window. The speaker panel LEDs spin restricted within 3 sectors.</span></p><h2 class="c15"><span class="c18">Scroll</span></h2><p class="c19"><span class="c9">You can get a line scrolling effect using 2 arcs that grow in opposite directions. </span></p><p class="c19"><span class="c9">Edit LightShows.cs, change the LEDShowControllerMode constructor like this:</span></p><a id="t.b3694fdf877e0858d0df92de91bfeb050ae8f75b"></a><a id="t.28"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">public</span><span class="c12">&nbsp;LEDShowControllerMode (P3Controller controller, </span><span class="c11">int</span><span class="c6">&nbsp;priority)</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c11">base</span><span class="c6">(controller, priority)</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow scrollLightShowMode = </span><span class="c14">new</span><span class="c3">&nbsp;ScrollLightShowMode(controller, priority);</span></p><p class="c0 c5"><span class="c6"></span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows = </span><span class="c11">new</span><span class="c6">&nbsp;List&lt;ShowData&gt;();</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c14">new</span><span class="c3">&nbsp;ShowData(scrollLightShowMode, 20));</span></p><p class="c22"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Add this class below SpinBarrierLightShowMode. The LEDScript for speakerLeft60 is a copy of the LEDScript for speakerLeft0. This makes the 2 sectors the same size with equal timings.</span></p><a id="t.c71df6eaceb86838e85bf5de657ace2a1502d566"></a><a id="t.29"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c10">&nbsp; &nbsp; </span><span class="c14">public</span><span class="c10">&nbsp;</span><span class="c14">class</span><span class="c10">&nbsp;</span><span class="c39">ScrollLightShowMode</span><span class="c3">&nbsp;: LEDShow</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">public</span><span class="c10">&nbsp;ScrollLightShowMode(P3Controller controller, </span><span class="c14">int</span><span class="c3">&nbsp;priority)</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c14">base</span><span class="c3">(controller, priority)</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;</span><span class="c14">ushort</span><span class="c10">[]&gt; colors = </span><span class="c14">new</span><span class="c10">&nbsp;List&lt;</span><span class="c14">ushort</span><span class="c3">[]&gt;() {</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Multimorphic.P3.Colors.Color.red,</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Multimorphic.P3.Colors.Color.green,</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Multimorphic.P3.Colors.Color.blue,</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Multimorphic.P3.Colors.Color.orange,</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Multimorphic.P3.Colors.Color.purple</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; leftShow = </span><span class="c14">new</span><span class="c3">&nbsp;List&lt;LEDScript&gt;();</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Grow(priority, colors, 2, 10.0, 0, 30, 1, </span><span class="c7">&quot;speakerLeft&quot;</span><span class="c3">));</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Grow(priority, colors, 2, 10.0, 59, 29, -1, </span><span class="c7">&quot;speakerLeft&quot;</span><span class="c3">));</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.Add(Clone(leftShow[0], </span><span class="c7">&quot;speakerLeft60&quot;</span><span class="c3">));</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; rightShow = Copy(leftShow, </span><span class="c7">&quot;speakerRight&quot;</span><span class="c3">);</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(leftShow, -10);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(rightShow, 10);</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(leftShow);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(rightShow);</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c22"><span class="c3">&nbsp; &nbsp; }</span></p></td></tr></table><p class="c19"><span class="c9">Play the application in Unity and select Display #8 in the Game window. The speaker panel LEDs scroll from top to bottom.</span></p><p class="c19"><span class="c9">You can also try these rotations to have the two speakers scroll away from each other:</span></p><a id="t.898355b109c9c9171e4bba4541f54fb687ca2390"></a><a id="t.30"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(leftShow, 5);</span></p><p class="c22"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(rightShow, -5);</span></p></td></tr></table><p class="c19"><span class="c9">Or these rotations to scroll towards each other:</span></p><a id="t.1f5fe55cb101959c5c852559cbf05bec7136b0d3"></a><a id="t.31"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(leftShow, 35);</span></p><p class="c22"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(rightShow, 25);</span></p></td></tr></table><h2 class="c36"><span class="c18">Multiple Light Shows</span></h2><p class="c4"><span class="c9">Now that we have seen each individual light show, we can enable them all in LEDShowControllerMode.</span></p><p class="c19"><span class="c9">Edit LightShows.cs, change the LEDShowControllerMode constructor like this:</span></p><a id="t.6931462342d6697578c6205e8656038f485f4eee"></a><a id="t.32"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">public</span><span class="c12">&nbsp;LEDShowControllerMode(P3Controller controller, </span><span class="c11">int</span><span class="c6">&nbsp;priority)</span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c11">base</span><span class="c6">(controller, priority)</span></p><p class="c0"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow solidLightShowMode = </span><span class="c14">new</span><span class="c3">&nbsp;SolidLightShowMode(controller, priority);</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow fadeLightShowMode = </span><span class="c14">new</span><span class="c3">&nbsp;FadeLightShowMode(controller, priority);</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow flashLightShowMode = </span><span class="c14">new</span><span class="c3">&nbsp;FlashLightShowMode(controller, priority);</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow quadrantsLightShowMode = </span><span class="c14">new</span><span class="c3">&nbsp;QuadrantsLightShowMode(controller, priority);</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow spinLightShowMode = </span><span class="c14">new</span><span class="c3">&nbsp;SpinLightShowMode(controller, priority);</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow radarLightShowMode = </span><span class="c14">new</span><span class="c3">&nbsp;RadarLightShowMode(controller, priority);</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow spinBarrierLightShowMode = </span><span class="c14">new</span><span class="c3">&nbsp;SpinBarrierLightShowMode(controller, priority);</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow scrollLightShowMode = </span><span class="c14">new</span><span class="c3">&nbsp;ScrollLightShowMode(controller, priority);</span></p><p class="c0 c5"><span class="c3"></span></p><p class="c0"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows = </span><span class="c11">new</span><span class="c6">&nbsp;List&lt;ShowData&gt;();</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c14">new</span><span class="c3">&nbsp;ShowData(solidLightShowMode, 5));</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c14">new</span><span class="c3">&nbsp;ShowData(fadeLightShowMode, 20));</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c14">new</span><span class="c3">&nbsp;ShowData(flashLightShowMode, 6));</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c14">new</span><span class="c3">&nbsp;ShowData(quadrantsLightShowMode, 5));</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c14">new</span><span class="c3">&nbsp;ShowData(spinLightShowMode, 20));</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c14">new</span><span class="c3">&nbsp;ShowData(radarLightShowMode, 20));</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c14">new</span><span class="c3">&nbsp;ShowData(spinBarrierLightShowMode, 20));</span></p><p class="c0"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c14">new</span><span class="c3">&nbsp;ShowData(scrollLightShowMode, 20));</span></p><p class="c22"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p></td></tr></table><p class="c43"><span class="c9">Play the application in Unity and select Display #8 in the Game window. A random light show plays. After a short while, another random light show plays, and so on.</span></p><p class="c43"><span class="c9">This is just a demo of the speaker panel light shows. A real Attract mode would have light shows that control all LEDs, including the side targets and the LEDs on the installed module. Where it makes sense, the light shows should also control the GUIInserts.</span></p><h2 class="c36"><span class="c18">Synchronizers</span></h2><p class="c4"><span class="c9">For even more complex light shows that must synchronize different effects, take a look at synchronizers as documented in the SDK Guide.</span></p><h2 class="c36"><span class="c18">LEDHelpers</span></h2><p class="c4"><span class="c9">We did not use LEDHelpers in this TechTip because we created light shows to be played later. LEDHelpers methods are better suited for LEDs indicating a status or a shot to make because they play the script immediately.</span></p><h2 class="c15"><span class="c18">Automatic Removal</span></h2><p class="c4"><span class="c9">A LEDScript will remove itself when its runtime expires provided autoRemove is true (true is the default). This is great if you want the lower priority scripts to regain control of the LEDs as soon as the LEDScript ends.</span></p><p class="c4"><span class="c9">If you want the LEDScript to hold its last color, you can set autoRemove to false.</span></p><p class="c17"><span class="c9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LEDScript ledScript = new LEDScript(p3.LEDs[&quot;ledName&quot;], Priority);</span></p><p class="c4"><span class="c9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ledScript.autoRemove = false;</span></p><p class="c4"><span class="c9">The value of autoRemove is irrelevant for a LEDScript scheduled to run forever (with runtime=-1) because the runtime will never expire.</span></p><p class="c4"><span class="c9">There are times when you must remove a LEDScript even if autoRemove is true. You must remove your local LEDScripts when stopping your mode. You must also remove a script before reusing it and changing its commands. For example, LEDHelpers is careful to remove a script before changing it. </span></p><p class="c4"><span class="c9">P3Mode creates a LEDScript for every LED in p3.LEDs.Values. Those LEDScripts are stored in the members:</span></p><p class="c17"><span class="c9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected List&lt;LEDScript&gt; LEDScripts;</span></p><p class="c4"><span class="c9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected Dictionary&lt;string, LEDScript&gt; LEDScriptsDict;</span></p><p class="c4"><span class="c9">This is similar to GUIInsertScripts and GUIInsertScriptsDict also created by P3Mode.</span></p><p class="c4"><span class="c9">If you reuse the LEDScripts created by P3Mode, then you don&rsquo;t need to remove them when the mode stops because P3Mode will do it automatically. For this to work, make sure to call base.mode_stopped() in your mode_stopped() method. Beware P3Mode creates the LEDScripts with autoRemove=false.</span></p><p class="c4"><span class="c9">You don&rsquo;t have to use the LEDScripts created by P3Mode. All examples in P3SampleApp create their own local LEDScripts instead of using those inherited from P3Mode.</span></p><h2 class="c15"><span class="c18">Appendix</span></h2><p class="c4"><span class="c9">This appendix contains the source code collected together. Because of licensing issues, only original source code is listed. Follow the instructions to merge with Assets\Scripts\Modes\Mechs\LightShows.cs</span></p><p class="c4"><span class="c9">Insert these lines after the existing using directives.</span></p><a id="t.3b9feebd5a48b2f5647d88d3ce3cd204086d1b55"></a><a id="t.33"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c8">using</span><span class="c1">&nbsp;System.Text.RegularExpressions;</span></p><p class="c22"><span class="c8">using</span><span class="c1">&nbsp;System.Linq;</span></p></td></tr></table><p class="c4 c5"><span class="c9"></span></p><p class="c4"><span class="c9">Insert these methods in the class LEDShow.</span></p><a id="t.9c14f582cef76101134856b20fcceef6bf85abe0"></a><a id="t.34"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// Copy a LEDScript, i.e. create a new LEDScript with the same LEDCommands but for another LED</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// The LEDCommands can be shared because they are immutable data objects.</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">protected</span><span class="c2">&nbsp;LEDScript Clone(LEDScript ledScript, </span><span class="c8">string</span><span class="c1">&nbsp;newLedName)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript newScript = </span><span class="c8">new</span><span class="c1">&nbsp;LEDScript(p3.LEDs[newLedName], ledScript.priority);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScript.script.AddRange(ledScript.script);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScript.autoRemove = ledScript.autoRemove;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScript.scriptName = ledScript.scriptName;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScript.synchronizerIndex = ledScript.synchronizerIndex;</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">return</span><span class="c1">&nbsp;newScript;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// Copy the same LEDScript to a range of LEDs</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">protected</span><span class="c2">&nbsp;List&lt;LEDScript&gt; Copy(LEDScript script, </span><span class="c8">int</span><span class="c2">&nbsp;start, </span><span class="c8">int</span><span class="c2">&nbsp;count, </span><span class="c8">string</span><span class="c1">&nbsp;ledPrefix)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; lightShow = </span><span class="c8">new</span><span class="c1">&nbsp;List&lt;LEDScript&gt;();</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">int</span><span class="c1">&nbsp;end = start + count;</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">for</span><span class="c2">&nbsp;(</span><span class="c8">int</span><span class="c1">&nbsp;i = start; i &lt; end; i++)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">string</span><span class="c1">&nbsp;ledName = ledPrefix + i;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lightShow.Add(Clone(script, ledName));</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">return</span><span class="c1">&nbsp;lightShow;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// Copy the LEDScripts in the lightShow renaming the LEDs with the new prefix.</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// newPrefix is the prefix of the LED names in the new light show.</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">protected</span><span class="c2">&nbsp;List&lt;LEDScript&gt; Copy(List&lt;LEDScript&gt; lightShow, </span><span class="c8">string</span><span class="c1">&nbsp;newPrefix)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; newScripts = </span><span class="c8">new</span><span class="c1">&nbsp;List&lt;LEDScript&gt;();</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">foreach</span><span class="c2">&nbsp;(LEDScript ledScript </span><span class="c8">in</span><span class="c1">&nbsp;lightShow)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Match match = Regex.Match(ledScript.led.Name, </span><span class="c33">@&quot;(\d+)$&quot;</span><span class="c1">);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">if</span><span class="c1">&nbsp;(match.Success)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">string</span><span class="c1">&nbsp;newLedName = newPrefix + match.Value;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript newScript = Clone(ledScript, newLedName);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScripts.Add(newScript);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">return</span><span class="c1">&nbsp;newScripts;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// Rotate a light show by having each LEDScript be reassigned count LEDs further down the LED string.</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// This is particularly useful to align the left speaker movement against the right speaker movement.</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// count is the offset to add to the LED number, range is from -60 to + 60</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">protected</span><span class="c2">&nbsp;</span><span class="c8">void</span><span class="c2">&nbsp;Rotate(List&lt;LEDScript&gt; lightShow, </span><span class="c8">int</span><span class="c1">&nbsp;count)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">foreach</span><span class="c2">&nbsp;(LEDScript ledScript </span><span class="c8">in</span><span class="c1">&nbsp;lightShow)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Match match = Regex.Match(ledScript.led.Name, </span><span class="c33">@&quot;^(.*?)(\d+)$&quot;</span><span class="c1">);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">if</span><span class="c1">&nbsp;(match.Success)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">string</span><span class="c1">&nbsp;namePrefix = match.Groups[1].Value;</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">int</span><span class="c2">&nbsp;ledNumber = </span><span class="c8">int</span><span class="c1">.Parse(match.Groups[2].Value);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">string</span><span class="c1">&nbsp;newLedName = namePrefix + ((ledNumber + count + 61) % 61);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.led = p3.LEDs[newLedName];</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// Spin a pattern of colors, if there are less than 61 colors, the color pattern repeats.</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// priority is the priority assigned to every LEDScript created.</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// fade is the fade time used for every LEDScript command.</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// period is how long it takes to make one rotation.</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// ledPrefix is the name of the LEDs before the LED number</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">protected</span><span class="c2">&nbsp;List&lt;LEDScript&gt; Spin(</span><span class="c8">int</span><span class="c2">&nbsp;priority, List&lt;</span><span class="c8">ushort</span><span class="c2">[]&gt; colors, </span><span class="c8">double</span><span class="c2">&nbsp;fade, </span><span class="c8">double</span><span class="c2">&nbsp;period, </span><span class="c8">string</span><span class="c1">&nbsp;ledPrefix)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; newScripts = </span><span class="c8">new</span><span class="c1">&nbsp;List&lt;LEDScript&gt;();</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">double</span><span class="c1">&nbsp;timeSlice = period / 61.0;</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">int</span><span class="c1">&nbsp;index = -1;</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">for</span><span class="c2">&nbsp;(</span><span class="c8">int</span><span class="c1">&nbsp;i = 0; i &lt; 61; i++)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; index = (index + 1) % colors.Count;</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">string</span><span class="c1">&nbsp;ledName = ledPrefix + i;</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript newScript = </span><span class="c8">new</span><span class="c1">&nbsp;LEDScript(p3.LEDs[ledName], priority);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">for</span><span class="c2">&nbsp;(</span><span class="c8">int</span><span class="c1">&nbsp;c = index; c &lt; colors.Count; c++)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScript.AddCommand(colors[c], fade, timeSlice);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">for</span><span class="c2">&nbsp;(</span><span class="c8">int</span><span class="c1">&nbsp;c = 0; c &lt; index; c++)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScript.AddCommand(colors[c], fade, timeSlice);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScripts.Add(newScript);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">return</span><span class="c1">&nbsp;newScripts;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// Reassign every LEDScript in the lightShow such that its new LED number</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// is the mirror image from the dividing line traversing at the pivot.</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// pivot is the LED number where the symmetry line divides the Speaker Panel in half.</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// This reverses many light patterns.</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">protected</span><span class="c2">&nbsp;</span><span class="c8">void</span><span class="c2">&nbsp;Flip(List&lt;LEDScript&gt; lightShow, </span><span class="c8">int</span><span class="c1">&nbsp;pivot)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">foreach</span><span class="c2">&nbsp;(LEDScript ledScript </span><span class="c8">in</span><span class="c1">&nbsp;lightShow)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Match match = Regex.Match(ledScript.led.Name, </span><span class="c33">@&quot;^(.*?)(\d+)$&quot;</span><span class="c1">);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">if</span><span class="c1">&nbsp;(match.Success)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">string</span><span class="c1">&nbsp;namePrefix = match.Groups[1].Value;</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">int</span><span class="c2">&nbsp;ledNumber = </span><span class="c8">int</span><span class="c1">.Parse(match.Groups[2].Value);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">int</span><span class="c1">&nbsp;distance = ledNumber - pivot;</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">string</span><span class="c1">&nbsp;newLedName = namePrefix + ((pivot - distance + 61) % 61);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.led = p3.LEDs[newLedName];</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// Grow a pattern of colors from the start LED inclusive to the end LED exclusive</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// priority is the priority assigned to every LEDScript created.</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// fade is the fade time used for every LEDScript command.</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// period is how long it takes to make one full rotation.</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// step is 1 to increase the led numbers from start to end, or -1 to decrease from start to end.</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">// ledPrefix is the name of the LEDs before the LED number</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">protected</span><span class="c2">&nbsp;List&lt;LEDScript&gt; Grow(</span><span class="c8">int</span><span class="c2">&nbsp;priority, List&lt;</span><span class="c8">ushort</span><span class="c2">[]&gt; colors, </span><span class="c8">double</span><span class="c2">&nbsp;fade, </span><span class="c8">double</span><span class="c2">&nbsp;period, </span><span class="c8">int</span><span class="c2">&nbsp;start, </span><span class="c8">int</span><span class="c2">&nbsp;end, </span><span class="c8">int</span><span class="c2">&nbsp;step, </span><span class="c8">string</span><span class="c1">&nbsp;ledPrefix)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">if</span><span class="c1">&nbsp;(colors.Count &lt; 2)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">throw</span><span class="c2">&nbsp;</span><span class="c8">new</span><span class="c2">&nbsp;Exception(</span><span class="c21">&quot;Grow requires at least 2 colors&quot;</span><span class="c1">);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; newScripts = </span><span class="c8">new</span><span class="c1">&nbsp;List&lt;LEDScript&gt;();</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">double</span><span class="c1">&nbsp;timeSlice = period / 61.0;</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">int</span><span class="c1">&nbsp;ledCount = Math.Abs(end - start);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">double</span><span class="c1">&nbsp;segmentPeriod = timeSlice * ledCount;</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">for</span><span class="c2">&nbsp;(</span><span class="c8">int</span><span class="c1">&nbsp;i = 0; i &lt; ledCount; i++)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">string</span><span class="c1">&nbsp;ledName = ledPrefix + ((61 + start + i * step) % 61);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript newScript = </span><span class="c8">new</span><span class="c1">&nbsp;LEDScript(p3.LEDs[ledName], priority);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">double</span><span class="c1">&nbsp;duration0 = i * timeSlice;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScript.AddCommand(colors[0], fade, duration0);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">for</span><span class="c2">&nbsp;(</span><span class="c8">int</span><span class="c1">&nbsp;c = 1; c &lt; colors.Count - 1; c++)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScript.AddCommand(colors[c], fade, segmentPeriod);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScript.AddCommand(colors[colors.Count - 1], fade, segmentPeriod - duration0);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newScripts.Add(newScript);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">return</span><span class="c1">&nbsp;newScripts;</span></p><p class="c22"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p></td></tr></table><p class="c4 c5"><span class="c9"></span></p><p class="c4"><span class="c9">Change the LEDShowControllerMode constructor like this.</span></p><a id="t.0fec14234dac855fe7312fb07f34196ca43c40f1"></a><a id="t.35"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;LEDShowControllerMode(P3Controller controller, </span><span class="c8">int</span><span class="c1">&nbsp;priority)</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c8">base</span><span class="c1">(controller, priority)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">//LEDShow solidLightShowMode0 = new SolidLightShowMode0(controller, priority);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">//LEDShow solidLightShowMode1 = new SolidLightShowMode1(controller, priority);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow solidLightShowMode = </span><span class="c8">new</span><span class="c1">&nbsp;SolidLightShowMode(controller, priority);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow fadeLightShowMode = </span><span class="c8">new</span><span class="c1">&nbsp;FadeLightShowMode(controller, priority);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow flashLightShowMode = </span><span class="c8">new</span><span class="c1">&nbsp;FlashLightShowMode(controller, priority);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow quadrantsLightShowMode0 = </span><span class="c8">new</span><span class="c1">&nbsp;QuadrantsLightShowMode0(controller, priority);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow quadrantsLightShowMode = </span><span class="c8">new</span><span class="c1">&nbsp;QuadrantsLightShowMode(controller, priority);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow spinLightShowMode0 = </span><span class="c8">new</span><span class="c1">&nbsp;SpinLightShowMode0(controller, priority);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow spinLightShowMode = </span><span class="c8">new</span><span class="c1">&nbsp;SpinLightShowMode(controller, priority);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow radarLightShowMode = </span><span class="c8">new</span><span class="c1">&nbsp;RadarLightShowMode(controller, priority);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow spinBarrierLightShowMode = </span><span class="c8">new</span><span class="c1">&nbsp;SpinBarrierLightShowMode(controller, priority);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDShow scrollLightShowMode = </span><span class="c8">new</span><span class="c1">&nbsp;ScrollLightShowMode(controller, priority);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows = </span><span class="c8">new</span><span class="c1">&nbsp;List&lt;ShowData&gt;();</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">//shows.Add(new ShowData(solidLightShowMode0, 5));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c20">//shows.Add(new ShowData(solidLightShowMode1, 5));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c8">new</span><span class="c1">&nbsp;ShowData(solidLightShowMode, 5));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c8">new</span><span class="c1">&nbsp;ShowData(fadeLightShowMode, 20));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c8">new</span><span class="c1">&nbsp;ShowData(flashLightShowMode, 6));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c8">new</span><span class="c1">&nbsp;ShowData(quadrantsLightShowMode0, 5));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c8">new</span><span class="c1">&nbsp;ShowData(quadrantsLightShowMode, 5));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c8">new</span><span class="c1">&nbsp;ShowData(spinLightShowMode0, 20));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c8">new</span><span class="c1">&nbsp;ShowData(spinLightShowMode, 20));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c8">new</span><span class="c1">&nbsp;ShowData(radarLightShowMode, 20));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c8">new</span><span class="c1">&nbsp;ShowData(spinBarrierLightShowMode, 20));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shows.Add(</span><span class="c8">new</span><span class="c1">&nbsp;ShowData(scrollLightShowMode, 20));</span></p><p class="c22"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p></td></tr></table><p class="c4 c5"><span class="c9"></span></p><p class="c4"><span>Add these classes after </span><span class="c45 c25">LEDShowControllerMode.</span></p><a id="t.8de873d5caf4ef014bf934c21fc674f8c610d321"></a><a id="t.36"></a><table class="c16"><tr class="c24"><td class="c31" colspan="1" rowspan="1"><p class="c29"><span class="c2">&nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;</span><span class="c8">class</span><span class="c2">&nbsp;</span><span class="c40">SolidLightShowMode0</span><span class="c1">&nbsp;: LEDShow</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;SolidLightShowMode0(P3Controller controller, </span><span class="c8">int</span><span class="c1">&nbsp;priority)</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c8">base</span><span class="c1">(controller, priority)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">for</span><span class="c2">&nbsp;(</span><span class="c8">int</span><span class="c1">&nbsp;i = 0; i &lt; 61; i++)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">string</span><span class="c2">&nbsp;ledName = </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">&nbsp;+ i;</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript script = </span><span class="c8">new</span><span class="c2">&nbsp;LEDScript(p3.LEDs[ledName], </span><span class="c8">this</span><span class="c1">.Priority);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; script.AddCommand(Multimorphic.P3.Colors.Color.red, 0, 10);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.Add(script);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;</span><span class="c8">class</span><span class="c2">&nbsp;</span><span class="c40">SolidLightShowMode1</span><span class="c1">&nbsp;: LEDShow</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;SolidLightShowMode1(P3Controller controller, </span><span class="c8">int</span><span class="c1">&nbsp;priority)</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c8">base</span><span class="c1">(controller, priority)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript ledScript = </span><span class="c8">new</span><span class="c2">&nbsp;LEDScript(p3.LEDs[</span><span class="c21">&quot;speakerLeft0&quot;</span><span class="c2">], </span><span class="c8">this</span><span class="c1">.Priority);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.red, 0, 10);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(Copy(ledScript, 0, 61, </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(Copy(ledScript, 0, 61, </span><span class="c21">&quot;speakerRight&quot;</span><span class="c1">));</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;</span><span class="c8">class</span><span class="c2">&nbsp;</span><span class="c40">SolidLightShowMode</span><span class="c1">&nbsp;: LEDShow</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;SolidLightShowMode(P3Controller controller, </span><span class="c8">int</span><span class="c1">&nbsp;priority)</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c8">base</span><span class="c1">(controller, priority)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript ledScript = </span><span class="c8">new</span><span class="c2">&nbsp;LEDScript(p3.LEDs[</span><span class="c21">&quot;speakerLeft0&quot;</span><span class="c2">], </span><span class="c8">this</span><span class="c1">.Priority);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.red, 0, 10);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; leftShow = Copy(ledScript, 0, 61, </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; rightShow = Copy(leftShow, </span><span class="c21">&quot;speakerRight&quot;</span><span class="c1">);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(leftShow);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(rightShow);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;</span><span class="c8">class</span><span class="c2">&nbsp;</span><span class="c40">FadeLightShowMode</span><span class="c1">&nbsp;: LEDShow</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;FadeLightShowMode(P3Controller controller, </span><span class="c8">int</span><span class="c1">&nbsp;priority)</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c8">base</span><span class="c1">(controller, priority)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript ledScript = </span><span class="c8">new</span><span class="c2">&nbsp;LEDScript(p3.LEDs[</span><span class="c21">&quot;speakerLeft0&quot;</span><span class="c2">], </span><span class="c8">this</span><span class="c1">.Priority);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.red, 1, 1.25);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.green, 1, 1.25);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.blue, 1, 1.25);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.yellow, 1, 1.25);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; leftShow = Copy(ledScript, 0, 61, </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; rightShow = Copy(leftShow, </span><span class="c21">&quot;speakerRight&quot;</span><span class="c1">);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(leftShow);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(rightShow);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;</span><span class="c8">class</span><span class="c2">&nbsp;</span><span class="c40">FlashLightShowMode</span><span class="c1">&nbsp;: LEDShow</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;FlashLightShowMode(P3Controller controller, </span><span class="c8">int</span><span class="c1">&nbsp;priority)</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c8">base</span><span class="c1">(controller, priority)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript ledScript = </span><span class="c8">new</span><span class="c2">&nbsp;LEDScript(p3.LEDs[</span><span class="c21">&quot;speakerLeft0&quot;</span><span class="c2">], </span><span class="c8">this</span><span class="c1">.Priority);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.white, 0, 0.2);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.barelywhite, 0.05, 0.2);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.white, 0, 0.2);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.barelywhite, 0.05, 0.2);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.white, 0, 0.2);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScript.AddCommand(Multimorphic.P3.Colors.Color.barelywhite, 0.05, 2);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; leftShow = Copy(ledScript, 0, 61, </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; rightShow = Copy(leftShow, </span><span class="c21">&quot;speakerRight&quot;</span><span class="c1">);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(leftShow);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(rightShow);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;</span><span class="c8">class</span><span class="c2">&nbsp;</span><span class="c40">QuadrantsLightShowMode0</span><span class="c1">&nbsp;: LEDShow</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;QuadrantsLightShowMode0(P3Controller controller, </span><span class="c8">int</span><span class="c1">&nbsp;priority)</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c8">base</span><span class="c1">(controller, priority)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript redScript = </span><span class="c8">new</span><span class="c2">&nbsp;LEDScript(p3.LEDs[</span><span class="c21">&quot;speakerLeft0&quot;</span><span class="c2">], </span><span class="c8">this</span><span class="c1">.Priority);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; redScript.AddCommand(Multimorphic.P3.Colors.Color.red, 0, 10);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript greenScript = </span><span class="c8">new</span><span class="c2">&nbsp;LEDScript(p3.LEDs[</span><span class="c21">&quot;speakerLeft0&quot;</span><span class="c2">], </span><span class="c8">this</span><span class="c1">.Priority);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; greenScript.AddCommand(Multimorphic.P3.Colors.Color.green, 0, 10);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript blueScript = </span><span class="c8">new</span><span class="c2">&nbsp;LEDScript(p3.LEDs[</span><span class="c21">&quot;speakerLeft0&quot;</span><span class="c2">], </span><span class="c8">this</span><span class="c1">.Priority);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; blueScript.AddCommand(Multimorphic.P3.Colors.Color.blue, 0, 10);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript yellowScript = </span><span class="c8">new</span><span class="c2">&nbsp;LEDScript(p3.LEDs[</span><span class="c21">&quot;speakerLeft0&quot;</span><span class="c2">], </span><span class="c8">this</span><span class="c1">.Priority);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yellowScript.AddCommand(Multimorphic.P3.Colors.Color.yellow, 0, 10);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; leftShow = </span><span class="c8">new</span><span class="c1">&nbsp;List&lt;LEDScript&gt;();</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Copy(redScript, 0, 15, </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Copy(greenScript, 15, 15, </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Copy(blueScript, 30, 15, </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Copy(yellowScript, 45, 16, </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">));</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; rightShow = Copy(leftShow, </span><span class="c21">&quot;speakerRight&quot;</span><span class="c1">);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(leftShow);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(rightShow);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;</span><span class="c8">class</span><span class="c2">&nbsp;</span><span class="c40">QuadrantsLightShowMode</span><span class="c1">&nbsp;: LEDShow</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;QuadrantsLightShowMode(P3Controller controller, </span><span class="c8">int</span><span class="c1">&nbsp;priority)</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c8">base</span><span class="c1">(controller, priority)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript redScript = </span><span class="c8">new</span><span class="c2">&nbsp;LEDScript(p3.LEDs[</span><span class="c21">&quot;speakerLeft0&quot;</span><span class="c2">], </span><span class="c8">this</span><span class="c1">.Priority);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; redScript.AddCommand(Multimorphic.P3.Colors.Color.red, 0, 10);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript greenScript = </span><span class="c8">new</span><span class="c2">&nbsp;LEDScript(p3.LEDs[</span><span class="c21">&quot;speakerLeft0&quot;</span><span class="c2">], </span><span class="c8">this</span><span class="c1">.Priority);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; greenScript.AddCommand(Multimorphic.P3.Colors.Color.green, 0, 10);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript blueScript = </span><span class="c8">new</span><span class="c2">&nbsp;LEDScript(p3.LEDs[</span><span class="c21">&quot;speakerLeft0&quot;</span><span class="c2">], </span><span class="c8">this</span><span class="c1">.Priority);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; blueScript.AddCommand(Multimorphic.P3.Colors.Color.blue, 0, 10);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LEDScript yellowScript = </span><span class="c8">new</span><span class="c2">&nbsp;LEDScript(p3.LEDs[</span><span class="c21">&quot;speakerLeft0&quot;</span><span class="c2">], </span><span class="c8">this</span><span class="c1">.Priority);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yellowScript.AddCommand(Multimorphic.P3.Colors.Color.yellow, 0, 10);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; leftShow = </span><span class="c8">new</span><span class="c1">&nbsp;List&lt;LEDScript&gt;();</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Copy(redScript, 0, 15, </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Copy(greenScript, 15, 15, </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Copy(blueScript, 30, 15, </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Copy(yellowScript, 45, 16, </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">));</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; rightShow = Copy(leftShow, </span><span class="c21">&quot;speakerRight&quot;</span><span class="c1">);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(leftShow, -10);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(rightShow, 10);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(leftShow);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(rightShow);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;</span><span class="c8">class</span><span class="c2">&nbsp;</span><span class="c40">SpinLightShowMode0</span><span class="c1">&nbsp;: LEDShow</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;SpinLightShowMode0(P3Controller controller, </span><span class="c8">int</span><span class="c1">&nbsp;priority)</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c8">base</span><span class="c1">(controller, priority)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;</span><span class="c8">ushort</span><span class="c2">[]&gt; colors = </span><span class="c8">new</span><span class="c2">&nbsp;List&lt;</span><span class="c8">ushort</span><span class="c1">[]&gt;();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; colors.AddRange(Enumerable.Repeat(Multimorphic.P3.Colors.Color.red, 10));</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; colors.AddRange(Enumerable.Repeat(Multimorphic.P3.Colors.Color.green, 10));</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; colors.AddRange(Enumerable.Repeat(Multimorphic.P3.Colors.Color.blue, 10));</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; leftShow = Spin(</span><span class="c8">this</span><span class="c2">.Priority, colors, 0.2, 8.0, </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; rightShow = Copy(leftShow, </span><span class="c21">&quot;speakerRight&quot;</span><span class="c1">);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(leftShow, -10);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(rightShow, 10);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(leftShow);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(rightShow);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;</span><span class="c8">class</span><span class="c2">&nbsp;</span><span class="c40">SpinLightShowMode</span><span class="c1">&nbsp;: LEDShow</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;SpinLightShowMode(P3Controller controller, </span><span class="c8">int</span><span class="c1">&nbsp;priority)</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c8">base</span><span class="c1">(controller, priority)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;</span><span class="c8">ushort</span><span class="c2">[]&gt; colors = </span><span class="c8">new</span><span class="c2">&nbsp;List&lt;</span><span class="c8">ushort</span><span class="c1">[]&gt;();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; colors.AddRange(Enumerable.Repeat(Multimorphic.P3.Colors.Color.red, 10));</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; colors.AddRange(Enumerable.Repeat(Multimorphic.P3.Colors.Color.green, 10));</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; colors.AddRange(Enumerable.Repeat(Multimorphic.P3.Colors.Color.blue, 10));</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; leftShow = Spin(</span><span class="c8">this</span><span class="c2">.Priority, colors, 0.2, 8.0, </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; rightShow = Copy(leftShow, </span><span class="c21">&quot;speakerRight&quot;</span><span class="c1">);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Flip(rightShow, 0);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(leftShow, -10);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(rightShow, 10);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(leftShow);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(rightShow);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c45 c25"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;</span><span class="c8">class</span><span class="c2">&nbsp;</span><span class="c40">RadarLightShowMode</span><span class="c1">&nbsp;: LEDShow</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;RadarLightShowMode(P3Controller controller, </span><span class="c8">int</span><span class="c1">&nbsp;priority)</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c8">base</span><span class="c1">(controller, priority)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;</span><span class="c8">ushort</span><span class="c2">[]&gt; colors = </span><span class="c8">new</span><span class="c2">&nbsp;List&lt;</span><span class="c8">ushort</span><span class="c1">[]&gt;();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; colors.AddRange(Enumerable.Repeat(Multimorphic.P3.Colors.Color.white, 5));</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; colors.AddRange(Enumerable.Repeat(Multimorphic.P3.Colors.Color.barelywhite, 56));</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; leftShow = Spin(</span><span class="c8">this</span><span class="c2">.Priority, colors, 0.1, 6.0, </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Flip(leftShow, 0);</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; rightShow = Copy(leftShow, </span><span class="c21">&quot;speakerRight&quot;</span><span class="c1">);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(leftShow, -10);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(rightShow, 10);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(leftShow);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(rightShow);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;</span><span class="c8">class</span><span class="c2">&nbsp;</span><span class="c40">SpinBarrierLightShowMode</span><span class="c1">&nbsp;: LEDShow</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;SpinBarrierLightShowMode(P3Controller controller, </span><span class="c8">int</span><span class="c1">&nbsp;priority)</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c8">base</span><span class="c1">(controller, priority)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;</span><span class="c8">ushort</span><span class="c2">[]&gt; colors = </span><span class="c8">new</span><span class="c2">&nbsp;List&lt;</span><span class="c8">ushort</span><span class="c1">[]&gt;() {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Multimorphic.P3.Colors.Color.red,</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Multimorphic.P3.Colors.Color.green,</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Multimorphic.P3.Colors.Color.blue,</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Multimorphic.P3.Colors.Color.orange,</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Multimorphic.P3.Colors.Color.purple</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; leftShow = </span><span class="c8">new</span><span class="c1">&nbsp;List&lt;LEDScript&gt;();</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Grow(priority, colors, 0.1, 8.0, 0, 20, 1, </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Grow(priority, colors, 0.1, 8.0, 20, 40, 1, </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Grow(priority, colors, 0.1, 8.0, 40, 60, 1, </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.Add(Clone(leftShow[0], </span><span class="c21">&quot;speakerLeft60&quot;</span><span class="c1">));</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; rightShow = Copy(leftShow, </span><span class="c21">&quot;speakerRight&quot;</span><span class="c1">);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(leftShow, -10);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(rightShow, 10);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(leftShow);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(rightShow);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;</span><span class="c8">class</span><span class="c2">&nbsp;</span><span class="c40">ScrollLightShowMode</span><span class="c1">&nbsp;: LEDShow</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c8">public</span><span class="c2">&nbsp;ScrollLightShowMode(P3Controller controller, </span><span class="c8">int</span><span class="c1">&nbsp;priority)</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="c8">base</span><span class="c1">(controller, priority)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;</span><span class="c8">ushort</span><span class="c2">[]&gt; colors = </span><span class="c8">new</span><span class="c2">&nbsp;List&lt;</span><span class="c8">ushort</span><span class="c1">[]&gt;() {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Multimorphic.P3.Colors.Color.red,</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Multimorphic.P3.Colors.Color.green,</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Multimorphic.P3.Colors.Color.blue,</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Multimorphic.P3.Colors.Color.orange,</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Multimorphic.P3.Colors.Color.purple</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; leftShow = </span><span class="c8">new</span><span class="c1">&nbsp;List&lt;LEDScript&gt;();</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Grow(priority, colors, 2, 10.0, 0, 30, 1, </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.AddRange(Grow(priority, colors, 2, 10.0, 59, 29, -1, </span><span class="c21">&quot;speakerLeft&quot;</span><span class="c1">));</span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leftShow.Add(Clone(leftShow[0], </span><span class="c21">&quot;speakerLeft60&quot;</span><span class="c1">));</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List&lt;LEDScript&gt; rightShow = Copy(leftShow, </span><span class="c21">&quot;speakerRight&quot;</span><span class="c1">);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(leftShow, -10);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rotate(rightShow, 10);</span></p><p class="c0 c5"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(leftShow);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ledScripts.AddRange(rightShow);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c22"><span class="c1">&nbsp; &nbsp; }</span></p></td></tr></table><p class="c4 c5"><span class="c9"></span></p></body></html>
