<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=fpjTOVmNbO4Lz34iLyptLROjXfSpIU_1TsQlCJ7q4WlXEixY9aqhie8CVYCrTb1E);.lst-kix_list_2-6>li:before{content:"\0025cf   "}.lst-kix_list_2-7>li:before{content:"o  "}ul.lst-kix_list_1-0{list-style-type:none}.lst-kix_list_2-4>li:before{content:"o  "}.lst-kix_list_2-5>li:before{content:"\0025aa   "}.lst-kix_list_2-8>li:before{content:"\0025aa   "}ul.lst-kix_list_2-8{list-style-type:none}ul.lst-kix_list_1-3{list-style-type:none}ul.lst-kix_list_2-2{list-style-type:none}.lst-kix_list_1-0>li:before{content:"-  "}ul.lst-kix_list_1-4{list-style-type:none}ul.lst-kix_list_2-3{list-style-type:none}ul.lst-kix_list_1-1{list-style-type:none}ul.lst-kix_list_2-0{list-style-type:none}ul.lst-kix_list_1-2{list-style-type:none}ul.lst-kix_list_2-1{list-style-type:none}ul.lst-kix_list_1-7{list-style-type:none}ul.lst-kix_list_2-6{list-style-type:none}.lst-kix_list_1-1>li:before{content:"o  "}.lst-kix_list_1-2>li:before{content:"\0025aa   "}ul.lst-kix_list_1-8{list-style-type:none}ul.lst-kix_list_2-7{list-style-type:none}ul.lst-kix_list_1-5{list-style-type:none}ul.lst-kix_list_2-4{list-style-type:none}ul.lst-kix_list_1-6{list-style-type:none}ul.lst-kix_list_2-5{list-style-type:none}.lst-kix_list_1-3>li:before{content:"\0025cf   "}.lst-kix_list_1-4>li:before{content:"o  "}.lst-kix_list_1-7>li:before{content:"o  "}.lst-kix_list_1-5>li:before{content:"\0025aa   "}.lst-kix_list_1-6>li:before{content:"\0025cf   "}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}.lst-kix_list_2-0>li:before{content:"-  "}.lst-kix_list_2-1>li:before{content:"o  "}.lst-kix_list_1-8>li:before{content:"\0025aa   "}.lst-kix_list_2-2>li:before{content:"\0025aa   "}.lst-kix_list_2-3>li:before{content:"\0025cf   "}ol{margin:0;padding:0}table td,table th{padding:0}.c22{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#e7e6e6;border-left-style:solid;border-bottom-width:1pt;width:351.7pt;border-top-color:#000000;border-bottom-style:solid}.c13{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:16.1pt;border-top-color:#000000;border-bottom-style:solid}.c34{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:151.6pt;border-top-color:#000000;border-bottom-style:solid}.c6{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:84pt;border-top-color:#000000;border-bottom-style:solid}.c7{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:321.9pt;border-top-color:#000000;border-bottom-style:solid}.c60{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:127.6pt;border-top-color:#000000;border-bottom-style:solid}.c12{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:170.1pt;border-top-color:#000000;border-bottom-style:solid}.c30{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:162.3pt;border-top-color:#000000;border-bottom-style:solid}.c39{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:351.7pt;border-top-color:#000000;border-bottom-style:solid}.c45{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:478.8pt;border-top-color:#000000;border-bottom-style:solid}.c25{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:76.4pt;border-top-color:#000000;border-bottom-style:solid}.c21{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:204.1pt;border-top-color:#000000;border-bottom-style:solid}.c32{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:298.6pt;border-top-color:#000000;border-bottom-style:solid}.c14{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Calibri";font-style:normal}.c1{padding-top:12pt;padding-bottom:8pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left;margin-right:62.6pt}.c3{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9.5pt;font-family:"Consolas";font-style:normal}.c4{padding-top:3pt;padding-bottom:3pt;line-height:1.0;orphans:2;widows:2;text-align:left;margin-right:-132.8pt}.c26{padding-top:12pt;padding-bottom:8pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left;margin-right:55.5pt}.c15{padding-top:2pt;padding-bottom:0pt;line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c31{padding-top:3pt;padding-bottom:3pt;line-height:1.0;orphans:2;widows:2;text-align:left;margin-right:-245.4pt}.c42{padding-top:12pt;padding-bottom:12pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c29{-webkit-text-decoration-skip:none;font-weight:400;text-decoration:line-through;text-decoration-skip-ink:none;font-size:9.5pt;font-family:"Consolas"}.c55{padding-top:6pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c10{padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c0{padding-top:0pt;padding-bottom:8pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c54{padding-top:0pt;padding-bottom:6pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c8{padding-top:0pt;padding-bottom:0pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c52{padding-top:12pt;padding-bottom:8pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c57{padding-top:12pt;padding-bottom:0pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c53{color:#2f5496;font-weight:400;font-size:16pt;font-family:"Calibri"}.c35{font-size:8pt;font-family:"Consolas";color:#a31515;font-weight:400}.c19{color:#000000;font-weight:400;font-size:9pt;font-family:"Consolas"}.c5{font-size:8pt;font-family:"Consolas";color:#000000;font-weight:400}.c11{font-size:8pt;font-family:"Consolas";color:#0000ff;font-weight:400}.c46{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#0563c1;text-decoration:underline}.c40{color:#000000;font-weight:400;font-size:10pt;font-family:"Consolas"}.c36{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c47{border-spacing:0;border-collapse:collapse;margin-right:auto}.c23{color:#2f5496;font-weight:400;font-size:13pt;font-family:"Calibri"}.c17{margin-left:-5.4pt;border-spacing:0;border-collapse:collapse;margin-right:auto}.c27{font-family:"Times New Roman";font-style:italic;font-weight:400}.c48{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c33{font-size:9.5pt;font-family:"Consolas";font-weight:400}.c16{text-decoration:none;vertical-align:baseline;font-style:normal}.c58{font-size:9pt;font-family:"Consolas";font-weight:400}.c41{color:#000000;vertical-align:baseline;font-style:normal}.c63{font-weight:400;font-size:8pt;font-family:"Calibri"}.c9{margin-left:36pt;margin-right:0.2pt}.c49{padding:0;margin:0}.c64{color:inherit;text-decoration:inherit}.c37{margin-left:36pt;padding-left:0pt}.c18{margin-right:62.6pt}.c20{height:11pt}.c28{margin-right:-21.1pt}.c44{margin-right:-28.1pt}.c24{margin-right:48.5pt}.c51{margin-right:0.2pt}.c38{background-color:#e7e6e6}.c61{text-indent:36pt}.c59{page-break-after:avoid}.c2{height:0pt}.c56{background-color:#ffffff}.c62{color:#000000}.c43{margin-left:36pt}.c50{margin-right:13.1pt}.title{padding-top:24pt;color:#000000;font-weight:700;font-size:36pt;padding-bottom:6pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:18pt;color:#666666;font-size:24pt;padding-bottom:4pt;font-family:"Georgia";line-height:1.0791666666666666;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Calibri"}p{margin:0;color:#000000;font-size:11pt;font-family:"Calibri"}h1{padding-top:12pt;color:#2f5496;font-size:16pt;padding-bottom:0pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:2pt;color:#2f5496;font-size:13pt;padding-bottom:0pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:14pt;color:#000000;font-weight:700;font-size:14pt;padding-bottom:4pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:12pt;color:#000000;font-weight:700;font-size:12pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:11pt;color:#000000;font-weight:700;font-size:11pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:10pt;color:#000000;font-weight:700;font-size:10pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}</style></head><body class="c48 doc-content"><h1 class="c57 c59"><span class="c16 c53">Heist BallPaths</span></h1><p class="c0"><span class="c14">This tech tip examines the BallPaths specific to the Heist module. We will see BallPaths work fine at runtime but the module definition file has problems in Heist 1.2.0.0</span></p><h2 class="c15"><span class="c23 c16">Overview</span></h2><p class="c0 c28"><span>BallPaths in general are documented in &ldquo;P3-SDK: Creating Your Playfield Module&rdquo; at </span><a class="c46" href="file:///C:/P3/P3_SDK_V0.8/P3SampleApp/Documentation/html/_creating_playfield_module.html#BallPaths">file:///C:/P3/P3_SDK_V0.8/P3SampleApp/Documentation/html/_creating_playfield_module.html#BallPaths</a><span>&nbsp; and &ldquo;P3-SDK: Controlling Physical Features&rdquo; at </span><a class="c46" href="file:///C:/P3/P3_SDK_V0.8/P3SampleApp/Documentation/html/_physical_features.html#DetectingShots">file:///C:/P3/P3_SDK_V0.8/P3SampleApp/Documentation/html/_physical_features.html#DetectingShots</a></p><p class="c0"><span class="c14">A BallPath describes a ball trajectory on a module. This abstraction lets the module driver report which shots have been made. Conversely, the application can choose which BallPaths are active, therefore indirectly controlling the diverters and similar mechs that affect the ball trajectory.</span></p><p class="c0"><span class="c14">BallPaths were introduced with the Heist module and have been a standard feature of every module since then. Older modules were retrofitted in later versions, leaving only CL which does not support BallPaths at the moment.</span></p><h2 class="c15"><span class="c23 c16">Diverters</span></h2><p class="c0 c18"><span class="c14">The Heist module has 4 diverters: leftRampDiverter, outerLoopDiverter, ballLock and jailServo. They are implemented as servos which can be in one of two positions: up or down.</span></p><ul class="c49 lst-kix_list_1-0 start"><li class="c8 c37 c18 li-bullet-0"><span class="c14">leftRampDiverter chooses between returning to the left inlane or dropping in a hole behind the casino reaching the trough through a subway.</span></li><li class="c8 c37 c18 li-bullet-0"><span class="c14">outerLoopDiverter chooses between the back hole or the pop area when dropping from the back magnet.</span></li><li class="c8 c18 c37 li-bullet-0"><span class="c14">ballLock blocks the ball on the right wireform when down or lets the ball fall through to the right inlane when up.</span></li><li class="c0 c37 c18 li-bullet-0"><span class="c14">jailServo opens or closes the gate in front of the jail hole.</span></li></ul><h2 class="c15"><span class="c23 c16">Diverters Low-Level API</span></h2><p class="c0 c51"><span class="c14">HeistModuleCapabilities.cs describes a low-level API for two-position servos. We show the diverter API here but keep in mind the application would typically control the diverters through BallPaths instead. </span></p><p class="c0 c18"><span class="c14">The file HeistModuleCapabilities.cs is located in %HOMEDRIVE%%HOMEPATH%\.multimorphic\P3\ModuleDrivers\Heist\1.2.0.0\HeistModuleCapabilities.cs </span></p><p class="c0 c18"><span>This API is not applicable to the range servos like craneRotation (sweep) and cranePitch. See the </span><span class="c46"><a class="c64" href="HeistCrane.html">Heist Crane Tech Tip</a></span><span class="c14">&nbsp;for more information on the crane servos.</span></p><p class="c0 c18"><span class="c14">In HeistModuleCapabilities, the events are documented with statements like:</span></p><p class="c0 c18 c61"><span class="c40 c16">PostModeEventToModes(&quot;Evt_ServoUp_&quot; + servo.Name, true);</span></p><p class="c0 c18"><span class="c14">The intention is that servo is a variable initialized like this:</span></p><p class="c0 c18"><span class="c40 c16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Servo servo = p3.Servos[&quot;jailServo&quot;];</span></p><p class="c0 c18"><span class="c14">The Servo object is unnecessary. All you need is the servo name which is constant in the code above.</span></p><p class="c0 c18"><span class="c14">It is simpler to skip the servo variable and write something like this instead:</span></p><p class="c0 c18 c61"><span class="c40 c16">PostModeEventToModes(&quot;Evt_ServoUp_jailServo&quot;, true);</span></p><p class="c0 c18"><span class="c14">The API defines these events to alter the state of the two-position servos:</span></p><a id="t.b1e3c5514fdde21abaebbd50b64cc4c6dc62894a"></a><a id="t.0"></a><table class="c47"><tr class="c2"><td class="c34 c38" colspan="1" rowspan="1"><p class="c31"><span class="c14">Event</span></p></td><td class="c22" colspan="1" rowspan="1"><p class="c4"><span class="c14">Description</span></p></td></tr><tr class="c2"><td class="c34" colspan="1" rowspan="1"><p class="c31"><span>Evt_ServoUp_</span><span class="c27">ServoName</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c4"><span class="c14">Move the servo up.</span></p></td></tr><tr class="c2"><td class="c34" colspan="1" rowspan="1"><p class="c31"><span>Evt_ServoDown_</span><span class="c27">ServoName</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c4"><span class="c14">Move the servo down.</span></p></td></tr><tr class="c2"><td class="c34" colspan="1" rowspan="1"><p class="c31"><span>Evt_ServoAlternate_</span><span class="c27">ServoName</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c4"><span class="c14">Move the servo up if currently down, move down if currently up.</span></p></td></tr><tr class="c2"><td class="c34" colspan="1" rowspan="1"><p class="c31"><span>Evt_ServoIterate_</span><span class="c27">ServoName</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c4"><span class="c14">Alternate the servo every 2sec until another event for that servo is posted.</span></p></td></tr></table><p class="c1"><span>Where </span><span class="c27">ServoName </span><span class="c14">is leftRampDiverter, outerLoopDiverter, ballLock or jailServo. The event data is not used, so you can pass true or null. It does not matter.</span></p><p class="c1"><span>The Evt_ServoUp_</span><span class="c27">ServoName</span><span>&nbsp;and Evt_ServoDown_</span><span class="c27">ServoName</span><span class="c14">&nbsp;events are the most useful.</span></p><p class="c1"><span>The Evt_ServoAlternate_</span><span class="c27">ServoName </span><span class="c14">event could be useful in ball search, though that is the module driver responsibility.</span></p><p class="c1"><span>I don&rsquo;t envision Evt_ServoIterate_</span><span class="c27">ServoName </span><span class="c14">being used in an application, except maybe in diagnostics.</span></p><p class="c1"><span class="c14">The actual values used to move the servo up or down are determined by GameAttributes that appear as settings in the Service Menu under Settings/Mechs/Diverters.</span></p><a id="t.284d26b2eaace1e6aefbb575761a76be74c6d2c1"></a><a id="t.1"></a><table class="c47"><tr class="c2"><td class="c34 c38" colspan="1" rowspan="1"><p class="c31"><span class="c14">GameAttribute</span></p></td><td class="c7 c38" colspan="1" rowspan="1"><p class="c4"><span class="c14">Description</span></p></td></tr><tr class="c2"><td class="c34" colspan="1" rowspan="1"><p class="c31"><span class="c14">RightRampLockLow</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c4"><span class="c14">Value to move ballLock servo down</span></p></td></tr><tr class="c2"><td class="c34" colspan="1" rowspan="1"><p class="c31"><span class="c14">RightRampLockHigh</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c4"><span class="c14">Value to move ballLock servo up</span></p></td></tr><tr class="c2"><td class="c34" colspan="1" rowspan="1"><p class="c31"><span class="c14">LeftRampDiverterLow</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c4"><span class="c14">Value to move leftRampDiverter servo down</span></p></td></tr><tr class="c2"><td class="c34" colspan="1" rowspan="1"><p class="c31"><span class="c14">LeftRampDiverterHigh</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c4"><span class="c14">Value to move leftRampDiverter servo up</span></p></td></tr><tr class="c2"><td class="c34" colspan="1" rowspan="1"><p class="c31"><span class="c14">OuterLoopDiverterLow</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c4"><span class="c14">Value to move outerLoopDiverter servo down</span></p></td></tr><tr class="c2"><td class="c34" colspan="1" rowspan="1"><p class="c31"><span class="c14">OuterLoopDiverterHigh</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c4"><span class="c14">Value to move outerLoopDiverter servo up</span></p></td></tr><tr class="c2"><td class="c34" colspan="1" rowspan="1"><p class="c31"><span class="c14">JailLow</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c4"><span class="c14">Value to move jailServo servo down</span></p></td></tr><tr class="c2"><td class="c34" colspan="1" rowspan="1"><p class="c31"><span class="c14">JailHigh</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c4"><span class="c14">Value to move jailServo servo up</span></p></td></tr></table><p class="c26"><span class="c14">The application can read those settings like this:</span></p><p class="c0 c50"><span class="c58">int jailLow = data.GetGameAttributeValue(&quot;PlayfieldModuleLocalSettings&quot;, &quot;</span><span>JailLow</span><span class="c19 c16">&quot;).ToInt();</span></p><p class="c0"><span class="c14">though this is unlikely since the API takes care of this.</span></p><p class="c0 c24"><span class="c14">When the module driver receives one of the 4 events above, it sends a notification event describing how the servo is about to move. The event data is null. The event names depend on the servo name as follows:</span></p><a id="t.6f65f8c7a7bb4afe55d90de86c8616b026fc32fc"></a><a id="t.2"></a><table class="c47"><tr class="c2"><td class="c38 c60" colspan="1" rowspan="1"><p class="c31"><span class="c14">Servo</span></p></td><td class="c12 c38" colspan="1" rowspan="1"><p class="c4"><span class="c14">Moving Down Event</span></p></td><td class="c12 c38" colspan="1" rowspan="1"><p class="c4"><span class="c14">Moving Up Event</span></p></td></tr><tr class="c2"><td class="c60" colspan="1" rowspan="1"><p class="c31"><span class="c14">ballLock</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c4"><span class="c14">Evt_RightRampLockMovingDown</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c4"><span class="c14">Evt_RightRampLockMovingUp</span></p></td></tr><tr class="c2"><td class="c60" colspan="1" rowspan="1"><p class="c31"><span class="c14">leftRampDiverter</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c4"><span class="c14">Evt_LeftRampServoMovingDown</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c4"><span class="c14">Evt_LeftRampServoMovingUp</span></p></td></tr><tr class="c2"><td class="c60" colspan="1" rowspan="1"><p class="c31"><span class="c14">outerLoopDiverter</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c4"><span class="c14">Evt_OuterLoopDiverterMovingDown</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c4"><span class="c14">Evt_OuterLoopDiverterMovingUp</span></p></td></tr><tr class="c2"><td class="c60" colspan="1" rowspan="1"><p class="c31"><span class="c14">jailServo</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c4"><span class="c14">Evt_JailServoMovingDown</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c4"><span class="c14">Evt_JailServoMovingUp</span></p></td></tr></table><p class="c24 c52"><span>When the servo movement is done, the module driver sends an Evt_ServoParked_</span><span class="c27">ServoName</span><span class="c14">&nbsp;event. The event data is null for this event.</span></p><p class="c52"><span class="c14">For example, when sending Evt_ServoDown_jailServo, these events will be sent as a response:</span></p><p class="c57 c18 c61"><span class="c14">Evt_JailServoMovingDown</span></p><p class="c0 c18 c61"><span class="c14">Evt_ServoParked_jailServo</span></p><h2 class="c15"><span class="c23 c16">BallPathEntrances</span></h2><p class="c0 c44"><span class="c14">HeistModuleCapabilities.cs lists the valid BallPath entrance names for the Heist module:</span></p><p class="c10"><span class="c3">string[] entrances = { &quot;LeftOuterLoop&quot;, &quot;LeftRamp&quot;, &quot;SideLoop&quot;, &quot;LeftInnerLoop&quot;, &quot;Jail&quot;, &quot;RightInnerLoop&quot;, &quot;RightRamp&quot;, &quot;RightOuterLoop&quot;, &quot;Drain&quot; };</span></p><p class="c0 c20"><span class="c3"></span></p><p class="c0"><span class="c14">HeistModuleCapabilities.cs appears to be a C# source file but it is not compiled and linked in the Heist module driver. In your application, the list of valid BallPath entrance names is given by the BallPathEntrances enumeration instead. The two lists are identical.</span></p><p class="c57"><span class="c3">namespace Multimorphic.P3.Modules.Heist;</span></p><p class="c8"><span class="c3">public enum BallPathEntrances</span></p><p class="c8"><span class="c3">{</span></p><p class="c8"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; LeftOuterLoop,</span></p><p class="c8"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; LeftRamp,</span></p><p class="c8"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; SideLoop,</span></p><p class="c8"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; LeftInnerLoop,</span></p><p class="c8"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; Jail,</span></p><p class="c8"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; RightInnerLoop,</span></p><p class="c8"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; RightRamp,</span></p><p class="c8"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; RightOuterLoop,</span></p><p class="c8"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; Drain</span></p><p class="c8"><span class="c3">}</span></p><p class="c8 c20"><span class="c3"></span></p><h2 class="c15"><span class="c23 c16">BallPathExits</span></h2><p class="c0 c44"><span class="c14">HeistModuleCapabilities.cs lists the valid BallPath exit names for the Heist module:</span></p><p class="c0"><span class="c3">string[] exits = { &quot;Passthrough&quot;, &quot;Hole&quot;, &quot;Divert&quot;, &quot;Lock&quot;, &quot;InlaneL&quot;, &quot;InlaneR&quot;, &quot;OuterLoop&quot;, &quot;InnerLoop&quot;, &quot;Jail&quot;, &quot;LoadCrane&quot; };</span></p><p class="c0"><span class="c14">HeistModuleCapabilities.cs is not compiled and linked in the Heist module driver. In your application the list of valid BallPath exit names is given by the BallPathExits enumeration instead. The two lists are identical.</span></p><p class="c57"><span class="c3">namespace Multimorphic.P3.Modules.Heist;</span></p><p class="c8"><span class="c3">public enum BallPathExits</span></p><p class="c8"><span class="c3">{</span></p><p class="c8"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; Passthrough,</span></p><p class="c8"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; Hole,</span></p><p class="c8"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; Divert,</span></p><p class="c8"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; Lock,</span></p><p class="c8"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; InlaneL,</span></p><p class="c8"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; InlaneR,</span></p><p class="c8"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; OuterLoop,</span></p><p class="c8"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; InnerLoop,</span></p><p class="c8"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; Jail,</span></p><p class="c8"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; LoadCrane</span></p><p class="c0"><span class="c3">}</span></p><h2 class="c15"><span class="c23 c16">BallPathDefinitions</span></h2><p class="c0"><span class="c14">The module definition file for Heist is located in %HOMEDRIVE%%HOMEPATH%\.multimorphic\P3\ModuleDrivers\Heist\1.2.0.0\Heist.json</span></p><p class="c0"><span class="c14">Heist.json lists the BallPaths supported by that module driver.</span></p><p class="c0"><span class="c14">For example, here is one BallPathDefinition within the array:</span></p><p class="c8"><span class="c19 c16">&nbsp; &quot;BallPaths&quot;: [</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; ...</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; {</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &quot;Name&quot;: &quot;LeftOuterLoopToHole&quot;,</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &quot;Tags&quot;: [&quot;Loop&quot;],</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &quot;ExitType&quot;: &quot;Hole&quot;,</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &quot;EntranceName&quot;: &quot;LeftOuterLoop&quot;,</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &quot;ExitName&quot;: &quot;Hole&quot;,</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &quot;StartedEvent&quot;: &quot;Evt_LeftOuterLoopStarted&quot;,</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &quot;CompletedEvent&quot;: &quot;Evt_Shot_LeftOuterLoopToHole&quot;,</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &quot;EntrancePosition&quot;: [2,0,0],</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &quot;ExitPosition&quot;: [NaN,NaN,NaN],</span></p><p class="c8"><span class="c19 c16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;EntranceLEDs&quot;: [[&quot;garageBldg&quot;,&quot;garageSign&quot;,&quot;garageDown&quot;,&quot;mmiSign&quot;,&quot;mmi0&quot;,&quot;mmi1&quot;,&quot;mmi2&quot;,&quot;mmi3&quot;,&quot;mmi4&quot;,&quot;mmi5&quot;,&quot;mmi6&quot;,&quot;mmi7&quot;,&quot;bnnSign&quot;,&quot;bnn0&quot;,&quot;bnn1&quot;,&quot;bnn2&quot;,&quot;bnn3&quot;],],</span></p><p class="c8"><span class="c19 c16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ExitLEDs&quot;: [[&quot;&quot;],],</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; },</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; ...</span></p><p class="c8"><span class="c19 c16">&nbsp; ]</span></p><p class="c8 c20"><span class="c19 c16"></span></p><p class="c0 c18"><span class="c14">The application can access this BallPathDefinition like this:</span></p><p class="c0 c9"><span class="c40 c16">BallPathDefinition ballPath = p3.BallPaths[&quot;LeftOuterLoopToHole&quot;];</span></p><p class="c0 c18"><span class="c14">The application can loop over all BallPathDefinitions like this:</span></p><p class="c8 c18 c43"><span class="c16 c40">foreach (BallPathDefinition ballPath in p3.BallPaths.Values) {</span></p><p class="c8 c18 c43"><span class="c40 c16">&nbsp; &nbsp;// do something ...</span></p><p class="c0 c18 c43"><span class="c40 c16">}</span></p><h2 class="c15"><span class="c16 c23">BallPath API</span></h2><p class="c0"><span class="c14">HeistModuleCapabilities.cs documents the BallPath API.</span></p><p class="c0"><span class="c14">The application can send the Evt_AddPathByName event to activate a specific BallPath. The BallPath is defined by the entrance and exit names, not by the name of the BallPathDefinition. The module driver reacts by positioning the diverters to direct the ball from the entrance to the exit.</span></p><p class="c0"><span class="c19 c16">PostModeEventToModes(&quot;Evt_AddPathByName&quot;, new List&lt;string&gt;{ballPathEntrance, ballPathExit});</span></p><p class="c0"><span class="c14">For example, to activate the BallPath LeftOuterLoopToHole, the application can send:</span></p><p class="c0"><span class="c19 c16">PostModeEventToModes(&quot;Evt_AddPathByName&quot;, new List&lt;string&gt;{&quot;LeftOuterLoop&quot;, &quot;Hole&quot;});</span></p><p class="c0"><span class="c14">There is no notion of removing a BallPath. Adding a BallPath for an entrance automatically replaces the current BallPath for that entrance.</span></p><p class="c0"><span class="c14">It is possible to activate multiple BallPaths by sending the Evt_AddPathsByName. The event argument is a list of lists.</span></p><p class="c8"><span class="c19 c16">PostModeEventToModes(&quot;Evt_AddPathsByName&quot;, new List&lt;List&lt;string&gt;&gt; {</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp;new List&lt;string&gt; {ballPathEntrance1, ballPathExit1},</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &hellip;,</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp;new List&lt;string&gt; {ballPathEntranceN, ballPathExitN}</span></p><p class="c0"><span class="c19 c16">});</span></p><p class="c0"><span class="c14">For example, to active the BallPaths LeftOuterLoopToHole and SideLoopToHole, the application can send:</span></p><p class="c8"><span class="c19 c16">PostModeEventToModes(&quot;Evt_AddPathsByName&quot;, new List&lt;List&lt;string&gt;&gt; {</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; new List&lt;string&gt; {&quot;LeftOuterLoop&quot;, &quot;Hole&quot;},</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; new List&lt;string&gt; {&quot;SideLoop&quot;, &quot;Hole&quot;}</span></p><p class="c0"><span class="c19 c16">});</span></p><p class="c0"><span class="c14">This is exactly the same as adding each BallPath one by one.</span></p><p class="c0"><span class="c14">HeistModuleCapabilities.cs documents two more events taking a BallPath or an array of BallPaths:</span></p><p class="c8"><span class="c19 c16">PostModeEventToModes(&quot;Evt_AddPath&quot;, Multimorphic.P3.Modules.Heist.BallPath);</span></p><p class="c0"><span class="c19 c16">PostModeEventToModes(&quot;Evt_AddPaths&quot;, Multimorphic.P3.Modules.Heist.BallPath[]);</span></p><p class="c0"><span class="c14">These events are misleading because the event argument is not a BallPathDefinition like p3.BallPaths[&quot;LeftOuterLoopToHole&quot;]. Instead, the event argument is one or more Multimorphic.P3.Modules.Heist.BallPath instances. These objects are internal to the module driver with no way to access them. You can ignore those two events. They should not be documented.</span></p><p class="c0"><span class="c14">Note: The BallPathDefinition is not used as an object in any P3 SDK calls. The purpose of the BallPathDefinition is to give access to its field values.</span></p><p class="c0"><span class="c14">The application can reset all BallPaths to the default. This should always select the PassThrough exit unless it physically does not make sense (e.g. Jail).</span></p><p class="c0"><span class="c19 c16">PostModeEventToModes(&quot;Evt_ResetAllPaths&quot;, &quot;&quot;);</span></p><p class="c0"><span class="c14">There is no API to query which BallPaths are currently active. Instead, the application can cache the current set of active BallPaths under a key, temporary change the BallPaths and later restore the previous set of Ballpaths from the cache using the key.</span></p><p class="c0"><span class="c14">The key is an arbitrary string chosen by the application. There can be any number of keys. The cache is not permanent between execution runs.</span></p><p class="c0"><span class="c14">To save the current BallPath configuration under the key, the application can send:</span></p><p class="c0"><span class="c19 c16">PostModeEventToModes(&quot;Evt_CachePaths&quot;, key);</span></p><p class="c0"><span class="c14">To restore the BallPath configuration stored under the key, the application can send:</span></p><p class="c0"><span class="c19 c16">PostModeEventToModes(&quot;Evt_ApplyCachedPaths&quot;, key);</span></p><h2 class="c15"><span class="c23 c16">Valid BallPaths</span></h2><p class="c0"><span class="c14">The Heist module has 9 BallPathEntrances and 10 BallPathExits.</span></p><p class="c0"><span class="c14">To find exactly which combinations are valid, we can try them all. In this code snippet, we log at error level to make it easier to find our tracing logs, these are obviously not errors.</span></p><a id="t.06b47d58b113b2ce868d3b85da58914818d79351"></a><a id="t.3"></a><table class="c17"><tr class="c2"><td class="c45" colspan="1" rowspan="1"><p class="c55"><span class="c5 c16">using Multimorphic.P3App.Logging;</span></p><p class="c10"><span class="c5 c16">...</span></p><p class="c10 c20"><span class="c5 c16"></span></p><p class="c10"><span class="c11">string</span><span class="c5">[] entrances = { </span><span class="c35">&quot;LeftOuterLoop&quot;</span><span class="c5">, </span><span class="c35">&quot;LeftRamp&quot;</span><span class="c5">, </span><span class="c35">&quot;SideLoop&quot;</span><span class="c5">, </span><span class="c35">&quot;LeftInnerLoop&quot;</span><span class="c5">, </span><span class="c35">&quot;Jail&quot;</span><span class="c5 c16">,</span></p><p class="c10"><span class="c5">&nbsp; &nbsp; </span><span class="c35">&quot;RightInnerLoop&quot;</span><span class="c5">, </span><span class="c35">&quot;RightRamp&quot;</span><span class="c5">, </span><span class="c35">&quot;RightOuterLoop&quot;</span><span class="c5">, </span><span class="c35">&quot;Drain&quot;</span><span class="c5 c16">&nbsp;};</span></p><p class="c10"><span class="c11">string</span><span class="c5">[] exits = { </span><span class="c35">&quot;Passthrough&quot;</span><span class="c5">, </span><span class="c35">&quot;Hole&quot;</span><span class="c5">, </span><span class="c35">&quot;Divert&quot;</span><span class="c5">, </span><span class="c35">&quot;Lock&quot;</span><span class="c5">, </span><span class="c35">&quot;InlaneL&quot;</span><span class="c5">, </span><span class="c35">&quot;InlaneR&quot;</span><span class="c5">, </span><span class="c35">&quot;OuterLoop&quot;</span><span class="c5 c16">,\</span></p><p class="c10"><span class="c5">&nbsp; &nbsp; </span><span class="c35">&quot;InnerLoop&quot;</span><span class="c5">, </span><span class="c35">&quot;Jail&quot;</span><span class="c5">, </span><span class="c35">&quot;LoadCrane&quot;</span><span class="c5 c16">&nbsp;};</span></p><p class="c10 c20"><span class="c5 c16"></span></p><p class="c10"><span class="c11">foreach</span><span class="c5">&nbsp;(</span><span class="c11">string</span><span class="c5">&nbsp;entrance </span><span class="c11">in</span><span class="c5 c16">&nbsp;entrances)</span></p><p class="c10"><span class="c5 c16">{</span></p><p class="c10"><span class="c11">&nbsp; &nbsp; foreach</span><span class="c5">&nbsp;(</span><span class="c11">string</span><span class="c5">&nbsp;exit </span><span class="c11">in</span><span class="c5 c16">&nbsp;exits)</span></p><p class="c10"><span class="c5 c16">&nbsp; &nbsp; {</span></p><p class="c10"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; Logger.LogError(LogCategories.Game, entrance + </span><span class="c35">&quot; TO &quot;</span><span class="c5 c16">&nbsp;+ exit);</span></p><p class="c10"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; PostModeEventToModes(</span><span class="c35">&quot;Evt_AddPathByName&quot;</span><span class="c5">, </span><span class="c11">new</span><span class="c5">&nbsp;List&lt;</span><span class="c11">string</span><span class="c5 c16">&gt; { entrance, exit });</span></p><p class="c10"><span class="c5 c16">&nbsp; &nbsp; }</span></p><p class="c54"><span class="c16 c62 c63">}</span></p></td></tr></table><p class="c52"><span class="c14">If the BallPath is invalid, the module driver will log an error similar to:</span></p><p class="c0"><span class="c19 c16">BallPath handler &lt;className&gt; pri=162 active but does not explicitly support requested exit &lt;exitName&gt;, entrance: &lt;entranceName&gt;</span></p><p class="c0"><span class="c14">This table lists the valid BallPaths in Heist:</span></p><a id="t.c115f0b056134f6abd3ce549e4a7e6809f7843df"></a><a id="t.4"></a><table class="c17"><tr class="c2"><td class="c13 c38" colspan="1" rowspan="1"><p class="c42 c20"><span class="c3"></span></p></td><td class="c6 c38" colspan="1" rowspan="1"><p class="c42"><span class="c3">EntranceName</span></p></td><td class="c25 c38" colspan="1" rowspan="1"><p class="c42"><span class="c3">ExitName</span></p></td><td class="c32 c38" colspan="1" rowspan="1"><p class="c42"><span class="c3">Destination</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10 c20"><span class="c3"></span></p></td><td class="c6" colspan="1" rowspan="4"><p class="c10"><span class="c3">LeftOuterLoop</span></p><p class="c10 c20"><span class="c3"></span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Passthrough</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Right outer loop</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10 c20"><span class="c3"></span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Hole</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Back Hole</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10 c20"><span class="c3"></span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Divert</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Pop area</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Lock</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Back magnet</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10 c20"><span class="c3"></span></p></td><td class="c6" colspan="1" rowspan="10"><p class="c10"><span class="c3">LeftRamp</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Passthrough</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Left inlane</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10 c20"><span class="c3"></span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Hole</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Casino Hole</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Divert</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Casino Hole</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Lock</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Casino Hole, launch to wireform lock</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">InlaneL</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Casino Hole, launch to left inlane</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">InlaneR</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Casino Hole, launch to right inlane</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">OuterLoop</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Casino Hole, launch from right outer loop</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">InnerLoop</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Casino Hole, launch from left inner loop</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Jail</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Casino Hole, launch from jail</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">LoadCrane</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Casino Hole, launch to wireform lock, crane pickup</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10 c20"><span class="c3"></span></p></td><td class="c6" colspan="1" rowspan="4"><p class="c10"><span class="c3">SideLoop</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Passthrough</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Right outer loop</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10 c20"><span class="c3"></span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Hole</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Back hole</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Divert</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Pop area</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Lock</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Back Magnet</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10 c20"><span class="c3"></span></p></td><td class="c6" colspan="1" rowspan="4"><p class="c10"><span class="c3">LeftInnerLoop</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Passthrough</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Right inner loop</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10 c20"><span class="c3"></span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Hole</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Jail hole</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Divert</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Jail hole</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Lock</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Jail magnet</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c6" colspan="1" rowspan="2"><p class="c10"><span class="c3">Jail</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Passthrough</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Jail hole</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10 c20"><span class="c3"></span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Hole</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Jail hole</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10 c20"><span class="c3"></span></p></td><td class="c6" colspan="1" rowspan="4"><p class="c10"><span class="c3">RightInnerLoop</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Passthrough</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Left inner loop</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10 c20"><span class="c3"></span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Hole</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Jail hole</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Divert</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Jail hole</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Lock</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Jail magnet</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10 c20"><span class="c3"></span></p></td><td class="c6" colspan="1" rowspan="4"><p class="c10"><span class="c3">RightRamp</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Passthrough</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Right inlane</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Divert</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Wireform lock</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Lock</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Wireform lock</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">InlaneR</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Right inlane</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10 c20"><span class="c3"></span></p></td><td class="c6" colspan="1" rowspan="4"><p class="c10"><span class="c3">RightOuterLoop</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Passthrough</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Left outer loop</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10 c20"><span class="c3"></span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Hole</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Back hole</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Divert</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Pop area</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Lock</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Back magnet</span></p></td></tr><tr class="c2"><td class="c13" colspan="1" rowspan="1"><p class="c10"><span class="c3">*</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">Drain</span></p></td><td class="c25" colspan="1" rowspan="1"><p class="c10"><span class="c3">Passthrough</span></p></td><td class="c32" colspan="1" rowspan="1"><p class="c10"><span class="c3">Drain</span></p></td></tr></table><p class="c0 c20"><span class="c3"></span></p><p class="c0"><span class="c14">* means this BallPath can be added but is not listed in the module definition file.</span></p><p class="c0"><span class="c14">As you can see, there are many BallPaths missing in the module definition file.</span></p><p class="c0"><span class="c14">The Heist module is special because 7 out of 8 shots have the ability to gobble the ball and make it disappear. The Heist application takes advantage of this to implement the inverse of add-a-ball: during some multiballs, jackpots remove a ball until there is only one ball in play, ending the multiball.</span></p><p class="c0"><span class="c14">The BallPaths that end in a magnet lock must be used with caution. The Heist playfield magnets do not have active cooling and they can be easily damaged if they hold the ball for too long. The BallPath can remain active indefinitely because the magnet is only energized when it senses the ball presence. What needs caution is how long the ball is physically locked on the magnet.</span></p><p class="c0"><span class="c14">The crane magnet is smaller and can withstand suspending the ball for longer but not for an unlimited amount of time. As a rough guideline, suspending the ball for 30 seconds or less should be safe.</span></p><h2 class="c15"><span class="c23 c16">BallPaths in the Module Definition File</span></h2><p class="c0"><span class="c14">The module definition file lists only valid BallPaths, so let&rsquo;s try them all. In this code snippet, we log at error level to make it easier to find our tracing logs, these are obviously not errors.</span></p><a id="t.59bdc4f4da294900f1055e4736c33e018bf7418e"></a><a id="t.5"></a><table class="c17"><tr class="c2"><td class="c45" colspan="1" rowspan="1"><p class="c55"><span class="c5 c16">using Multimorphic.P3App.Logging;</span></p><p class="c10"><span class="c5 c16">...</span></p><p class="c10 c20"><span class="c5 c16"></span></p><p class="c10"><span class="c11">foreach</span><span class="c5">&nbsp;(BallPathDefinition ballPathDef </span><span class="c11">in</span><span class="c5 c16">&nbsp;p3.BallPaths.Values)</span></p><p class="c10"><span class="c5 c16">{</span></p><p class="c10"><span class="c5">&nbsp; &nbsp; Logger.LogError(LogCategories.Game, ballPath.EntranceName + </span><span class="c35">&quot; TO &quot;</span><span class="c5 c16">&nbsp;+</span></p><p class="c10"><span class="c5">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ballPath.ExitName + </span><span class="c35">&quot; &nbsp;(&quot;</span><span class="c5">&nbsp;+ ballPath.Name + </span><span class="c35">&quot;)&quot;</span><span class="c5 c16">);</span></p><p class="c10"><span class="c5">&nbsp; &nbsp; PostModeEventToModes(</span><span class="c35">&quot;Evt_AddPathByName&quot;</span><span class="c5">, </span><span class="c11">new</span><span class="c5">&nbsp;List&lt;</span><span class="c11">string</span><span class="c5 c16">&gt; {</span></p><p class="c10"><span class="c5 c16">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ballPath.EntranceName, ballPath.ExitName });</span></p><p class="c54"><span class="c5">}</span></p></td></tr></table><p class="c0 c20"><span class="c14"></span></p><p class="c0"><span class="c14">The table below lists the results. There are many ExitNames that are invalid. From the completed event we can guess which ExitName was intended. There is even a whole BallPath that is documented but is not implemented by the module driver.</span></p><p class="c0"><span class="c29">BallPath</span><span class="c3">&nbsp;means this BallPath is documented but it is not implemented.</span></p><p class="c0"><span class="c29 c62">ExitName</span><span class="c3">&nbsp;means this is a descriptive name, the real exit name used to add the BallPath is given below it.</span></p><a id="t.86fdcb7f4ea98f16864984b2ad3b077c5b8474b3"></a><a id="t.6"></a><table class="c17"><tr class="c2"><td class="c30 c38" colspan="1" rowspan="1"><p class="c42"><span class="c3">BallPath Name</span></p></td><td class="c6 c38" colspan="1" rowspan="1"><p class="c42"><span class="c3">EntranceName</span></p></td><td class="c6 c38" colspan="1" rowspan="1"><p class="c42"><span class="c3">ExitName</span></p></td><td class="c21 c38" colspan="1" rowspan="1"><p class="c42"><span class="c3">CompletedEvent</span></p></td></tr><tr class="c2"><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c3">LeftOuterLoopToRightOuterLoop</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">LeftOuterLoop</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c29 c41">RightOuterLoop</span></p><p class="c10"><span class="c3">Passthrough</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c10"><span class="c3">Evt_Shot_LeftOuterLoopToPassthrough</span></p></td></tr><tr class="c2"><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c3">LeftOuterLoopToHole</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">LeftOuterLoop</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">Hole</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c10"><span class="c3">Evt_Shot_LeftOuterLoopToHole</span></p></td></tr><tr class="c2"><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c29 c41">LeftOuterLoopToSideLoop</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c29 c41">LeftOuterLoop</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c29 c41">SideLoop</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c10"><span class="c29 c41">Evt_Shot_LeftOuterLoopToSideLoop</span></p></td></tr><tr class="c2"><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c3">LeftOuterLoopToPopArea</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">LeftOuterLoop</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c29 c41">OuterLoop</span></p><p class="c10"><span class="c3">Divert</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c10"><span class="c3">Evt_Shot_LeftOuterLoopToDivert</span></p></td></tr><tr class="c2"><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c3">LeftRampToLeftInlane</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">LeftRamp</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c29 c41">LeftInlane</span></p><p class="c10"><span class="c33">Passthrough</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c10"><span class="c3">Evt_Shot_LeftRampToPassthrough</span></p></td></tr><tr class="c2"><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c3">LeftRampToHole</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">LeftRamp</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">Hole</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c10"><span class="c3">Evt_Shot_LeftRampToHole</span></p></td></tr><tr class="c2"><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c3">SideLoopToRightOuterLoop</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">SideLoop</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c29">RightOuterLoop</span></p><p class="c10"><span class="c3">Passthrough</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c10"><span class="c3">Evt_Shot_SideLoopToPassthrough</span></p></td></tr><tr class="c2"><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c3">SideLoopToHole</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">SideLoop</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">Hole</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c10"><span class="c3">Evt_Shot_SideLoopToHole</span></p></td></tr><tr class="c2"><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c3">LeftInnerLoopToRightInnerLoop</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">LeftInnerLoop</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c29 c41">RightInnerLoop</span></p><p class="c10"><span class="c33">Passthrough</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c10"><span class="c3">Evt_Shot_LeftInnerLoopToPassthrough</span></p></td></tr><tr class="c2"><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c3">LeftInnerLoopToHole</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">LeftInnerLoop</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">Hole</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c10"><span class="c3">Evt_Shot_LeftInnerLoopToHole</span></p></td></tr><tr class="c2"><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c3">JailHole</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">Jail</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">Hole</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c10"><span class="c3">Evt_Shot_JailToPassthrough</span></p></td></tr><tr class="c2"><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c3">RightInnerLoopToLeftInnerLoop</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">RightInnerLoop</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c29 c41">LeftInnerLoop</span></p><p class="c10"><span class="c3">Passthrough</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c10"><span class="c3">Evt_Shot_RightInnerLoopToPassthrough</span></p></td></tr><tr class="c2"><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c3">RightInnerLoopToHole</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">RightInnerLoop</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">Hole</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c10"><span class="c3">Evt_Shot_RightInnerLoopToHole</span></p></td></tr><tr class="c2"><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c3">RightRampToRightInlane</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">RightRamp</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c29 c41">RightInlane</span></p><p class="c10"><span class="c33">Passthrough</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c10"><span class="c3">Evt_Shot_RightRampToPassthrough</span></p></td></tr><tr class="c2"><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c3">RightOuterLoopToLeftOuterLoop</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">RightOuterLoop</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c29">LeftOuterLoop</span><span class="c3">&nbsp;Passthrough</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c10"><span class="c3">Evt_Shot_RightOuterLoopToPassthrough</span></p></td></tr><tr class="c2"><td class="c30" colspan="1" rowspan="1"><p class="c10"><span class="c3">RightOuterLoopToHole</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">RightOuterLoop</span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c10"><span class="c3">Hole</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c10"><span class="c3">Evt_Shot_RightOuterLoopToHole</span></p></td></tr></table><p class="c0 c20"><span class="c3"></span></p><h2 class="c15"><span class="c23 c16">Shot Events</span></h2><p class="c0" id="h.gjdgxs"><span class="c14">Let&rsquo;s assume the BallPath &lt;EntranceName&gt;To&lt;ExitName&gt; is active. For example, the BallPath could be LeftOuterLoopToHole where &lt;EntranceName&gt; is LeftOuterLoop and &lt;ExitName&gt; is Hole.</span></p><p class="c0"><span>When the module driver detects the entrance switch is activated, it will send the event </span><span class="c40 c16">PostModeEventToModes(&quot;Evt_&lt;EntranceName&gt;Started&quot;, &quot;&quot;);</span></p><p class="c0"><span class="c14">That will be the only event sent if the ball does not follow the intended path. For example, if the shot is too weak and the ball comes back down the LeftOuterLoop.</span></p><p class="c0"><span class="c14">If the ball completes the BallPath trajectory, the following events are also sent:</span></p><p class="c8"><span class="c40 c16">PostModeEventToModes(&quot;Evt_&lt;EntranceName&gt;Completed&quot;, &quot;&lt;ExitName&gt;&quot;);</span></p><p class="c8"><span class="c40 c16">PostModeEventToModes(&quot;Evt_Shot_&lt;EntranceName&gt;To&lt;ExitName&gt;&quot;, &quot;&lt;ExitName&gt;&quot;);</span></p><p class="c8"><span class="c40 c16">PostModeEventToModes(&quot;Evt_Shot_&lt;EntranceName&gt;&quot;, &quot;&lt;ExitName&gt;&quot;);</span></p><p class="c0"><span class="c40 c16">PostModeEventToModes(&quot;Evt_ShotHit&lt;EntranceName&gt;&quot;, &quot;&lt;EntranceName&gt;To&lt;ExitName&gt;&quot;);</span></p><h2 class="c15"><span class="c23 c16">Divert ExitName</span></h2><p class="c0"><span>The BallPaths </span><span class="c27">EntranceName</span><span class="c14">ToDivert have many issues with shot events.</span></p><ul class="c49 lst-kix_list_2-0 start"><li class="c8 c37 li-bullet-0"><span class="c14">LeftOuterLoopToDivert (Pop Area) starts but it never completes.</span></li><li class="c8 c37 li-bullet-0"><span class="c14">LeftRampToDivert (Casino Hole) is the only one that completes normally.</span></li><li class="c8 c37 li-bullet-0"><span class="c14">SideLoopToDivert (Pop Area) starts but it never completes.</span></li><li class="c8 c37 li-bullet-0"><span class="c14">LeftInnerLoopToDivert (Jail Hole) completes as LeftInnerLoopToHole.</span></li><li class="c8 c37 li-bullet-0"><span class="c14">RightInnerLoopToDivert (Jail Hole) completes as RightInnerLoopToHole.</span></li><li class="c8 c37 li-bullet-0"><span class="c14">RightRampToDivert (Wireform Lock) completes twice per shot,</span></li></ul><p class="c8 c61 c43"><span class="c14">once as RightRampToInlaneR and once as RightRampToPassthrough.</span></p><ul class="c49 lst-kix_list_2-0"><li class="c0 c37 li-bullet-0"><span class="c14">RightOuterLoopToDivert (Pop Area) starts but never completes.</span></li></ul><h2 class="c15"><span class="c23 c16">ExitType</span></h2><p class="c0"><span class="c14">Every BallPathDefinition specifies the ExitType which is an indication of what happens to the ball if it completes that Ballpath. The possible values are given by the BallPathExitType enumeration.</span></p><p class="c8"><span class="c19 c16">namespace Multimorphic.NetProcMachine.Config;</span></p><p class="c8 c20"><span class="c19 c16"></span></p><p class="c8"><span class="c19 c16">public enum BallPathExitType</span></p><p class="c8"><span class="c19 c16">{</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &nbsp; Undefined,</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &nbsp; Other,</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &nbsp; PlayfieldLocation,</span></p><p class="c8"><span class="c16 c19">&nbsp; &nbsp; &nbsp; &nbsp; Hole,</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &nbsp; Lock,</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &nbsp; TemporaryLock,</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &nbsp; Target,</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &nbsp; Path</span></p><p class="c0"><span class="c14">}</span></p><p class="c0"><span class="c14">Undefined is an error, it means uninitialized.</span></p><p class="c0"><span class="c14">Other means none of the other choices. It&rsquo;s not clear what the application should conclude from that, hence it is best to avoid this ExitType.</span></p><p class="c0"><span class="c14">PlayfieldLocation means the ball ends up in play somewhere on the playfield.</span></p><p class="c0"><span class="c14">Hole means the ball is gobbled up and it disappears unless the application relaunches it explicitly.</span></p><p class="c0"><span class="c14">Lock means the ball is permanently locked, like in a saucer or a physical lock.</span></p><p class="c0"><span class="c14">TemporaryLock means the ball is taking a long time to complete its travel but it will eventually be back in play without the application intervention. For Heist, this is the pop area.</span></p><p class="c0"><span class="c14">Target is a simple switch like a stand up target or a rollover button. The assumption is the ball remains in play after hitting the switch.</span></p><p class="c0"><span class="c14">It&rsquo;s not clear what Path means. Current modules do not use that ExitType. It is best to avoid it until it is better documented.</span></p><h2 class="c15"><span class="c23 c16">Target BallPaths</span></h2><p class="c0"><span class="c14">The Heist module definition file defines 5 Target BallPaths, one for each stand up target on the module: RightJailTarget, LeftJailTarget, RightTarget, CenterTarget, LeftTarget.</span></p><p class="c0"><span class="c14">For example, here is the BallPathDefinition for the RightJailTarget:</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; {</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &quot;Name&quot;: &quot;RightJailTarget&quot;,</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &quot;Tags&quot;: [&quot;Target&quot;],</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &quot;ExitType&quot;: &quot;Target&quot;,</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &quot;EntranceName&quot;: &quot;RightJailTarget&quot;,</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &quot;ExitName&quot;: &quot;RightJailTarget&quot;,</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &quot;StartedEvent&quot;: &quot;sw_RightJailTarget_active&quot;,</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &quot;CompletedEvent&quot;: &quot;sw_RightJailTarget_inactive&quot;,</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &quot;EntrancePosition&quot;: [11.5,5,0],</span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; &nbsp; &quot;ExitPosition&quot;: [11.5,5,0],</span></p><p class="c8"><span class="c19 c16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;EntranceLEDs&quot;: [[&quot;jailRight&quot;],],</span></p><p class="c8"><span class="c19 c16">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&quot;ExitLEDs&quot;: [[&quot;&quot;],], </span></p><p class="c8"><span class="c19 c16">&nbsp; &nbsp; },</span></p><p class="c8 c20"><span class="c19 c16"></span></p><p class="c0"><span class="c14">Notice how the EntranceName and ExitName are the same and they are equal to the switch name.</span></p><p class="c0"><span class="c14">Technically, a Target BallPath starts when the switch is activated and completes when the switch is deactivated. Many applications will choose to handle the shot as soon as the switch is activated.</span></p><p class="c0"><span class="c14">The StartedEvent and CompletedEvent look like switch events in Heist. The application can indeed detect this BallPath by installing switch event handlers. The Heist module driver is special. It forwards many switch events as regular mode to modes events. For the Heist module, the application can choose to detect a Target BallPath by registering mode to modes event handlers instead.</span></p><p class="c0"><span class="c14">A Target BallPath is always active. There is no point in trying to activate it by posting the Evt_AddPathByName event. If you post the event anyway, it will log an error saying the entrance name is not valid. Indeed, the target switch name is not a valid entrance name.</span></p><h2 class="c15"><span class="c23 c16">Jail Gate API</span></h2><p class="c0"><span class="c14">The JailToHole and JailToDivert BallPaths both end up in the Jail hole.</span></p><p class="c0"><span class="c56">You might expect a BallPath exists to close the gate, considering it is driven by a diverter, but there isn&#39;t one. </span><span class="c14">It is possible to close the gate using the low-level diverter API previously discussed with Evt_ServoUp_jailServo and Evt_ServoDown_jailServo, but there is a nicer way.</span></p><p class="c1"><span class="c14">The application can send the Evt_OpenJailGate event to control the gate. The event argument is a boolean, it chooses whether the gate should be opened or closed. </span></p><a id="t.f787db46759fcb48fbdf4b2cbd51d4bc94ccce52"></a><a id="t.7"></a><table class="c47"><tr class="c2"><td class="c34 c38" colspan="1" rowspan="1"><p class="c31"><span class="c14">Event</span></p></td><td class="c7 c38" colspan="1" rowspan="1"><p class="c4"><span class="c14">Description</span></p></td></tr><tr class="c2"><td class="c34" colspan="1" rowspan="1"><p class="c31"><span class="c14">Evt_OpenJailGate</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c4"><span class="c14">Event data is: true to open the gate, false to close the gate.</span></p></td></tr></table><h2 class="c57 c59"><span class="c23 c16">Missing BallPaths</span></h2><p class="c0"><span class="c14">Besides the possibly missing Jail Gate closed BallPath, the Heist module driver is missing a couple BallPaths involving the SideLoop exit. There is no point in trying to make these BallPaths active since the SideLoop is not a valid ExitName.</span></p><p class="c0"><span class="c14">The ball very rarely exits through the SideLoop but it is not impossible. &nbsp;</span></p><p class="c0"><span class="c14">Consider a weak ball going up the LeftOuterLoop with enough energy to clear the LeftOuterLoop ball guide but not enough to reach the back magnet. Gravity can make the ball fall down the SideLoop. If you &ldquo;help&rdquo; the ball go through this path with the glass off, you will find the Heist module driver reports it as a completed LeftOuterLoopToOuterLoop shot, which is incorrect.</span></p><p class="c0"><span class="c14">The second missing BallPath is similar but the ball enters from the RightOuterLoop and exits through the SideLoop. In this case, the module driver detects the RightOuterLoop shot is started but it thinks the shot is never completed.</span></p><p class="c0"><span class="c14">These shots are so rare, it is not a big deal if they are missing. It would have been a nice easter egg for the player though.</span></p><h2 class="c15"><span class="c23 c16">Wireform Lock</span></h2><p class="c0"><span class="c14">One way to lock the ball on the wireform is to activate the LeftRamp to Lock BallPath.</span></p><p class="c0"><span class="c5">PostModeEventToModes(</span><span class="c35">&quot;Evt_AddPathByName&quot;</span><span class="c5">, </span><span class="c11">new</span><span class="c5">&nbsp;List&lt;</span><span class="c11">string</span><span class="c5 c16">&gt; { &quot;LeftRamp&quot;, &quot;Lock&quot; });</span></p><p class="c0"><span class="c14">If the player shoots the left ramp, the ball will fall into the Casino Hole, relaunch over the highwire and finish locked on the wireform, ready to be picked up by the crane or released to the right inlane.</span></p><p class="c0"><span class="c14">The application must remember to replace the LeftRamp BallPath when the Lock is no longer desirable.</span></p><p class="c0"><span class="c14">If the application wants to lock the ball immediately under its control, it can make these calls:</span></p><p class="c8"><span class="c3">PostModeEventToModes(&quot;Evt_SetupLeftRampLock&quot;, true);</span></p><p class="c8"><span class="c3">AddModeEventHandler(&quot;Evt_BallLockedLeft&quot;, PendingBallLockedEventHandler, base.Priority);</span></p><p class="c8"><span class="c3">HeistBallLauncher.launch(&quot;InlaneR&quot;);</span></p><p class="c8 c20"><span class="c3"></span></p><h2 class="c15"><span class="c23 c16">Crane Pickup</span></h2><p class="c0"><span class="c14">If the application always wants to pick up the ball immediately after a completed LeftRamp to Lock BallPath, it can choose to activate the LeftRamp to LoadCrane BallPath instead.</span></p><p class="c0"><span class="c5">PostModeEventToModes(</span><span class="c35">&quot;Evt_AddPathByName&quot;</span><span class="c5">, </span><span class="c11">new</span><span class="c5">&nbsp;List&lt;</span><span class="c11">string</span><span class="c5 c16">&gt; { &quot;LeftRamp&quot;, &quot;LoadCrane&quot; });</span></p><p class="c0"><span class="c14">This does the same thing as the LeftRamp to Lock BallPath, but once the ball is locked, the module driver proceeds with a call to Evt_CranePickup. The ball ends up suspended by the crane over the playfield.</span></p><p class="c0"><span class="c14">To protect the crane magnet, be cautious to always drop the ball after a reasonable bounded amount of time.</span></p><p class="c0"><span class="c14">The application must remember to replace the LeftRamp BallPath when the LoadCrane is no longer desirable.</span></p><p class="c0"><span>The application must be ready to handle errors if the launch or pickup fails. See the </span><span class="c46"><a class="c64" href="HeistCrane.html">Heist Crane Tech Tip</a></span><span class="c14">&nbsp;for more information on the crane.</span></p></body></html>
