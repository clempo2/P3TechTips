<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=fpjTOVmNbO4Lz34iLyptLROjXfSpIU_1TsQlCJ7q4WlXEixY9aqhie8CVYCrTb1E);.lst-kix_list_2-6>li:before{content:"\0025cf   "}.lst-kix_list_2-7>li:before{content:"o  "}ul.lst-kix_list_1-0{list-style-type:none}.lst-kix_list_2-4>li:before{content:"o  "}.lst-kix_list_2-5>li:before{content:"\0025aa   "}.lst-kix_list_2-8>li:before{content:"\0025aa   "}ul.lst-kix_list_2-8{list-style-type:none}ul.lst-kix_list_1-3{list-style-type:none}ul.lst-kix_list_2-2{list-style-type:none}.lst-kix_list_1-0>li:before{content:"-  "}ul.lst-kix_list_1-4{list-style-type:none}ul.lst-kix_list_2-3{list-style-type:none}ul.lst-kix_list_1-1{list-style-type:none}ul.lst-kix_list_2-0{list-style-type:none}ul.lst-kix_list_1-2{list-style-type:none}ul.lst-kix_list_2-1{list-style-type:none}ul.lst-kix_list_1-7{list-style-type:none}ul.lst-kix_list_2-6{list-style-type:none}.lst-kix_list_1-1>li:before{content:"o  "}.lst-kix_list_1-2>li:before{content:"\0025aa   "}ul.lst-kix_list_1-8{list-style-type:none}ul.lst-kix_list_2-7{list-style-type:none}ul.lst-kix_list_1-5{list-style-type:none}ul.lst-kix_list_2-4{list-style-type:none}ul.lst-kix_list_1-6{list-style-type:none}ul.lst-kix_list_2-5{list-style-type:none}.lst-kix_list_1-3>li:before{content:"\0025cf   "}.lst-kix_list_1-4>li:before{content:"o  "}.lst-kix_list_1-7>li:before{content:"o  "}.lst-kix_list_1-5>li:before{content:"\0025aa   "}.lst-kix_list_1-6>li:before{content:"\0025cf   "}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}.lst-kix_list_2-0>li:before{content:"-  "}.lst-kix_list_2-1>li:before{content:"o  "}.lst-kix_list_1-8>li:before{content:"\0025aa   "}.lst-kix_list_2-2>li:before{content:"\0025aa   "}.lst-kix_list_2-3>li:before{content:"\0025cf   "}ol{margin:0;padding:0}table td,table th{padding:0}.c11{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#e7e6e6;border-left-style:solid;border-bottom-width:1pt;width:151.6pt;border-top-color:#000000;border-bottom-style:solid}.c12{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#e7e6e6;border-left-style:solid;border-bottom-width:1pt;width:321.9pt;border-top-color:#000000;border-bottom-style:solid}.c46{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:351.7pt;border-top-color:#000000;border-bottom-style:solid}.c34{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:127.6pt;border-top-color:#000000;border-bottom-style:solid}.c35{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:298.6pt;border-top-color:#000000;border-bottom-style:solid}.c59{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:478.8pt;border-top-color:#000000;border-bottom-style:solid}.c39{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:321.9pt;border-top-color:#000000;border-bottom-style:solid}.c41{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:501.6pt;border-top-color:#000000;border-bottom-style:solid}.c17{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:151.6pt;border-top-color:#000000;border-bottom-style:solid}.c9{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:16.1pt;border-top-color:#000000;border-bottom-style:solid}.c7{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:84pt;border-top-color:#000000;border-bottom-style:solid}.c24{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:170.1pt;border-top-color:#000000;border-bottom-style:solid}.c14{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:162.3pt;border-top-color:#000000;border-bottom-style:solid}.c8{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:204.1pt;border-top-color:#000000;border-bottom-style:solid}.c20{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:76.4pt;border-top-color:#000000;border-bottom-style:solid}.c37{-webkit-text-decoration-skip:none;color:#000000;font-weight:400;text-decoration:line-through;vertical-align:baseline;text-decoration-skip-ink:none;font-size:9.5pt;font-family:"Consolas";font-style:normal}.c27{color:#2f5496;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:13pt;font-family:"Calibri";font-style:normal}.c48{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:8pt;font-family:"Calibri";font-style:normal}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Consolas";font-style:normal}.c10{padding-top:3pt;padding-bottom:3pt;line-height:1.0;orphans:2;widows:2;text-align:left;margin-right:-132.8pt}.c5{padding-top:2pt;padding-bottom:0pt;line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c2{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9.5pt;font-family:"Consolas";font-style:normal}.c33{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Consolas";font-style:normal}.c13{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Calibri";font-style:normal}.c4{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:8pt;font-family:"Consolas";font-style:normal}.c51{color:#2f5496;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Calibri";font-style:normal}.c40{padding-top:3pt;padding-bottom:3pt;line-height:1.0;orphans:2;widows:2;text-align:left;margin-right:-245.4pt}.c60{padding-top:12pt;padding-bottom:0pt;line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c19{padding-top:0pt;padding-bottom:6pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c64{padding-top:12pt;padding-bottom:0pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c6{padding-top:0pt;padding-bottom:0pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c38{padding-top:6pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c42{padding-top:12pt;padding-bottom:12pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c3{padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c16{padding-top:0pt;padding-bottom:8pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c50{padding-top:12pt;padding-bottom:8pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c15{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left;height:11pt}.c53{-webkit-text-decoration-skip:none;color:#000000;text-decoration:line-through;text-decoration-skip-ink:none}.c23{font-size:8pt;font-family:"Consolas";color:#0000ff;font-weight:400}.c28{border-spacing:0;border-collapse:collapse;margin-right:auto}.c22{font-size:8pt;font-family:"Consolas";color:#000000;font-weight:400}.c32{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#0563c1;text-decoration:underline}.c47{margin-left:-5.4pt;border-spacing:0;border-collapse:collapse;margin-right:auto}.c1{font-size:8pt;font-family:"Consolas";color:#a31515;font-weight:400}.c29{font-family:"Times New Roman";font-style:italic;font-weight:400}.c43{font-size:9.5pt;font-family:"Consolas";font-weight:400}.c57{-webkit-text-decoration-skip:none;text-decoration:line-through;text-decoration-skip-ink:none}.c63{font-size:9pt;font-family:"Consolas";font-weight:400}.c65{max-width:468pt;padding:72pt 72pt 72pt 72pt}.c45{color:inherit;text-decoration:inherit}.c36{margin-left:36pt;padding-left:0pt}.c25{text-indent:36pt;margin-right:62.6pt}.c56{margin-left:36pt;text-indent:36pt}.c30{padding:0;margin:0}.c61{margin-right:13.1pt}.c54{background-color:#ffffff}.c21{height:0pt}.c62{margin-right:48.5pt}.c31{height:11pt}.c58{margin-left:36pt}.c52{margin-right:55.5pt}.c49{margin-right:-21.1pt}.c18{margin-right:-28.1pt}.c44{background-color:#e7e6e6}.c55{margin-right:0.2pt}.c26{margin-right:62.6pt}.title{padding-top:24pt;color:#000000;font-weight:700;font-size:36pt;padding-bottom:6pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:18pt;color:#666666;font-size:24pt;padding-bottom:4pt;font-family:"Georgia";line-height:1.0791666666666666;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Calibri"}p{margin:0;color:#000000;font-size:11pt;font-family:"Calibri"}h1{padding-top:12pt;color:#2f5496;font-size:16pt;padding-bottom:0pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:2pt;color:#2f5496;font-size:13pt;padding-bottom:0pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:14pt;color:#000000;font-weight:700;font-size:14pt;padding-bottom:4pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:12pt;color:#000000;font-weight:700;font-size:12pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:11pt;color:#000000;font-weight:700;font-size:11pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:10pt;color:#000000;font-weight:700;font-size:10pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}</style></head><body class="c54 c65 doc-content"><h1 class="c60"><span class="c51">Heist BallPaths</span></h1><p class="c16"><span class="c13">This tech tip examines the BallPaths specific to the Heist module. We will see BallPaths work fine at runtime but the module definition file has problems in Heist 1.2.0.0</span></p><h2 class="c5"><span class="c27">Overview</span></h2><p class="c16 c49"><span>BallPaths in general are documented in &ldquo;P3-SDK: Creating Your Playfield Module&rdquo; at </span><span class="c32">file:///C:/P3/P3_SDK_V0.8/P3SampleApp/Documentation/html/_creating_playfield_module.html#BallPaths</span><span>&nbsp; and &ldquo;P3-SDK: Controlling Physical Features&rdquo; at </span><span class="c32">file:///C:/P3/P3_SDK_V0.8/P3SampleApp/Documentation/html/_physical_features.html#DetectingShots</span></p><p class="c16"><span class="c13">A BallPath describes a ball trajectory on a module. This abstraction lets the module driver report which shots have been made. Conversely, the application can choose which BallPaths are active, therefore indirectly controlling the diverters and similar mechs that affect the ball trajectory.</span></p><p class="c16"><span class="c13">BallPaths were introduced with the Heist module and have been a standard feature of every module since then. Older modules were retrofitted in later versions, leaving only CL which does not support BallPaths at the moment.</span></p><h2 class="c5"><span class="c27">Diverters</span></h2><p class="c16 c26"><span class="c13">The Heist module has 4 diverters: leftRampDiverter, outerLoopDiverter, ballLock and jailServo. They are implemented as servos which can be in one of two positions: up or down.</span></p><ul class="c30 lst-kix_list_1-0 start"><li class="c6 c36 c26 li-bullet-0"><span class="c13">leftRampDiverter chooses between returning to the left inlane or dropping in a hole behind the casino reaching the trough through a subway.</span></li><li class="c6 c36 c26 li-bullet-0"><span class="c13">outerLoopDiverter chooses between the back hole or the pop area when dropping from the back magnet.</span></li><li class="c6 c36 c26 li-bullet-0"><span class="c13">ballLock blocks the ball on the right wireform when down or lets the ball fall through to the right inlane when up.</span></li><li class="c16 c36 c26 li-bullet-0"><span class="c13">jailServo opens or closes the gate in front of the jail hole.</span></li></ul><h2 class="c5"><span class="c27">Diverters Low-Level API</span></h2><p class="c16 c55"><span class="c13">HeistModuleCapabilities.cs describes a low-level API for two-position servos. We show the diverter API here but keep in mind the application would typically control the diverters through BallPaths instead. </span></p><p class="c16 c26"><span class="c13">The file HeistModuleCapabilities.cs is located in %HOMEDRIVE%%HOMEPATH%\.multimorphic\P3\ModuleDrivers\Heist\1.2.0.0\HeistModuleCapabilities.cs </span></p><p class="c16 c26"><span>This API is not applicable to the range servos like craneRotation (sweep) and cranePitch. See the </span><span class="c32"><a class="c45" href="HeistCrane.html">Heist Crane Tech Tip</a></span><span class="c13">&nbsp;for more information on the crane servos.</span></p><p class="c16 c26"><span class="c13">In HeistModuleCapabilities, the events are documented with statements like:</span></p><p class="c16 c25"><span class="c33">PostModeEventToModes(&quot;Evt_ServoUp_&quot; + servo.Name, true);</span></p><p class="c16 c26"><span class="c13">The intention is that servo is a variable initialized like this:</span></p><p class="c16 c26"><span class="c33">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Servo servo = p3.Servos[&quot;jailServo&quot;];</span></p><p class="c16 c26"><span class="c13">The Servo object is unnecessary. All you need is the servo name which is constant in the code above.</span></p><p class="c16 c26"><span class="c13">It is simpler to skip the servo variable and write something like this instead:</span></p><p class="c16 c25"><span class="c33">PostModeEventToModes(&quot;Evt_ServoUp_jailServo&quot;, true);</span></p><p class="c16 c26"><span class="c13">The API defines these events to alter the state of the two-position servos:</span></p><a id="t.b1e3c5514fdde21abaebbd50b64cc4c6dc62894a"></a><a id="t.0"></a><table class="c28"><tr class="c21"><td class="c11" colspan="1" rowspan="1"><p class="c40"><span class="c13">Event</span></p></td><td class="c44 c46" colspan="1" rowspan="1"><p class="c10"><span class="c13">Description</span></p></td></tr><tr class="c21"><td class="c17" colspan="1" rowspan="1"><p class="c40"><span>Evt_ServoUp_</span><span class="c29">ServoName</span></p></td><td class="c46" colspan="1" rowspan="1"><p class="c10"><span class="c13">Move the servo up.</span></p></td></tr><tr class="c21"><td class="c17" colspan="1" rowspan="1"><p class="c40"><span>Evt_ServoDown_</span><span class="c29">ServoName</span></p></td><td class="c46" colspan="1" rowspan="1"><p class="c10"><span class="c13">Move the servo down.</span></p></td></tr><tr class="c21"><td class="c17" colspan="1" rowspan="1"><p class="c40"><span>Evt_ServoAlternate_</span><span class="c29">ServoName</span></p></td><td class="c46" colspan="1" rowspan="1"><p class="c10"><span class="c13">Move the servo up if currently down, move down if currently up.</span></p></td></tr><tr class="c21"><td class="c17" colspan="1" rowspan="1"><p class="c40"><span>Evt_ServoIterate_</span><span class="c29">ServoName</span></p></td><td class="c46" colspan="1" rowspan="1"><p class="c10"><span class="c13">Alternate the servo every 2sec until another event for that servo is posted.</span></p></td></tr></table><p class="c26 c50"><span>Where </span><span class="c29">ServoName </span><span class="c13">is leftRampDiverter, outerLoopDiverter, ballLock or jailServo. The event data is not used, so you can pass true or null. It does not matter.</span></p><p class="c50 c26"><span>The Evt_ServoUp_</span><span class="c29">ServoName</span><span>&nbsp;and Evt_ServoDown_</span><span class="c29">ServoName</span><span class="c13">&nbsp;events are the most useful.</span></p><p class="c50 c26"><span>The Evt_ServoAlternate_</span><span class="c29">ServoName </span><span class="c13">event could be useful in ball search, though that is the module driver responsibility.</span></p><p class="c50 c26"><span>I don&rsquo;t envision Evt_ServoIterate_</span><span class="c29">ServoName </span><span class="c13">being used in an application, except maybe in diagnostics.</span></p><p class="c50 c26"><span class="c13">The actual values used to move the servo up or down are determined by GameAttributes that appear as settings in the Service Menu under Settings/Mechs/Diverters.</span></p><a id="t.284d26b2eaace1e6aefbb575761a76be74c6d2c1"></a><a id="t.1"></a><table class="c28"><tr class="c21"><td class="c11" colspan="1" rowspan="1"><p class="c40"><span class="c13">GameAttribute</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c10"><span class="c13">Description</span></p></td></tr><tr class="c21"><td class="c17" colspan="1" rowspan="1"><p class="c40"><span class="c13">RightRampLockLow</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c10"><span class="c13">Value to move ballLock servo down</span></p></td></tr><tr class="c21"><td class="c17" colspan="1" rowspan="1"><p class="c40"><span class="c13">RightRampLockHigh</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c10"><span class="c13">Value to move ballLock servo up</span></p></td></tr><tr class="c21"><td class="c17" colspan="1" rowspan="1"><p class="c40"><span class="c13">LeftRampDiverterLow</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c10"><span class="c13">Value to move leftRampDiverter servo down</span></p></td></tr><tr class="c21"><td class="c17" colspan="1" rowspan="1"><p class="c40"><span class="c13">LeftRampDiverterHigh</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c10"><span class="c13">Value to move leftRampDiverter servo up</span></p></td></tr><tr class="c21"><td class="c17" colspan="1" rowspan="1"><p class="c40"><span class="c13">OuterLoopDiverterLow</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c10"><span class="c13">Value to move outerLoopDiverter servo down</span></p></td></tr><tr class="c21"><td class="c17" colspan="1" rowspan="1"><p class="c40"><span class="c13">OuterLoopDiverterHigh</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c10"><span class="c13">Value to move outerLoopDiverter servo up</span></p></td></tr><tr class="c21"><td class="c17" colspan="1" rowspan="1"><p class="c40"><span class="c13">JailLow</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c10"><span class="c13">Value to move jailServo servo down</span></p></td></tr><tr class="c21"><td class="c17" colspan="1" rowspan="1"><p class="c40"><span class="c13">JailHigh</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c10"><span class="c13">Value to move jailServo servo up</span></p></td></tr></table><p class="c50 c52"><span class="c13">The application can read those settings like this:</span></p><p class="c16 c61"><span class="c63">int jailLow = data.GetGameAttributeValue(&quot;PlayfieldModuleLocalSettings&quot;, &quot;</span><span>JailLow</span><span class="c0">&quot;).ToInt();</span></p><p class="c16"><span class="c13">though this is unlikely since the API takes care of this.</span></p><p class="c16 c62"><span class="c13">When the module driver receives one of the 4 events above, it sends a notification event describing how the servo is about to move. The event data is null. The event names depend on the servo name as follows:</span></p><a id="t.6f65f8c7a7bb4afe55d90de86c8616b026fc32fc"></a><a id="t.2"></a><table class="c28"><tr class="c21"><td class="c34 c44" colspan="1" rowspan="1"><p class="c40"><span class="c13">Servo</span></p></td><td class="c24 c44" colspan="1" rowspan="1"><p class="c10"><span class="c13">Moving Down Event</span></p></td><td class="c24 c44" colspan="1" rowspan="1"><p class="c10"><span class="c13">Moving Up Event</span></p></td></tr><tr class="c21"><td class="c34" colspan="1" rowspan="1"><p class="c40"><span class="c13">ballLock</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c10"><span class="c13">Evt_RightRampLockMovingDown</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c10"><span class="c13">Evt_RightRampLockMovingUp</span></p></td></tr><tr class="c21"><td class="c34" colspan="1" rowspan="1"><p class="c40"><span class="c13">leftRampDiverter</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c10"><span class="c13">Evt_LeftRampServoMovingDown</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c10"><span class="c13">Evt_LeftRampServoMovingUp</span></p></td></tr><tr class="c21"><td class="c34" colspan="1" rowspan="1"><p class="c40"><span class="c13">outerLoopDiverter</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c10"><span class="c13">Evt_OuterLoopDiverterMovingDown</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c10"><span class="c13">Evt_OuterLoopDiverterMovingUp</span></p></td></tr><tr class="c21"><td class="c34" colspan="1" rowspan="1"><p class="c40"><span class="c13">jailServo</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c10"><span class="c13">Evt_JailServoMovingDown</span></p></td><td class="c24" colspan="1" rowspan="1"><p class="c10"><span class="c13">Evt_JailServoMovingUp</span></p></td></tr></table><p class="c50 c62"><span>When the servo movement is done, the module driver sends an Evt_ServoParked_</span><span class="c29">ServoName</span><span class="c13">&nbsp;event. The event data is null for this event.</span></p><p class="c50"><span class="c13">For example, when sending Evt_ServoDown_jailServo, these events will be sent as a response:</span></p><p class="c64 c25"><span class="c13">Evt_JailServoMovingDown</span></p><p class="c16 c25"><span class="c13">Evt_ServoParked_jailServo</span></p><h2 class="c5"><span class="c27">BallPathEntrances</span></h2><p class="c16 c18"><span class="c13">HeistModuleCapabilities.cs lists the valid BallPath entrance names for the Heist module:</span></p><p class="c3"><span class="c2">string[] entrances = { &quot;LeftOuterLoop&quot;, &quot;LeftRamp&quot;, &quot;SideLoop&quot;, &quot;LeftInnerLoop&quot;, &quot;Jail&quot;, &quot;RightInnerLoop&quot;, &quot;RightRamp&quot;, &quot;RightOuterLoop&quot;, &quot;Drain&quot; };</span></p><p class="c16 c31"><span class="c2"></span></p><p class="c16"><span class="c13">HeistModuleCapabilities.cs appears to be a C# source file but it is not compiled and linked in the Heist module driver. In your application, the list of valid BallPath entrance names is given by the BallPathEntrances enumeration instead. The two lists are identical.</span></p><p class="c64"><span class="c2">namespace Multimorphic.P3.Modules.Heist;</span></p><p class="c6"><span class="c2">public enum BallPathEntrances</span></p><p class="c6"><span class="c2">{</span></p><p class="c6"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; LeftOuterLoop,</span></p><p class="c6"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; LeftRamp,</span></p><p class="c6"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; SideLoop,</span></p><p class="c6"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; LeftInnerLoop,</span></p><p class="c6"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; Jail,</span></p><p class="c6"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; RightInnerLoop,</span></p><p class="c6"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; RightRamp,</span></p><p class="c6"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; RightOuterLoop,</span></p><p class="c6"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; Drain</span></p><p class="c6"><span class="c2">}</span></p><p class="c6 c31"><span class="c2"></span></p><h2 class="c5"><span class="c27">BallPathExits</span></h2><p class="c16 c18"><span class="c13">HeistModuleCapabilities.cs lists the valid BallPath exit names for the Heist module:</span></p><p class="c16"><span class="c2">string[] exits = { &quot;Passthrough&quot;, &quot;Hole&quot;, &quot;Divert&quot;, &quot;Lock&quot;, &quot;InlaneL&quot;, &quot;InlaneR&quot;, &quot;OuterLoop&quot;, &quot;InnerLoop&quot;, &quot;Jail&quot;, &quot;LoadCrane&quot; };</span></p><p class="c16"><span class="c13">HeistModuleCapabilities.cs is not compiled and linked in the Heist module driver. In your application the list of valid BallPath exit names is given by the BallPathExits enumeration instead. The two lists are identical.</span></p><p class="c64"><span class="c2">namespace Multimorphic.P3.Modules.Heist;</span></p><p class="c6"><span class="c2">public enum BallPathExits</span></p><p class="c6"><span class="c2">{</span></p><p class="c6"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; Passthrough,</span></p><p class="c6"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; Hole,</span></p><p class="c6"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; Divert,</span></p><p class="c6"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; Lock,</span></p><p class="c6"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; InlaneL,</span></p><p class="c6"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; InlaneR,</span></p><p class="c6"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; OuterLoop,</span></p><p class="c6"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; InnerLoop,</span></p><p class="c6"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; Jail,</span></p><p class="c6"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; LoadCrane</span></p><p class="c16"><span class="c2">}</span></p><h2 class="c5"><span class="c27">BallPathDefinitions</span></h2><p class="c16"><span class="c13">The module definition file for Heist is located in %HOMEDRIVE%%HOMEPATH%\.multimorphic\P3\ModuleDrivers\Heist\1.2.0.0\Heist.json</span></p><p class="c16"><span class="c13">Heist.json lists the BallPaths supported by that module driver.</span></p><p class="c16"><span class="c13">For example, here is one BallPathDefinition within the array:</span></p><p class="c6"><span class="c0">&nbsp; &quot;BallPaths&quot;: [</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; ...</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; {</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &quot;Name&quot;: &quot;LeftOuterLoopToHole&quot;,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &quot;Tags&quot;: [&quot;Loop&quot;],</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &quot;ExitType&quot;: &quot;Hole&quot;,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &quot;EntranceName&quot;: &quot;LeftOuterLoop&quot;,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &quot;ExitName&quot;: &quot;Hole&quot;,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &quot;StartedEvent&quot;: &quot;Evt_LeftOuterLoopStarted&quot;,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &quot;CompletedEvent&quot;: &quot;Evt_Shot_LeftOuterLoopToHole&quot;,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &quot;EntrancePosition&quot;: [2,0,0],</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &quot;ExitPosition&quot;: [NaN,NaN,NaN],</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;EntranceLEDs&quot;: [[&quot;garageBldg&quot;,&quot;garageSign&quot;,&quot;garageDown&quot;,&quot;mmiSign&quot;,&quot;mmi0&quot;,&quot;mmi1&quot;,&quot;mmi2&quot;,&quot;mmi3&quot;,&quot;mmi4&quot;,&quot;mmi5&quot;,&quot;mmi6&quot;,&quot;mmi7&quot;,&quot;bnnSign&quot;,&quot;bnn0&quot;,&quot;bnn1&quot;,&quot;bnn2&quot;,&quot;bnn3&quot;],],</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;ExitLEDs&quot;: [[&quot;&quot;],],</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; ...</span></p><p class="c6"><span class="c0">&nbsp; ]</span></p><p class="c6 c31"><span class="c0"></span></p><p class="c16 c26"><span class="c13">The application can access this BallPathDefinition like this:</span></p><p class="c16 c55 c58"><span class="c33">BallPathDefinition ballPath = p3.BallPaths[&quot;LeftOuterLoopToHole&quot;];</span></p><p class="c16 c26"><span class="c13">The application can loop over all BallPathDefinitions like this:</span></p><p class="c6 c58 c26"><span class="c33">foreach (BallPathDefinition ballPath in p3.BallPaths.Values) {</span></p><p class="c6 c58 c26"><span class="c33">&nbsp; &nbsp;// do something ...</span></p><p class="c16 c58 c26"><span class="c33">}</span></p><h2 class="c5"><span class="c27">BallPath API</span></h2><p class="c16"><span class="c13">HeistModuleCapabilities.cs documents the BallPath API.</span></p><p class="c16"><span class="c13">The application can send the Evt_AddPathByName event to activate a specific BallPath. The BallPath is defined by the entrance and exit names, not by the name of the BallPathDefinition. The module driver reacts by positioning the diverters to direct the ball from the entrance to the exit.</span></p><p class="c16"><span class="c0">PostModeEventToModes(&quot;Evt_AddPathByName&quot;, new List&lt;string&gt;{ballPathEntrance, ballPathExit});</span></p><p class="c16"><span class="c13">For example, to activate the BallPath LeftOuterLoopToHole, the application can send:</span></p><p class="c16"><span class="c0">PostModeEventToModes(&quot;Evt_AddPathByName&quot;, new List&lt;string&gt;{&quot;LeftOuterLoop&quot;, &quot;Hole&quot;});</span></p><p class="c16"><span class="c13">There is no notion of removing a BallPath. Adding a BallPath for an entrance automatically replaces the current BallPath for that entrance.</span></p><p class="c16"><span class="c13">It is possible to activate multiple BallPaths by sending the Evt_AddPathsByName. The event argument is a list of lists.</span></p><p class="c6"><span class="c0">PostModeEventToModes(&quot;Evt_AddPathsByName&quot;, new List&lt;List&lt;string&gt;&gt; {</span></p><p class="c6"><span class="c0">&nbsp; &nbsp;new List&lt;string&gt; {ballPathEntrance1, ballPathExit1},</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &hellip;,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp;new List&lt;string&gt; {ballPathEntranceN, ballPathExitN}</span></p><p class="c16"><span class="c0">});</span></p><p class="c16"><span class="c13">For example, to active the BallPaths LeftOuterLoopToHole and SideLoopToHole, the application can send:</span></p><p class="c6"><span class="c0">PostModeEventToModes(&quot;Evt_AddPathsByName&quot;, new List&lt;List&lt;string&gt;&gt; {</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; new List&lt;string&gt; {&quot;LeftOuterLoop&quot;, &quot;Hole&quot;},</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; new List&lt;string&gt; {&quot;SideLoop&quot;, &quot;Hole&quot;}</span></p><p class="c16"><span class="c0">});</span></p><p class="c16"><span class="c13">This is exactly the same as adding each BallPath one by one.</span></p><p class="c16"><span class="c13">HeistModuleCapabilities.cs documents two more events taking a BallPath or an array of BallPaths:</span></p><p class="c6"><span class="c0">PostModeEventToModes(&quot;Evt_AddPath&quot;, Multimorphic.P3.Modules.Heist.BallPath);</span></p><p class="c16"><span class="c0">PostModeEventToModes(&quot;Evt_AddPaths&quot;, Multimorphic.P3.Modules.Heist.BallPath[]);</span></p><p class="c16"><span class="c13">These events are misleading because the event argument is not a BallPathDefinition like p3.BallPaths[&quot;LeftOuterLoopToHole&quot;]. Instead, the event argument is one or more Multimorphic.P3.Modules.Heist.BallPath instances. These objects are internal to the module driver with no way to access them. You can ignore those two events. They should not be documented.</span></p><p class="c16"><span class="c13">Note: The BallPathDefinition is not used as an object in any P3 SDK calls. The purpose of the BallPathDefinition is to give access to its field values.</span></p><p class="c16"><span class="c13">The application can reset all BallPaths to the default. This should always select the PassThrough exit unless it physically does not make sense (e.g. Jail).</span></p><p class="c16"><span class="c0">PostModeEventToModes(&quot;Evt_ResetAllPaths&quot;, &quot;&quot;);</span></p><p class="c16"><span class="c13">There is no API to query which BallPaths are currently active. Instead, the application can cache the current set of active BallPaths under a key, temporary change the BallPaths and later restore the previous set of Ballpaths from the cache using the key.</span></p><p class="c16"><span class="c13">The key is an arbitrary string chosen by the application. There can be any number of keys. The cache is not permanent between execution runs.</span></p><p class="c16"><span class="c13">To save the current BallPath configuration under the key, the application can send:</span></p><p class="c16"><span class="c0">PostModeEventToModes(&quot;Evt_CachePaths&quot;, key);</span></p><p class="c16"><span class="c13">To restore the BallPath configuration stored under the key, the application can send:</span></p><p class="c16"><span class="c0">PostModeEventToModes(&quot;Evt_ApplyCachedPaths&quot;, key);</span></p><h2 class="c5"><span class="c27">Valid BallPaths</span></h2><p class="c16"><span class="c13">The Heist module has 9 BallPathEntrances and 10 BallPathExits.</span></p><p class="c16"><span class="c13">To find exactly which combinations are valid, we can try them all. In this code snippet, we log at error level to make it easier to find our tracing logs, these are obviously not errors.</span></p><a id="t.06b47d58b113b2ce868d3b85da58914818d79351"></a><a id="t.3"></a><table class="c47"><tr class="c21"><td class="c59" colspan="1" rowspan="1"><p class="c38"><span class="c4">using Multimorphic.P3App.Logging;</span></p><p class="c3"><span class="c4">...</span></p><p class="c3 c31"><span class="c4"></span></p><p class="c3"><span class="c23">string</span><span class="c22">[] entrances = { </span><span class="c1">&quot;LeftOuterLoop&quot;</span><span class="c22">, </span><span class="c1">&quot;LeftRamp&quot;</span><span class="c22">, </span><span class="c1">&quot;SideLoop&quot;</span><span class="c22">, </span><span class="c1">&quot;LeftInnerLoop&quot;</span><span class="c22">, </span><span class="c1">&quot;Jail&quot;</span><span class="c4">,</span></p><p class="c3"><span class="c22">&nbsp; &nbsp; </span><span class="c1">&quot;RightInnerLoop&quot;</span><span class="c22">, </span><span class="c1">&quot;RightRamp&quot;</span><span class="c22">, </span><span class="c1">&quot;RightOuterLoop&quot;</span><span class="c22">, </span><span class="c1">&quot;Drain&quot;</span><span class="c4">&nbsp;};</span></p><p class="c3"><span class="c23">string</span><span class="c22">[] exits = { </span><span class="c1">&quot;Passthrough&quot;</span><span class="c22">, </span><span class="c1">&quot;Hole&quot;</span><span class="c22">, </span><span class="c1">&quot;Divert&quot;</span><span class="c22">, </span><span class="c1">&quot;Lock&quot;</span><span class="c22">, </span><span class="c1">&quot;InlaneL&quot;</span><span class="c22">, </span><span class="c1">&quot;InlaneR&quot;</span><span class="c22">, </span><span class="c1">&quot;OuterLoop&quot;</span><span class="c4">,\</span></p><p class="c3"><span class="c22">&nbsp; &nbsp; </span><span class="c1">&quot;InnerLoop&quot;</span><span class="c22">, </span><span class="c1">&quot;Jail&quot;</span><span class="c22">, </span><span class="c1">&quot;LoadCrane&quot;</span><span class="c4">&nbsp;};</span></p><p class="c3 c31"><span class="c4"></span></p><p class="c3"><span class="c23">foreach</span><span class="c22">&nbsp;(</span><span class="c23">string</span><span class="c22">&nbsp;entrance </span><span class="c23">in</span><span class="c4">&nbsp;entrances)</span></p><p class="c3"><span class="c4">{</span></p><p class="c3"><span class="c23">&nbsp; &nbsp; foreach</span><span class="c22">&nbsp;(</span><span class="c23">string</span><span class="c22">&nbsp;exit </span><span class="c23">in</span><span class="c4">&nbsp;exits)</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; {</span></p><p class="c3"><span class="c22">&nbsp; &nbsp; &nbsp; &nbsp; Logger.LogError(LogCategories.Game, entrance + </span><span class="c1">&quot; TO &quot;</span><span class="c4">&nbsp;+ exit);</span></p><p class="c3"><span class="c22">&nbsp; &nbsp; &nbsp; &nbsp; PostModeEventToModes(</span><span class="c1">&quot;Evt_AddPathByName&quot;</span><span class="c22">, </span><span class="c23">new</span><span class="c22">&nbsp;List&lt;</span><span class="c23">string</span><span class="c4">&gt; { entrance, exit });</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; }</span></p><p class="c19"><span class="c48">}</span></p></td></tr></table><p class="c50"><span class="c13">If the BallPath is invalid, the module driver will log an error similar to:</span></p><p class="c16"><span class="c0">BallPath handler &lt;className&gt; pri=162 active but does not explicitly support requested exit &lt;exitName&gt;, entrance: &lt;entranceName&gt;</span></p><p class="c16"><span class="c13">This table lists the valid BallPaths in Heist:</span></p><a id="t.c115f0b056134f6abd3ce549e4a7e6809f7843df"></a><a id="t.4"></a><table class="c47"><tr class="c21"><td class="c9 c44" colspan="1" rowspan="1"><p class="c42 c31"><span class="c2"></span></p></td><td class="c7 c44" colspan="1" rowspan="1"><p class="c42"><span class="c2">EntranceName</span></p></td><td class="c20 c44" colspan="1" rowspan="1"><p class="c42"><span class="c2">ExitName</span></p></td><td class="c35 c44" colspan="1" rowspan="1"><p class="c42"><span class="c2">Destination</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3 c31"><span class="c2"></span></p></td><td class="c7" colspan="1" rowspan="4"><p class="c3"><span class="c2">LeftOuterLoop</span></p><p class="c3 c31"><span class="c2"></span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Passthrough</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Right outer loop</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3 c31"><span class="c2"></span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Hole</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Back Hole</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3 c31"><span class="c2"></span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Divert</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Pop area</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Lock</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Back magnet</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3 c31"><span class="c2"></span></p></td><td class="c7" colspan="1" rowspan="10"><p class="c3"><span class="c2">LeftRamp</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Passthrough</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Left inlane</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3 c31"><span class="c2"></span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Hole</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Casino Hole</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Divert</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Casino Hole</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Lock</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Casino Hole, launch to wireform lock</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">InlaneL</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Casino Hole, launch to left inlane</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">InlaneR</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Casino Hole, launch to right inlane</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">OuterLoop</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Casino Hole, launch from right outer loop</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">InnerLoop</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Casino Hole, launch from left inner loop</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Jail</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Casino Hole, launch from jail</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">LoadCrane</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Casino Hole, launch to wireform lock, crane pickup</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3 c31"><span class="c2"></span></p></td><td class="c7" colspan="1" rowspan="4"><p class="c3"><span class="c2">SideLoop</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Passthrough</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Right outer loop</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3 c31"><span class="c2"></span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Hole</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Back hole</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Divert</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Pop area</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Lock</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Back Magnet</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3 c31"><span class="c2"></span></p></td><td class="c7" colspan="1" rowspan="4"><p class="c3"><span class="c2">LeftInnerLoop</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Passthrough</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Right inner loop</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3 c31"><span class="c2"></span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Hole</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Jail hole</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Divert</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Jail hole</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Lock</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Jail magnet</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c7" colspan="1" rowspan="2"><p class="c3"><span class="c2">Jail</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Passthrough</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Jail hole</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3 c31"><span class="c2"></span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Hole</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Jail hole</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3 c31"><span class="c2"></span></p></td><td class="c7" colspan="1" rowspan="4"><p class="c3"><span class="c2">RightInnerLoop</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Passthrough</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Left inner loop</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3 c31"><span class="c2"></span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Hole</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Jail hole</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Divert</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Jail hole</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Lock</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Jail magnet</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3 c31"><span class="c2"></span></p></td><td class="c7" colspan="1" rowspan="4"><p class="c3"><span class="c2">RightRamp</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Passthrough</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Right inlane</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Divert</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Wireform lock</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Lock</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Wireform lock</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">InlaneR</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Right inlane</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3 c31"><span class="c2"></span></p></td><td class="c7" colspan="1" rowspan="4"><p class="c3"><span class="c2">RightOuterLoop</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Passthrough</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Left outer loop</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3 c31"><span class="c2"></span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Hole</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Back hole</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Divert</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Pop area</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Lock</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Back magnet</span></p></td></tr><tr class="c21"><td class="c9" colspan="1" rowspan="1"><p class="c3"><span class="c2">*</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">Drain</span></p></td><td class="c20" colspan="1" rowspan="1"><p class="c3"><span class="c2">Passthrough</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c2">Drain</span></p></td></tr></table><p class="c16 c31"><span class="c2"></span></p><p class="c16"><span class="c13">* means this BallPath can be added but is not listed in the module definition file.</span></p><p class="c16"><span class="c13">As you can see, there are many BallPaths missing in the module definition file.</span></p><p class="c16"><span class="c13">The Heist module is special because 7 out of 8 shots have the ability to gobble the ball and make it disappear. The Heist application takes advantage of this to implement the inverse of add-a-ball: during some multiballs, jackpots remove a ball until there is only one ball in play, ending the multiball.</span></p><p class="c16"><span class="c13">The BallPaths that end in a magnet lock must be used with caution. The Heist playfield magnets do not have active cooling and they can be easily damaged if they hold the ball for too long. The BallPath can remain active indefinitely because the magnet is only energized when it senses the ball presence. What needs caution is how long the ball is physically locked on the magnet.</span></p><p class="c16"><span class="c13">The crane magnet is smaller and can withstand suspending the ball for longer but not for an unlimited amount of time. As a rough guideline, suspending the ball for 30 seconds or less should be safe.</span></p><h2 class="c5"><span class="c27">BallPaths in the Module Definition File</span></h2><p class="c16"><span class="c13">The module definition file lists only valid BallPaths, so let&rsquo;s try them all. In this code snippet, we log at error level to make it easier to find our tracing logs, these are obviously not errors.</span></p><a id="t.59bdc4f4da294900f1055e4736c33e018bf7418e"></a><a id="t.5"></a><table class="c47"><tr class="c21"><td class="c59" colspan="1" rowspan="1"><p class="c38"><span class="c4">using Multimorphic.P3App.Logging;</span></p><p class="c3"><span class="c4">...</span></p><p class="c3 c31"><span class="c4"></span></p><p class="c3"><span class="c23">foreach</span><span class="c22">&nbsp;(BallPathDefinition ballPathDef </span><span class="c23">in</span><span class="c4">&nbsp;p3.BallPaths.Values)</span></p><p class="c3"><span class="c4">{</span></p><p class="c3"><span class="c22">&nbsp; &nbsp; Logger.LogError(LogCategories.Game, ballPath.EntranceName + </span><span class="c1">&quot; TO &quot;</span><span class="c4">&nbsp;+</span></p><p class="c3"><span class="c22">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ballPath.ExitName + </span><span class="c1">&quot; &nbsp;(&quot;</span><span class="c22">&nbsp;+ ballPath.Name + </span><span class="c1">&quot;)&quot;</span><span class="c4">);</span></p><p class="c3"><span class="c22">&nbsp; &nbsp; PostModeEventToModes(</span><span class="c1">&quot;Evt_AddPathByName&quot;</span><span class="c22">, </span><span class="c23">new</span><span class="c22">&nbsp;List&lt;</span><span class="c23">string</span><span class="c4">&gt; {</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ballPath.EntranceName, ballPath.ExitName });</span></p><p class="c19"><span class="c22">}</span></p></td></tr></table><p class="c16 c31"><span class="c13"></span></p><p class="c16"><span class="c13">The table below lists the results. There are many ExitNames that are invalid. From the completed event we can guess which ExitName was intended. There is even a whole BallPath that is documented but is not implemented by the module driver.</span></p><p class="c16"><span class="c43 c57">BallPath</span><span class="c2">&nbsp;means this BallPath is documented but it is not implemented.</span></p><p class="c16"><span class="c43 c53">ExitName</span><span class="c2">&nbsp;means this is a descriptive name, the real exit name used to add the BallPath is given below it.</span></p><a id="t.86fdcb7f4ea98f16864984b2ad3b077c5b8474b3"></a><a id="t.6"></a><table class="c47"><tr class="c21"><td class="c14 c44" colspan="1" rowspan="1"><p class="c42"><span class="c2">BallPath Name</span></p></td><td class="c7 c44" colspan="1" rowspan="1"><p class="c42"><span class="c2">EntranceName</span></p></td><td class="c7 c44" colspan="1" rowspan="1"><p class="c42"><span class="c2">ExitName</span></p></td><td class="c8 c44" colspan="1" rowspan="1"><p class="c42"><span class="c2">CompletedEvent</span></p></td></tr><tr class="c21"><td class="c14" colspan="1" rowspan="1"><p class="c3"><span class="c2">LeftOuterLoopToRightOuterLoop</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">LeftOuterLoop</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c37">RightOuterLoop</span></p><p class="c3"><span class="c2">Passthrough</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c2">Evt_Shot_LeftOuterLoopToPassthrough</span></p></td></tr><tr class="c21"><td class="c14" colspan="1" rowspan="1"><p class="c3"><span class="c2">LeftOuterLoopToHole</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">LeftOuterLoop</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">Hole</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c2">Evt_Shot_LeftOuterLoopToHole</span></p></td></tr><tr class="c21"><td class="c14" colspan="1" rowspan="1"><p class="c3"><span class="c37">LeftOuterLoopToSideLoop</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c37">LeftOuterLoop</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c37">SideLoop</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c37">Evt_Shot_LeftOuterLoopToSideLoop</span></p></td></tr><tr class="c21"><td class="c14" colspan="1" rowspan="1"><p class="c3"><span class="c2">LeftOuterLoopToPopArea</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">LeftOuterLoop</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c37">OuterLoop</span></p><p class="c3"><span class="c2">Divert</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c2">Evt_Shot_LeftOuterLoopToDivert</span></p></td></tr><tr class="c21"><td class="c14" colspan="1" rowspan="1"><p class="c3"><span class="c2">LeftRampToLeftInlane</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">LeftRamp</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c37">LeftInlane</span></p><p class="c3"><span class="c43">Passthrough</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c2">Evt_Shot_LeftRampToPassthrough</span></p></td></tr><tr class="c21"><td class="c14" colspan="1" rowspan="1"><p class="c3"><span class="c2">LeftRampToHole</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">LeftRamp</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">Hole</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c2">Evt_Shot_LeftRampToHole</span></p></td></tr><tr class="c21"><td class="c14" colspan="1" rowspan="1"><p class="c3"><span class="c2">SideLoopToRightOuterLoop</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">SideLoop</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c43 c57">RightOuterLoop</span></p><p class="c3"><span class="c2">Passthrough</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c2">Evt_Shot_SideLoopToPassthrough</span></p></td></tr><tr class="c21"><td class="c14" colspan="1" rowspan="1"><p class="c3"><span class="c2">SideLoopToHole</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">SideLoop</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">Hole</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c2">Evt_Shot_SideLoopToHole</span></p></td></tr><tr class="c21"><td class="c14" colspan="1" rowspan="1"><p class="c3"><span class="c2">LeftInnerLoopToRightInnerLoop</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">LeftInnerLoop</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c37">RightInnerLoop</span></p><p class="c3"><span class="c43">Passthrough</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c2">Evt_Shot_LeftInnerLoopToPassthrough</span></p></td></tr><tr class="c21"><td class="c14" colspan="1" rowspan="1"><p class="c3"><span class="c2">LeftInnerLoopToHole</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">LeftInnerLoop</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">Hole</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c2">Evt_Shot_LeftInnerLoopToHole</span></p></td></tr><tr class="c21"><td class="c14" colspan="1" rowspan="1"><p class="c3"><span class="c2">JailHole</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">Jail</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">Hole</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c2">Evt_Shot_JailToPassthrough</span></p></td></tr><tr class="c21"><td class="c14" colspan="1" rowspan="1"><p class="c3"><span class="c2">RightInnerLoopToLeftInnerLoop</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">RightInnerLoop</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c37">LeftInnerLoop</span></p><p class="c3"><span class="c2">Passthrough</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c2">Evt_Shot_RightInnerLoopToPassthrough</span></p></td></tr><tr class="c21"><td class="c14" colspan="1" rowspan="1"><p class="c3"><span class="c2">RightInnerLoopToHole</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">RightInnerLoop</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">Hole</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c2">Evt_Shot_RightInnerLoopToHole</span></p></td></tr><tr class="c21"><td class="c14" colspan="1" rowspan="1"><p class="c3"><span class="c2">RightRampToRightInlane</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">RightRamp</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c37">RightInlane</span></p><p class="c3"><span class="c43">Passthrough</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c2">Evt_Shot_RightRampToPassthrough</span></p></td></tr><tr class="c21"><td class="c14" colspan="1" rowspan="1"><p class="c3"><span class="c2">RightOuterLoopToLeftOuterLoop</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">RightOuterLoop</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c43 c57">LeftOuterLoop</span><span class="c2">&nbsp;Passthrough</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c2">Evt_Shot_RightOuterLoopToPassthrough</span></p></td></tr><tr class="c21"><td class="c14" colspan="1" rowspan="1"><p class="c3"><span class="c2">RightOuterLoopToHole</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">RightOuterLoop</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c2">Hole</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c2">Evt_Shot_RightOuterLoopToHole</span></p></td></tr></table><p class="c16 c31"><span class="c2"></span></p><h2 class="c5"><span class="c27">Shot Events</span></h2><p class="c16" id="h.gjdgxs"><span class="c13">Let&rsquo;s assume the BallPath &lt;EntranceName&gt;To&lt;ExitName&gt; is active. For example, the BallPath could be LeftOuterLoopToHole where &lt;EntranceName&gt; is LeftOuterLoop and &lt;ExitName&gt; is Hole.</span></p><p class="c16"><span>When the module driver detects the entrance switch is activated, it will send the event </span><span class="c33">PostModeEventToModes(&quot;Evt_&lt;EntranceName&gt;Started&quot;, &quot;&quot;);</span></p><p class="c16"><span class="c13">That will be the only event sent if the ball does not follow the intended path. For example, if the shot is too weak and the ball comes back down the LeftOuterLoop.</span></p><p class="c16"><span class="c13">If the ball completes the BallPath trajectory, the following events are also sent:</span></p><p class="c6"><span class="c33">PostModeEventToModes(&quot;Evt_&lt;EntranceName&gt;Completed&quot;, &quot;&lt;ExitName&gt;&quot;);</span></p><p class="c6"><span class="c33">PostModeEventToModes(&quot;Evt_Shot_&lt;EntranceName&gt;To&lt;ExitName&gt;&quot;, &quot;&lt;ExitName&gt;&quot;);</span></p><p class="c6"><span class="c33">PostModeEventToModes(&quot;Evt_Shot_&lt;EntranceName&gt;&quot;, &quot;&lt;ExitName&gt;&quot;);</span></p><p class="c16"><span class="c33">PostModeEventToModes(&quot;Evt_ShotHit&lt;EntranceName&gt;&quot;, &quot;&lt;EntranceName&gt;To&lt;ExitName&gt;&quot;);</span></p><h2 class="c5"><span class="c27">Divert ExitName</span></h2><p class="c16"><span>The BallPaths </span><span class="c29">EntranceName</span><span class="c13">ToDivert have many issues with shot events.</span></p><ul class="c30 lst-kix_list_2-0 start"><li class="c6 c36 li-bullet-0"><span class="c13">LeftOuterLoopToDivert (Pop Area) starts but it never completes.</span></li><li class="c6 c36 li-bullet-0"><span class="c13">LeftRampToDivert (Casino Hole) is the only one that completes normally.</span></li><li class="c6 c36 li-bullet-0"><span class="c13">SideLoopToDivert (Pop Area) starts but it never completes.</span></li><li class="c6 c36 li-bullet-0"><span class="c13">LeftInnerLoopToDivert (Jail Hole) completes as LeftInnerLoopToHole.</span></li><li class="c6 c36 li-bullet-0"><span class="c13">RightInnerLoopToDivert (Jail Hole) completes as RightInnerLoopToHole.</span></li><li class="c6 c36 li-bullet-0"><span class="c13">RightRampToDivert (Wireform Lock) completes twice per shot,</span></li></ul><p class="c6 c56"><span class="c13">once as RightRampToInlaneR and once as RightRampToPassthrough.</span></p><ul class="c30 lst-kix_list_2-0"><li class="c16 c36 li-bullet-0"><span class="c13">RightOuterLoopToDivert (Pop Area) starts but never completes.</span></li></ul><h2 class="c5"><span class="c27">ExitType</span></h2><p class="c16"><span class="c13">Every BallPathDefinition specifies the ExitType which is an indication of what happens to the ball if it completes that Ballpath. The possible values are given by the BallPathExitType enumeration.</span></p><p class="c6"><span class="c0">namespace Multimorphic.NetProcMachine.Config;</span></p><p class="c6 c31"><span class="c0"></span></p><p class="c6"><span class="c0">public enum BallPathExitType</span></p><p class="c6"><span class="c0">{</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; Undefined,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; Other,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; PlayfieldLocation,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; Hole,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; Lock,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; TemporaryLock,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; Target,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; Path</span></p><p class="c16"><span class="c13">}</span></p><p class="c16"><span class="c13">Undefined is an error, it means uninitialized.</span></p><p class="c16"><span class="c13">Other means none of the other choices. It&rsquo;s not clear what the application should conclude from that, hence it is best to avoid this ExitType.</span></p><p class="c16"><span class="c13">PlayfieldLocation means the ball ends up in play somewhere on the playfield.</span></p><p class="c16"><span class="c13">Hole means the ball is gobbled up and it disappears unless the application relaunches it explicitly.</span></p><p class="c16"><span class="c13">Lock means the ball is permanently locked, like in a saucer or a physical lock.</span></p><p class="c16"><span class="c13">TemporaryLock means the ball is taking a long time to complete its travel but it will eventually be back in play without the application intervention. For Heist, this is the pop area.</span></p><p class="c16"><span class="c13">Target is a simple switch like a stand up target or a rollover button. The assumption is the ball remains in play after hitting the switch.</span></p><p class="c16"><span class="c13">It&rsquo;s not clear what Path means. Current modules do not use that ExitType. It is best to avoid it until it is better documented.</span></p><h2 class="c5"><span class="c27">Target BallPaths</span></h2><p class="c16"><span class="c13">The Heist module definition file defines 5 Target BallPaths, one for each stand up target on the module: RightJailTarget, LeftJailTarget, RightTarget, CenterTarget, LeftTarget.</span></p><p class="c16"><span class="c13">For example, here is the BallPathDefinition for the RightJailTarget:</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; {</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &quot;Name&quot;: &quot;RightJailTarget&quot;,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &quot;Tags&quot;: [&quot;Target&quot;],</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &quot;ExitType&quot;: &quot;Target&quot;,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &quot;EntranceName&quot;: &quot;RightJailTarget&quot;,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &quot;ExitName&quot;: &quot;RightJailTarget&quot;,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &quot;StartedEvent&quot;: &quot;sw_RightJailTarget_active&quot;,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &quot;CompletedEvent&quot;: &quot;sw_RightJailTarget_inactive&quot;,</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &quot;EntrancePosition&quot;: [11.5,5,0],</span></p><p class="c6"><span class="c0">&nbsp; &nbsp; &nbsp; &quot;ExitPosition&quot;: [11.5,5,0],</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;EntranceLEDs&quot;: [[&quot;jailRight&quot;],],</span></p><p class="c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&quot;ExitLEDs&quot;: [[&quot;&quot;],], </span></p><p class="c6"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c6 c31"><span class="c0"></span></p><p class="c16"><span class="c13">Notice how the EntranceName and ExitName are the same and they are equal to the switch name.</span></p><p class="c16"><span class="c13">Technically, a Target BallPath starts when the switch is activated and completes when the switch is deactivated. Many applications will choose to handle the shot as soon as the switch is activated.</span></p><p class="c16"><span class="c13">The StartedEvent and CompletedEvent look like switch events in Heist. The application can indeed detect this BallPath by installing switch event handlers. The Heist module driver is special. It forwards many switch events as regular mode to modes events. For the Heist module, the application can choose to detect a Target BallPath by registering mode to modes event handlers instead.</span></p><p class="c16"><span class="c13">A Target BallPath is always active. There is no point in trying to activate it by posting the Evt_AddPathByName event. If you post the event anyway, it will log an error saying the entrance name is not valid. Indeed, the target switch name is not a valid entrance name.</span></p><h2 class="c5"><span class="c27">Jail Gate API</span></h2><p class="c16"><span class="c13">The JailToHole and JailToDivert BallPaths both end up in the Jail hole.</span></p><p class="c16"><span class="c54">You might expect a BallPath exists to close the gate, considering it is driven by a diverter, but there isn&#39;t one. </span><span class="c13">It is possible to close the gate using the low-level diverter API previously discussed with Evt_ServoUp_jailServo and Evt_ServoDown_jailServo, but there is a nicer way.</span></p><p class="c50 c26"><span class="c13">The application can send the Evt_OpenJailGate event to control the gate. The event argument is a boolean, it chooses whether the gate should be opened or closed. </span></p><a id="t.f787db46759fcb48fbdf4b2cbd51d4bc94ccce52"></a><a id="t.7"></a><table class="c28"><tr class="c21"><td class="c11" colspan="1" rowspan="1"><p class="c40"><span class="c13">Event</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c10"><span class="c13">Description</span></p></td></tr><tr class="c21"><td class="c17" colspan="1" rowspan="1"><p class="c40"><span class="c13">Evt_OpenJailGate</span></p></td><td class="c39" colspan="1" rowspan="1"><p class="c10"><span class="c13">Event data is: true to open the gate, false to close the gate.</span></p></td></tr></table><h2 class="c60"><span class="c27">Missing BallPaths</span></h2><p class="c16"><span class="c13">Besides the possibly missing Jail Gate closed BallPath, the Heist module driver is missing a couple BallPaths involving the SideLoop exit. There is no point in trying to make these BallPaths active since the SideLoop is not a valid ExitName.</span></p><p class="c16"><span class="c13">The ball very rarely exits through the SideLoop but it is not impossible. &nbsp;</span></p><p class="c16"><span class="c13">A weak ball entering the LeftOuterLoop can stop short of the back magnet and fall back down through the SideLoop. When this happens, the Heist module driver reports a completed LeftOuterLoopToOuterLoop shot, which is incorrect. The Heist application has code to detect this shot and awards a U-Turn shot as an easter egg. Sample code to detect a U-Turn is given in Appendix.</span></p><p class="c16"><span class="c13">The second missing BallPath is similar but the ball enters from the RightOuterLoop and exits through the SideLoop. In this case, the module driver detects the RightOuterLoop shot is started but it thinks the shot is never completed.</span></p><h2 class="c5"><span class="c27">Wireform Lock</span></h2><p class="c16"><span class="c13">One way to lock the ball on the wireform is to activate the LeftRamp to Lock BallPath.</span></p><p class="c16"><span class="c22">PostModeEventToModes(</span><span class="c1">&quot;Evt_AddPathByName&quot;</span><span class="c22">, </span><span class="c23">new</span><span class="c22">&nbsp;List&lt;</span><span class="c23">string</span><span class="c4">&gt; { &quot;LeftRamp&quot;, &quot;Lock&quot; });</span></p><p class="c16"><span class="c13">If the player shoots the left ramp, the ball will fall into the Casino Hole, relaunch over the highwire and finish locked on the wireform, ready to be picked up by the crane or released to the right inlane.</span></p><p class="c16"><span class="c13">The application must remember to replace the LeftRamp BallPath when the Lock is no longer desirable.</span></p><p class="c16"><span class="c13">If the application wants to lock the ball immediately under its control, it can make these calls:</span></p><p class="c6"><span class="c2">PostModeEventToModes(&quot;Evt_SetupLeftRampLock&quot;, true);</span></p><p class="c6"><span class="c2">AddModeEventHandler(&quot;Evt_BallLockedLeft&quot;, PendingBallLockedEventHandler, base.Priority);</span></p><p class="c6"><span class="c2">HeistBallLauncher.launch(&quot;InlaneR&quot;);</span></p><p class="c6 c31"><span class="c2"></span></p><h2 class="c5"><span class="c27">Crane Pickup</span></h2><p class="c16"><span class="c13">If the application always wants to pick up the ball immediately after a completed LeftRamp to Lock BallPath, it can choose to activate the LeftRamp to LoadCrane BallPath instead.</span></p><p class="c16"><span class="c22">PostModeEventToModes(</span><span class="c1">&quot;Evt_AddPathByName&quot;</span><span class="c22">, </span><span class="c23">new</span><span class="c22">&nbsp;List&lt;</span><span class="c23">string</span><span class="c4">&gt; { &quot;LeftRamp&quot;, &quot;LoadCrane&quot; });</span></p><p class="c16"><span class="c13">This does the same thing as the LeftRamp to Lock BallPath, but once the ball is locked, the module driver proceeds with a call to Evt_CranePickup. The ball ends up suspended by the crane over the playfield.</span></p><p class="c16"><span class="c13">To protect the crane magnet, be cautious to always drop the ball after a reasonable bounded amount of time.</span></p><p class="c16"><span class="c13">The application must remember to replace the LeftRamp BallPath when the LoadCrane is no longer desirable.</span></p><p class="c16"><span>The application must be ready to handle errors if the launch or pickup fails. See the </span><span class="c32"><a class="c45" href="HeistCrane.html">Heist Crane Tech Tip</a></span><span class="c13">&nbsp;for more information on the crane.</span></p><h2 class="c5"><span class="c27">Appendix</span></h2><p class="c16"><span class="c13">This mode detects when a ball drops in the SideLoop within 3 seconds of entering the LeftOuterLoop. When this ball path is detected, the mode sends the Evt_UTurn event.</span></p><p class="c16"><span class="c13">This mode works better in single-ball play. It can incorrectly detect U-Turn shots in multiball.</span></p><a id="t.f39928c14328df2ef58df2b8d71228cf3ee4ac42"></a><a id="t.8"></a><table class="c47"><tr class="c21"><td class="c41" colspan="1" rowspan="1"><p class="c38"><span class="c4">using Multimorphic.NetProcMachine.Machine;</span></p><p class="c3"><span class="c4">using Multimorphic.P3;</span></p><p class="c3"><span class="c4">using Multimorphic.P3App.Modes;</span></p><p class="c3"><span class="c4">using Multimorphic.NetProc;</span></p><p class="c3 c31"><span class="c4"></span></p><p class="c3"><span class="c4">namespace Multimorphic.P3SA.Modes</span></p><p class="c3"><span class="c4">{</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; public class UTurnMode : P3Mode</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; {</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; private bool isLeftOuterLoopStarted;</span></p><p class="c3 c31"><span class="c4"></span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; public UTurnMode(P3Controller controller, int priority)</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : base(controller, priority)</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AddModeEventHandler(&quot;Evt_LeftOuterLoopStarted&quot;, LeftOuterLoopStartedEventHandler, base.Priority);</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c3 c31"><span class="c4"></span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; public override void mode_started()</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; base.mode_started();</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isLeftOuterLoopStarted = false;</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c3 c31"><span class="c4"></span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; public bool LeftOuterLoopStartedEventHandler(string evtName, object evtData)</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isLeftOuterLoopStarted = true;</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; delay(&quot;LeftOuterLoopTimeout&quot;, EventType.None, 3.0, new Multimorphic.P3.VoidDelegateNoArgs(LeftOuterLoopTimeout));</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return EVENT_CONTINUE;</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c3 c31"><span class="c4"></span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; private void LeftOuterLoopTimeout()</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isLeftOuterLoopStarted = false;</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c3 c31"><span class="c4"></span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; public bool sw_SideLoop_active(Switch sw)</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isLeftOuterLoopStarted)</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isLeftOuterLoopStarted = false;</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cancel_delayed(&quot;LeftOuterLoopTimeout&quot;);</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PostModeEventToModes(&quot;Evt_UTurn&quot;, null);</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return SWITCH_CONTINUE;</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; }</span></p><p class="c19"><span class="c4">}</span></p></td></tr></table><p class="c16 c31"><span class="c13"></span></p></body></html>
