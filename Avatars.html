<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=fpjTOVmNbO4Lz34iLyptLROjXfSpIU_1TsQlCJ7q4Wm1YodTcn8uuQV0ZHSXsfGz);ol{margin:0;padding:0}table td,table th{padding:0}.c8{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:467.5pt;border-top-color:#000000;border-bottom-style:solid}.c16{background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:"Roboto";font-style:normal}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Calibri";font-style:normal}.c5{color:#2f5496;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:13pt;font-family:"Calibri";font-style:normal}.c14{color:#2f5496;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Calibri";font-style:normal}.c11{padding-top:2pt;padding-bottom:0pt;line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c2{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9.5pt;font-family:"Consolas";font-style:normal}.c12{padding-top:12pt;padding-bottom:0pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c9{padding-top:0pt;padding-bottom:6pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c4{padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c10{padding-top:6pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c7{padding-top:0pt;padding-bottom:8pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c1{padding-top:0pt;padding-bottom:0pt;line-height:1.0791666666666666;orphans:2;widows:2;text-align:left}.c17{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#0000ff;text-decoration:underline}.c3{border-spacing:0;border-collapse:collapse;margin-right:auto}.c18{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c19{color:inherit;text-decoration:inherit}.c6{height:11pt}.c15{page-break-after:avoid}.c13{height:0pt}.title{padding-top:24pt;color:#000000;font-weight:700;font-size:36pt;padding-bottom:6pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:18pt;color:#666666;font-size:24pt;padding-bottom:4pt;font-family:"Georgia";line-height:1.0791666666666666;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Calibri"}p{margin:0;color:#000000;font-size:11pt;font-family:"Calibri"}h1{padding-top:12pt;color:#2f5496;font-size:16pt;padding-bottom:0pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:2pt;color:#2f5496;font-size:13pt;padding-bottom:0pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:14pt;color:#000000;font-weight:700;font-size:14pt;padding-bottom:4pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:12pt;color:#000000;font-weight:700;font-size:12pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:11pt;color:#000000;font-weight:700;font-size:11pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:10pt;color:#000000;font-weight:700;font-size:10pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.0791666666666666;page-break-after:avoid;orphans:2;widows:2;text-align:left}</style></head><body class="c18 doc-content"><h1 class="c12 c15"><span class="c14">Avatars</span></h1><p class="c7"><span class="c0">An avatar is a representation of a physical object, like the ball, slingshots and flippers. In the P3, avatars are used to detect collisions with other GameObjects.</span></p><p class="c1"><span>See the SDK documentation in </span><span class="c17">file:///C:/P3/P3_SDK_V0.8/P3SampleApp/Documentation/html/_g_u_i_layer.html</span><span class="c0">&nbsp;</span></p><p class="c1 c6"><span class="c0"></span></p><h2 class="c11"><span class="c5">P3Playfield</span></h2><p class="c1"><span class="c0">The P3Playfield prefab is located in Assets\Resources\Prefabs\Framework\P3Playfield.prefab</span></p><p class="c1"><span class="c0">It is instantiated in Setup (the base class of P3SASetup) with DontDestroyOnLoad flag, so it remains available in all scenes.</span></p><p class="c1 c6"><span class="c0"></span></p><p class="c1"><span>Here is the contents of the P3Playfield prefab with avatars shown. See the </span><span class="c17"><a class="c19" href="VirtualTargets.html">TechTip on Virtual Targets</a></span><span class="c0">&nbsp;for more information on the other children of P3Playfield. </span></p><p class="c1 c6"><span class="c0"></span></p><p class="c7"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 271.04px; height: 413.06px;"><img alt="" src="images/P3PlayfieldAvatars.png" style="width: 271.04px; height: 413.06px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7"><span class="c0">The MouseBall synthesizes grid events to emulate the ball position when the mouse button is down. This is used to move the ball to test the app in the Unity simulator.</span></p><p class="c7"><span>BallAvatar represents</span><span class="c16">&nbsp;the ball&#39;s most recent position. It gets the position and velocity from P3Controller. The volume from the last position to the new position is used to detect collisions with other GameObjects.</span></p><p class="c7"><span class="c0">ExperimentalBallTracker tries to track up to 4 separate balls on the grid all at once. Based on the name, it&rsquo;s not clear if the feature is complete or not.</span></p><p class="c7"><span class="c0">FlipperLeftAvatar and FlipperRightAvatar represent the flippers. They track the up and down movement of the lower flippers.</span></p><p class="c7"><span class="c0">The SlingshotLeftAvatar and SlingshotRightAvatar represent the slingshots. They track the movement of the slingshots when the coil triggers. </span></p><p class="c7"><span class="c0">At runtime, there is an avatar trail object created for each avatar. The trail object is created by PlayfieldObjectProjection to initialize its Trail parameter. The avatar trail objects are visible in the Hierarchy at runtime when you look under DontDestroyOnLoad/P3Playfield(Clone)</span></p><p class="c7"><span class="c0">P3Playfield has individual options to show: the ball path, gates, flippers, slingshots, the playfield overlay, and/or the infrared grid. I didn&rsquo;t see any change when showing the ball path, gates or the playfield overlay. Showing the flippers or the slingshots displays the stylized outline of the avatars. Showing the IR grid shows the beams crisscrossing over the screen.</span></p><h2 class="c11"><span class="c5">Collisions</span></h2><p class="c1 c6"><span class="c0"></span></p><p class="c1"><span class="c0">To determine if your GameObject collides with the ball, create a RigidBody and a Collider in you object, and in the OnTriggerEnter() method, call HitByBall()</span></p><a id="t.5560c429310c5473e29a195888e5e5b88083f9bb"></a><a id="t.0"></a><table class="c3"><tr class="c13"><td class="c8" colspan="1" rowspan="1"><p class="c10"><span class="c2">public class MyHittableObject: P3Aware {</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; public void OnTriggerEnter(Collider other) {</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; if (HitByBall(other)) {</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PostGUIEventToModes(&quot;Evt_ObjectHit&quot;, position); // Let the mode layer know about the collision</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Add more GUI layer reaction code here</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; }</span></p><p class="c9"><span class="c2">}</span></p></td></tr></table><p class="c1 c6"><span class="c0"></span></p><p class="c1"><span class="c0">To determine if your GameObject collides with the flippers, call HitByFlipper(). This function returns the motion of the flipper during the collision or None if no collision.</span></p><p class="c1 c6"><span class="c0"></span></p><a id="t.09832bbb796515998cdac17fc560c452662416b7"></a><a id="t.1"></a><table class="c3"><tr class="c13"><td class="c8" colspan="1" rowspan="1"><p class="c10"><span class="c2">using Multimorphic.P3App.GUI;</span></p><p class="c10"><span class="c2">public class MyHittableObject: P3Aware {</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; public void OnTriggerEnter(Collider other) {</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c4"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; FlipperHitType hitType = HitByFlipper(other);</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; if (hitType != FlipperHitType.None) {</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PostGUIEventToModes(&quot;Evt_ObjectHit&quot;, position); // Let the mode layer know about the collision</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Add more GUI layer reaction code here</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; }</span></p><p class="c9"><span class="c2">}</span></p></td></tr></table><p class="c1 c6"><span class="c0"></span></p><a id="t.7e37f9cafd55677599f7c8866c4441cfbba3d82d"></a><a id="t.2"></a><table class="c3"><tr class="c13"><td class="c8" colspan="1" rowspan="1"><p class="c10"><span class="c2">public enum FlipperHitType</span></p><p class="c4"><span class="c2">{</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; None,</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; Idle,</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; Upward,</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; Downward</span></p><p class="c9"><span class="c2">}</span></p></td></tr></table><p class="c12"><span class="c0">To determine if your GameObject collides with the slingshots, call HitBySlingshots(). This function returns the side of the slingshot or None if no collision.</span></p><a id="t.a35d90521cc28422d300bc28fcf2e6aba5ed97d0"></a><a id="t.3"></a><table class="c3"><tr class="c13"><td class="c8" colspan="1" rowspan="1"><p class="c10"><span class="c2">using Multimorphic.P3App.GUI;</span></p><p class="c10"><span class="c2">public class MyHittableObject: P3Aware {</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; public void OnTriggerEnter(Collider other) {</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c4"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; SlingshotHitType hitType = HitBySlingshot(other);</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; if (hitType != SlingshotHitType.None) {</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PostGUIEventToModes(&quot;Evt_ObjectHit&quot;, position); // Let the mode layer know about the collision</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Add more GUI layer reaction code here</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; }</span></p><p class="c9"><span class="c2">}</span></p></td></tr></table><p class="c1 c6"><span class="c0"></span></p><a id="t.a453b7c2f4c221a6ccea0fa4f2f7a3538860e7e6"></a><a id="t.4"></a><table class="c3"><tr class="c13"><td class="c8" colspan="1" rowspan="1"><p class="c10"><span class="c2">public enum SlingshotHitType</span></p><p class="c4"><span class="c2">{</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; None,</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; Left,</span></p><p class="c4"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; Right</span></p><p class="c9"><span class="c2">}</span></p></td></tr></table><p class="c1 c6"><span class="c0"></span></p><h2 class="c11"><span class="c5">Ball Decorations</span></h2><p class="c1 c6"><span class="c0"></span></p><p class="c1"><span class="c0">The Home scene hierarchy contains a BallDecorators. This object tracks the ball and decorates it with a particle system. By default, this is a smoke effect.</span></p><p class="c1 c6"><span class="c0"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 183.03px; height: 378.05px;"><img alt="" src="images/BallDecorators.png" style="width: 183.03px; height: 378.05px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c6"><span class="c0"></span></p><p class="c1"><span class="c0">If you run P3SampleApp on the real P3 machine, you will see the smoke effect following the ball. If you run within the simulator, the effect does not work. PlanarBallFollower is not compatible with MouseBall because it thinks the ball is not on the grid.</span></p><p class="c1 c6"><span class="c0"></span></p><p class="c1"><span class="c0">There are also sample particle systems for: Fire, Inkblot, GreenPof and Ignition. These are disabled by default. To change to a different decorator, disable Smoke (remove the checkmark next to the game object name in the Inspector), enable the chosen decorator, and edit Planar Ball Follower in BallDecorators to assign the chosen decorator to the Follower parameter.</span></p><p class="c1 c6"><span class="c0"></span></p><h2 class="c11"><span class="c5">New Playfield Overlay</span></h2><p class="c1 c6"><span class="c0"></span></p><p class="c1"><span class="c0">The PF_OVERLAY_NEW prefab is located in Assets/Resources/Prefabs/GUI/PF_OVERLAY_NEW.prefab. It contains a detailed image of the physical playfield.</span></p><p class="c1 c6"><span class="c0"></span></p><p class="c1"><span class="c0">The Home scene in P3SampleApp contains a copy of the PF_OVERLAY_NEW prefab. The overlay is disabled by default. To enable it: select PF_OVERLAY_NEW in the Home scene hierarchy, then click the checkbox next to the name PF_OVERLAY_NEW in the Inspector.</span></p><p class="c1 c6"><span class="c0"></span></p><p class="c1"><span class="c0">This playfield overlay is convenient when developing an app and you need to position something on the screen relative to the side targets, slingshots, lower flippers and/or apron. If you are working on a different scene and you need the overlay, just add the PF_OVERLAY_NEW prefab to your scene and make sure it is enabled.</span></p><p class="c1 c6"><span class="c0"></span></p><p class="c1"><span class="c0">Remember to disable or remove the overlay when you are done with it.</span></p><p class="c1 c6"><span class="c0"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 238.93px; height: 421.01px;"><img alt="" src="images/PF_OVERLAY_NEW.png" style="width: 238.93px; height: 421.01px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c6"><span class="c0"></span></p></body></html>
